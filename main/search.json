[{"path":[]},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others‚Äô private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement [INSERT CONTACT METHOD]. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://genentech.github.io/phase1b/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired Mozilla‚Äôs code conduct enforcement ladder. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contribution Guidelines","title":"Contribution Guidelines","text":"üôè Thank taking time contribute! input deeply valued, whether issue, pull request, even feedback, regardless size, content scope.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"table-of-contents","dir":"","previous_headings":"","what":"Table of contents","title":"Contribution Guidelines","text":"üë∂ Getting started üìî Code Conduct üóÉ License üìú Issues üö© Pull requests üëó Style guide üèÜ Recognition model ‚ùì Questions","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"getting-started","dir":"","previous_headings":"","what":"Getting started","title":"Contribution Guidelines","text":"Please refer project documentation brief introduction. Please also see articles within project documentation additional information.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contribution Guidelines","text":"Code Conduct governs project. Participants contributors expected follow rules outlined therein.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Contribution Guidelines","text":"contributions covered project‚Äôs license.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"issues","dir":"","previous_headings":"","what":"Issues","title":"Contribution Guidelines","text":"use GitHub track issues, feature requests, bugs. submitting new issue, please check issue already reported. issue already exists, please upvote existing issue üëç. new feature requests, please elaborate context benefit feature users, developers, relevant personas.","code":""},{"path":[]},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"github-flow","dir":"","previous_headings":"Pull requests","what":"Github Flow","title":"Contribution Guidelines","text":"repository uses Github Flow model collaboration. submit pull request: Create branch Please see branch naming convention . don‚Äôt write access repository, please fork . Make changes Make sure code passes checks imposed GitHub Actions well documented well tested unit tests sufficiently covering changes introduced Create pull request (PR) pull request description, please link relevant issue (), provide detailed description change, include assumptions. Address review comments, Post approval Merge PR write access. Otherwise, reviewer merge PR behalf. Pat back Congratulations! üéâ now official contributor project! grateful contribution.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"branch-naming-convention","dir":"","previous_headings":"Pull requests","what":"Branch naming convention","title":"Contribution Guidelines","text":"Suppose changes related current issue current project; please name branch follows: <issue_id>_<short_description>. Please use underscore (_) delimiter word separation. example, 420_fix_ui_bug suitable branch name change resolving UI-related bug reported issue number 420 current project. change affects multiple repositories, please name branches follows: <issue_id>_<issue_repo>_<short description>. example, 69_awesomeproject_fix_spelling_error reference issue 69 reported project awesomeproject aims resolve one spelling errors multiple (likely related) repositories.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"monorepo-and-stageddependencies","dir":"","previous_headings":"Pull requests","what":"monorepo and staged.dependencies","title":"Contribution Guidelines","text":"Sometimes might need change upstream dependent package(s) able submit meaningful change. using staged.dependencies functionality simulate monorepo behavior. dependency configuration already specified project‚Äôs staged_dependencies.yaml file. need name feature branches appropriately. exception branch naming convention described . Please refer staged.dependencies package documentation details.","code":""},{"path":[]},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"r--package-versions","dir":"","previous_headings":"Pull requests > Recommended development environment & tools","what":"R & package versions","title":"Contribution Guidelines","text":"continuously test packages newest R version along recent dependencies CRAN BioConductor. recommend working environment also set way. can find details R version packages used R CMD check GitHub Action execution log - step prints R sessionInfo(). discover bugs older R versions older set dependencies, please create relevant bug reports.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"pre-commit","dir":"","previous_headings":"Pull requests > Recommended development environment & tools","what":"pre-commit","title":"Contribution Guidelines","text":"highly recommend use pre-commit tool combined R hooks pre-commit execute checks committing pushing changes. Pre-commit hooks already available repository‚Äôs .pre-commit-config.yaml file.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"style-guide","dir":"","previous_headings":"","what":"Style guide","title":"Contribution Guidelines","text":"repository follows standard tidyverse style guide uses lintr lint checks. Customized lint configurations available repository‚Äôs .lintr file.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"recognition-model","dir":"","previous_headings":"","what":"Recognition model","title":"Contribution Guidelines","text":"mentioned previously, contributions deeply valued appreciated. contribution data available part repository insights, recognize significant contribution hence add contributor package authors list, following rules enforced: Minimum 5% lines code authored* (determined git blame query) top 5 contributors terms number commits lines added lines removed* *Excluding auto-generated code, including limited roxygen comments renv.lock files. package maintainer also reserves right adjust criteria recognize contributions.","code":""},{"path":"https://genentech.github.io/phase1b/CONTRIBUTING.html","id":"questions","dir":"","previous_headings":"","what":"Questions","title":"Contribution Guidelines","text":"questions regarding contribution guidelines, please contact package/repository maintainer.","code":""},{"path":[]},{"path":[]},{"path":"https://genentech.github.io/phase1b/SECURITY.html","id":"reporting-security-issues","dir":"","previous_headings":"","what":"Reporting Security Issues","title":"Security Policy","text":"believe found security vulnerability repositories organization, please report us coordinated disclosure. Please report security vulnerabilities public GitHub issues, discussions, pull requests. Instead, please send email vulnerability.management[@]roche.com. Please include much information listed can help us better understand resolve issue: type issue (e.g., buffer overflow, SQL injection, cross-site scripting) Full paths source file(s) related manifestation issue location affected source code (tag/branch/commit direct URL) special configuration required reproduce issue Step--step instructions reproduce issue Proof--concept exploit code (possible) Impact issue, including attacker might exploit issue information help us triage report quickly.","code":""},{"path":"https://genentech.github.io/phase1b/SECURITY.html","id":"data-security-standards-dss","dir":"","previous_headings":"","what":"Data Security Standards (DSS)","title":"Security Policy","text":"Please make sure reporting issues form bug, feature, pull request, sensitive information PII, PHI, PCI completely removed text attachments, including pictures videos.","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"intro","dir":"Articles","previous_headings":"","what":"Introduction","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"short vignette serves introduction usage R-package phase1b. particular, vignette covers installation R-package phase1b, core methodology used R-package phase1b, lastly illustrating examples use clinical trials. phase1b R-package intended used conducting drug combination studies Phase 1b trials especially useful decision making Phase 1b trials. However, methodology generalizable many scenarios outside Phase 1b studies viewed general Bayesian framework analysis clinical trials . focus current vignette though solely application Phase 1b oncology clinical trials.","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"audience","dir":"Articles","previous_headings":"Introduction","what":"Intended Audience","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"document intended familiarize (potential) user phase1b models analyses available R-package. brief overview, bulk document consists examples oncology clinical trials illustrate various functions methodologies implemented R-package. Note tutorial meant serve instruction manual. detailed documentation functions contained R-package, see R-package help-manuals. R prompt, type Additional examples can found demo files R-package, can listed : afterwards called supplying name demo file demo() function.","code":"help(package = \"phase1b\") demo(package = \"phase1b\")"},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"first time use phase1b computer need download install , however, subsequent use require calling R-package.","code":"install.packages(\"phase1b\") install.packages(\"ggplot2\")"},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"getting-started","dir":"Articles","previous_headings":"","what":"Getting started","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"able run commands phase1b R-package, load R-package (assuming R-package installed following instructions Installation section following command: loaded, access functions phase1b R-package. see list functions phase1b R-package, browsing associated help pages, execute following command: list functions displayed can learn function, see examples use, clicking corresponding link. Note easiest work R-Studio, recommended software editing using R.","code":"library(phase1b) library(ggplot2) help(package = \"phase1b\")"},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"methods","dir":"Articles","previous_headings":"","what":"Methods and Models","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"section provides brief overview statistical models methods implemented phase1b R-package. underlying methodology rooted Bayesian paradigm understanding Bayesian statistics level e.g.¬†Gelman et al. (2013) Held Saban√©s Bov√© (2015) recommended. methods section provides reader basics needed understand phase1b R-package, interested learning Bayesian statistics, applications clinical trials, encouraged read Gelman et al. (2013),Held Saban√©s Bov√© (2015) Berry et al. (2011), respectively, details. first pass document, might make sense reader skip section go straight examples.","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"postdist","dir":"Articles","previous_headings":"Methods and Models","what":"Posterior Distribution","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"starting point, review basic fundamental approach Bayesian statistics. Bayesian approach models observed data unknown parameters random variables, provides cohesive framework combining complex data models external knowledge, expert opinion, . introduce main workhorse Bayesian approach, posterior distribution, technical details follows. start specifying distributional model f(ùê±|ùõâ)f(\\mathbf{x}\\,\\vert\\,\\boldsymbol{\\theta}) observed data ùê±=(x1,‚Ä¶,xn)\\mathbf{x}=(x_1,\\ldots,x_n) given vector unknown parameters ùõâ=(Œ∏1,‚Ä¶,Œ∏n)\\boldsymbol{\\theta}=(\\theta_1,\\ldots,\\theta_n), ùõâ\\boldsymbol{\\theta} random quantity sampled prior distribution œÄ(ùõâ|ùõå)\\pi(\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda}). , ùõå\\boldsymbol{\\lambda} vector hyperparameters associated parameters prior distribution. instance, xix_i might empirical drug response rate sample women aged 40 clinical center ii, Œ∏i\\theta_i underlying true response rate women center, ùõå\\boldsymbol{\\lambda} parameter controlling true rates vary across centers. Modeling Œ∏i\\theta_i random (instead fixed) effects allows us induce specific correlation structures among , hence among observations xix_i well. ùõå\\boldsymbol{\\lambda} known inference concerning ùõâ\\boldsymbol{\\theta} based posterior distribution, p(ùõâ|ùê±,ùõå)=p(ùê±,ùõâ|ùõå)p(ùê±|ùõå)=p(ùê±,ùõâ|ùõå)‚à´p(ùê±,ùõâ|ùõå)=f(ùê±|Œ∏)œÄ(ùõâ|ùõå)‚à´f(ùê±|Œ∏)œÄ(ùõâ|ùõå)dùõâ.(#eq:posterior)\\begin{equation} p(\\boldsymbol{\\theta}\\,\\vert\\,\\mathbf{x},\\boldsymbol{\\lambda}) = \\frac{p(\\mathbf{x},\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda})}{p(\\mathbf{x}\\,\\vert\\,\\boldsymbol{\\lambda})} = \\frac{p(\\mathbf{x},\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda})}{\\int p(\\mathbf{x},\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda})} = \\frac{f(\\mathbf{x}\\,\\vert\\,\\theta)\\pi(\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda})}{\\int f(\\mathbf{x}\\,\\vert\\,\\theta)\\pi(\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda}) d\\boldsymbol{\\theta}}. (\\#eq:posterior) \\end{equation} Notice contribution data (form likelihood ff) previous knowledge expert opinion (form prior œÄ\\pi) posterior. Since, practice, ùõå\\boldsymbol{\\lambda} known, second stage (hyperprior) distribution h(ùõå)h(\\boldsymbol{\\lambda}) often required, @ref(eq:posterior) replaced p(ùõâ|ùê±)=p(ùê±,ùõâ|ùõå)p(ùê±|ùõå)=p(ùê±,ùõâ|ùõå)‚à´p(ùê±,ùõâ|ùõå)=‚à´f(ùê±|Œ∏)œÄ(ùõâ|ùõå)h(ùõå)dùõå‚à´‚à´f(ùê±|Œ∏)œÄ(ùõâ|ùõå)h(ùõå)dùõâdùõå.(#eq:hier‚àípost)\\begin{equation} p(\\boldsymbol{\\theta}\\,\\vert\\,\\mathbf{x}) =\\frac{p(\\mathbf{x},\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda})}{p(\\mathbf{x}\\,\\vert\\,\\boldsymbol{\\lambda})} =\\frac{p(\\mathbf{x},\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda})}{\\int p(\\mathbf{x},\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda})} =\\frac{\\int f(\\mathbf{x}\\,\\vert\\,\\theta)\\pi(\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda})h(\\boldsymbol{\\lambda})d\\boldsymbol{\\lambda}}{\\int\\int f(\\mathbf{x}\\,\\vert\\,\\theta)\\pi(\\boldsymbol{\\theta}\\,\\vert\\,\\boldsymbol{\\lambda})h(\\boldsymbol{\\lambda}) d\\boldsymbol{\\theta}d\\boldsymbol{\\lambda}}. (\\#eq:hier-post) \\end{equation} multi-stage approach often called hierarchical modeling. computational challenge applying Bayesian methods realistic problems, integrations required inference @ref(eq:posterior) often tractable closed form, thus must approximated numerically. Forms œÄ\\pi hh (called conjugate priors) enable least partial analytic evaluation integrals may often found, presence nuisance parameters, intractable integrations remain. illustrate concept posterior distribution, calculations, use, via exploring underlying methodology implemented phase1b R-package functionpostprob(). postprob() function assumes observed data xx arise Binomial distribution size nn unknown parameter PEP_E, .e., x|n,PE‚àºBinom(n,PE)\\begin{equation} x\\,\\vert\\,n,P_E\\sim\\text{Binom}(n,P_E) \\end{equation} Bayesian approach, parameter PEP_E treated random unknown quantity model. prior distribution PEP_E can elicited external knowledge expert opinion, however, use conjugate prior employed . prior used postprob() following form: $P_E\\sim \\sum_i=1}^kw_i\\text{Beta}(a_i,b_i)$, mixture Beta distributions, simplicity, default prior postprob() set single conjugate Beta distribution, Beta(Œ±,Œ≤)\\text{Beta}(\\alpha,\\beta). make assumption (mixture) Beta prior reasonable choice prior distribution PEP_E. derive posterior distribution, based prior assumption, following: p(PE|x)=p(x|PE)œÄ(PE)‚à´p(x|PE)œÄ(PE)dPE‚àùp(x|PE)œÄ(PE)‚àùPEx(1‚àíPE)n‚àíxPEa‚àí1(1‚àíPE)b‚àí1‚àùPEa+x‚àí1(1‚àíPE)b+n‚àíx‚àí1\\begin{align*} p(P_E\\,\\vert\\,x) &=\\frac{p(x\\,\\vert\\,P_E)\\pi(P_E)}{\\int p(x\\,\\vert\\,P_E)\\pi(P_E) dP_E}\\\\ &\\propto p(x\\,\\vert\\,P_E)\\pi(P_E)\\\\ &\\propto P_E^x(1-P_E)^{n-x}P_E^{-1}(1-P_E)^{b-1}\\\\ &\\propto P_E^{+x-1}(1-P_E)^{b+n-x-1} \\end{align*} Realizing densities must integrate 1, just need figure normalizing constants proportional density. Using conjugacy, realize posterior distribution PEP_E must also follow form prior distribution PEP_E, thus recognize posterior distribution following Beta distribution PE|x‚àºBeta(+x,b+n‚àíx)\\begin{equation} P_E\\,\\vert\\,x\\sim\\text{Beta}(+x,b+n-x) \\end{equation} illustrate posterior simple prior illustration PE‚àº‚àëj=1kwiBeta(aj,bj)P_E\\sim \\sum_{j=1}^kw_i\\text{Beta}(a_j,b_j). section @ref(updateposterior), illustrate mixture Beta distribution weights parameters updated data. probabilistic calculations follow naturally Bayesian approach posterior distribution identified. example, seen function postprob(), one calculate posterior probability rate PEP_E greater (less ) threshold pp, .e., ‚Ñô(PE>p|x)\\mathbb{P}(P_E>p\\,\\vert\\,x), simply calculating area corresponding Beta distribution.","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"updateposterior","dir":"Articles","previous_headings":"Methods and Models","what":"Updating Posterior Distribution parameters and weights","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"order incorporate prior information evaluate posterior probabilities, updated weights parameters required especially mixed Beta-Binomial distribution involved. demonstrate calculation parameters weights updated, illustrate reasoning follows. present Binomial likelihood mixture Beta distributions prior begin: f(x|œÄ)=(nk)œÄx(1‚àíœÄ)n‚àíxf(œÄ)=‚àëj=1kwj1B(Œ±j,Œ≤j)œÄŒ±j‚àí1(1‚àíœÄ)Œ≤j‚àí1(#eq:binomial)\\begin{align} f(x|\\pi) &= \\binom{n}{k} \\pi^x (1-\\pi)^{n-x} \\\\ f(\\pi) &= \\sum_{j = 1}^{k} w_j \\frac {1} {B(\\alpha_j, \\beta_j)} \\pi^{\\alpha_j-1} (1-\\pi)^{\\beta_j-1} (\\#eq:binomial) \\end{align} sum wjw_j equal 1: ‚àëj=1kwj=1\\sum_{j = 1}^{k} w_j = 1. component jj Beta density: f(œÄ|Œ±j,Œ≤j)=1B(Œ±j,Œ≤j)œÄŒ±j‚àí1(1‚àíœÄ)Œ≤j‚àí1(#eq:unweightedBetaPrior)\\begin{align} f(\\pi | \\alpha_j, \\beta_j) = \\frac {1} {B(\\alpha_j, \\beta_j)} \\pi^{\\alpha_j-1} (1-\\pi)^{\\beta_j-1} (\\#eq:unweightedBetaPrior) \\end{align} B(Œ±,Œ≤)B(\\alpha, \\beta) beta function evaluated parameters Œ±\\alpha Œ≤\\beta. , product likelihood prior f(œÄ|x)‚àùf(œÄ)f(x|œÄ)f(\\pi | x) \\propto f(\\pi) f(x | \\pi) gives kernel posterior exclude normalising constants 1f(x)\\frac{1}{f(x)} well multiplicative constants depending œÄ\\pi: f(œÄ|x)‚àùœÄx(1‚àíœÄ)n‚àíx‚àëj=1kwj1B(Œ±j,Œ≤j)œÄŒ±j‚àí1(1‚àíœÄ)Œ≤j‚àí1‚àù‚àëj=1kwjB(Œ±j,Œ≤j)œÄŒ±j+x‚àí1(1‚àíœÄ)Œ≤j+n‚àíx‚àí1B(Œ±j+x,Œ≤j+n‚àíx)B(Œ±j+x,Œ≤j+n‚àíx)(#eq:rearrangingWeightedBayes)\\begin{align}  f(\\pi | x) &\\propto \\pi^x (1-\\pi)^{n-x}\\sum_{j = 1}^{k} \\ w_j \\frac {1}{B(\\alpha_j, \\beta_j)} \\pi^{\\alpha_j-1}(1-\\pi)^{\\beta_j-1} \\\\ &\\propto \\sum_{j = 1}^{k} \\frac {w_j}{B(\\alpha_j, \\beta_j)} \\pi^{\\alpha_j + x -1} (1-\\pi)^{\\beta_j + n - x -1} \\frac{B(\\alpha_j + x, \\beta_j + n - x)}{B(\\alpha_j + x, \\beta_j + n - x)}  (\\#eq:rearrangingWeightedBayes)  \\end{align} @ref(eq:rearrangingWeightedBayes), know updated Beta prior f(œÄ|Œ±+xj,Œ≤j+n‚àíx)=1Beta(Œ±j+x,Œ≤j+n‚àíx)œÄŒ±j+x‚àí1(1‚àíœÄ)Œ≤j+n‚àíx‚àí1f(\\pi | \\alpha + x_j, \\beta_j + n -x) = \\frac {1} {Beta(\\alpha_j + x, \\beta_j + n - x)}\\pi^{\\alpha_j + x -1} (1-\\pi)^{\\beta_j + n - x -1} embedded can simplified following: f(œÄ|x)‚àù‚àëj=1kwjB(Œ±j+x,Œ≤j+n‚àíx)B(Œ±j,Œ≤j)f(œÄ|Œ±j+x,Œ≤j+n‚àíx)(#eq:simplifiedWeightedBayesone)\\begin{align}  f(\\pi | x) \\propto \\sum_{j = 1}^{k}  {w_j} \\frac {B(\\alpha_j + x, \\beta_j +n -x )}{B(\\alpha_j, \\beta_j)} f(\\pi | \\alpha_j + x, \\beta_j + n - x)  (\\#eq:simplifiedWeightedBayesone)   \\end{align} can identify shape density mixture distribution weights proportional wjw_j : f(œÄ|x)‚àù‚àëj=1kwjB(Œ±j+x,Œ≤j+n‚àíx)B(Œ±j,Œ≤j)(#eq:simplifiedWeightedBayestwo)\\begin{align} f(\\pi | x) \\propto \\sum_{j = 1}^{k} w_j \\frac {B(\\alpha_j + x, \\beta_j + n -x )}{B(\\alpha_j, \\beta_j)}  (\\#eq:simplifiedWeightedBayestwo)  \\end{align} normalizing constant thus: 1‚àëj=1kwjB(Œ±j+x,Œ≤j+n‚àíx)B(Œ±j,Œ≤j)(#eq:normalizingconstant)\\begin{align} \\frac {1}{\\sum_{j=1}^{k}w_j\\frac{B(\\alpha_j + x, \\beta_j + n - x)}{B(\\alpha_j, \\beta_j)}}  (\\#eq:normalizingconstant) \\end{align} updated weights given :wÃÉj=wjB(Œ±j+x,Œ≤j+n‚àíx)B(Œ±j,Œ≤j)‚àëjwjBeta(Œ±j+x,Œ≤j+n‚àíx)B(Œ±j,Œ≤j)(#eq:calcweights)\\begin{align} \\tilde{w}_j = w_j \\frac {\\frac {B(\\alpha_j + x, \\beta_j +n -x )}{B(\\alpha_j, \\beta_j)}} {\\sum_{j} w_j  \\frac {Beta(\\alpha_j + x, \\beta_j +n -x )}{B(\\alpha_j, \\beta_j)}} (\\#eq:calcweights) \\end{align}","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"betadiff","dir":"Articles","previous_headings":"Methods and Models","what":"Difference in beta random variables","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"One may wish know distribution difference response rates groups. Recall , previous assumptions, can characterize posterior distribution group response rate Beta distribution. Thus, Bayesian approach, can describe distribution difference response rates groups simply distribution difference two Beta random variables. , idea generalizes case Beta mixture prior, however, sake argument, focus simpler case. better understand underlying methodology implemented phase1b R-package, consider following probabilistic calculations. Let XX YY two independent random variables X‚àºBeta(ax,bx)X\\sim \\text{Beta}(a_x,b_x) Y‚àºBeta(ay,)Y\\sim \\text{Beta}(a_y,b_y). interest calculating distribution difference XX YY , order , can utilize transformation variables defining following random variables ZZ WW Z=Y‚àíXZ=Y-X W=XW=X. Recalling basic probability theory, determinant Jacobian matrix transformation follows: |J|=|det[dXdWdXdZdYdWdYdZ]|=|det[101‚àí1]|=|1√ó(‚àí1)‚àí0√ó1|=1,\\begin{align*} \\left\\vert J\\right\\vert = \\left |\\text{det}\\begin{bmatrix} \\frac{dX}{dW} & \\frac{dX}{dZ}\\\\  & \\\\ \\frac{dY}{dW} & \\frac{dY}{dZ} \\end{bmatrix}\\right | = \\left |\\text{det}\\begin{bmatrix} 1 & 0\\\\ 1 & -1 \\end{bmatrix}\\right | =  |1\\times(-1)-0\\times1|=1, \\end{align*} thus joint distribution ZZ WW following: p(z,w)=p(J1(z,w),J2(z,w))√ó|J|=p(w,w‚àíz)√ó1=p(w)p(w‚àíz)=Beta(w;a1,b1)√óBeta(w‚àíz;a2,b2)=(w)1‚àía1(1‚àíw)1‚àíb1Œ≤(a1,b1)√ó(w‚àíz)1‚àía2(1‚àí(w‚àíz))1‚àíb2Œ≤(a2,b2).\\begin{align} p(z,w) &=p(J_1(z,w),J_2(z,w))\\times|J|\\\\ &=p(w,w-z)\\times 1\\\\ &=p(w) p(w-z)\\\\ &=\\text{Beta}(w;a_1,b_1)\\times\\text{Beta}(w-z;a_2,b_2)\\\\ &=\\frac{(w)^{1-a_1}(1-w)^{1-b_1}}{\\beta(a_1,b_1)}\\times\\frac{(w-z)^{1-a_2}(1-(w-z))^{1-b_2}}{\\beta(a_2,b_2)}. \\end{align} Recalling interested distribution difference XX YY, .e., p(z), must marginalize ww order recover distribution. However, integration trivial, caution must used ensure proper integration correct domain p(z,w)p(z,w). ease understanding, Figure @ref(fig:betadiff) depicts domain joint distribution p(z,w)p(z,w) area split two triangles assist visually appropriate integral needed marginalize domain ww. shaded region show domain joint distribution ZZ WW. shade two triangular regions grey blue sake understanding bounds integration necessary marginalization ww joint distribution. Marginalizing joint distribution p(w,z)p(w,z) ww results following marginal distribution zz: p(z)=‚à´p(z,w)dw={‚à´0z+1p(z,w)dwif ‚àí1‚â§z‚â§0‚à´z1p(z,w)dwif ‚àí0<z‚â§10otherwise(#eq:betadiff) \\begin{align} p(z)=\\int p(z,w) dw = \\begin{cases} \\int_{0}^{z+1} p(z,w)dw \\,  &\\mbox{} -1 \\leq z \\leq 0 \\\\ \\\\ \\int_{z}^{1} p(z,w)dw \\,  &\\mbox{} \\phantom{-}0 < z \\leq 1 \\\\ \\\\ 0 \\,  &\\mbox{otherwise} \\end{cases} \\end{align} (\\#eq:betadiff)  Thus distribution difference two beta random variables can characterized @ref(eq:betadiff). However, integrals analytically tractable approximate using R‚Äôs built-integrate() function inside phase1b R-package function betadiff().","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"predprob","dir":"Articles","previous_headings":"Methods and Models","what":"Predictive Probabilities","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"Rather reconstruct argument predictive probability calculations completely, reader advised see book Berry et al. (2011) discussion topic. quote parts pages 142 ‚Äì 144 Berry et al. (2011) better understand methodology predictive probability implemented functions predprob, odPredprob etc.","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"introduction","dir":"Articles","previous_headings":"Methods and Models > Predictive Probabilities","what":"Introduction","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"distinct advantage predictive probability (PP) approach mimics clinical decision making process. Based interim data, PP obtained calculating probability positive conclusion (rejecting null hypothesis) trial conducted maximum planned sample size. framework, chance trial show conclusive result end study, given current information, evaluated. decision continue stop trial can made according strength predictive probability. follows, quote directly Berry et al. (2011) explain definition basic calculations binary data. Suppose goal evaluate response rate PEP_E new drug testing hypothesis H0:PE‚â§pH_0: P_E \\leq p versus HA:PE>pH_A: P_E > p. Suppose assume prior distribution response rate, œÄ(PE)\\pi(P_E), follows Beta(,b)\\text{Beta}(,b) distribution. quantity /(+b)/(+b) gives prior mean, magnitude +ba+b indicates informative prior . Since quantities aa bb can considered numbers effective prior responses non-responses, respectively, +ba+b can thought measure prior precision: larger sum, informative prior stronger belief contains. Suppose set maximum number accrued patients NmaxN_{\\max}, assume number responses xx among current nn patients (n‚â§Nmaxn\\leq N_{\\max}) follows Binom(n,PE)\\text{Binom}(n, P_E) distribution. conjugacy beta prior binomial likelihood, posterior distribution response rate follows another beta distribution, P|x‚àºBeta(+x,b+n‚àíx)P\\,\\vert\\,x \\sim \\text{Beta}(+ x, b+ n - x).predictive probability approach looks future based current observed data project whether positive conclusion end study likely , makes sensible decision present time accordingly. Let YY number responses potential m=Nmax‚àínm = N_{\\max}-n future patients. Suppose design declare efficacy posterior probability PEP_E exceeding prespecified level pp greater threshold Œ∏T\\theta_T . Marginalizing PEP_E binomial likelihood, well known YY follows beta-binomial distribution, Y‚àºBeta-Binomial(m,+x,b+n‚àíx)Y \\sim \\text{Beta-Binomial}(m, + x,b +n - x). Y=iY = , posterior distribution PE|(X=x,Y=)P_E\\,\\vert\\,(X = x, Y = ) Beta(+x+,b+Nmax‚àíx‚àí)\\text{Beta}(+x+, b+N_{\\max}-x-). predictive probability (PP) trial success can calculated follows. Letting Bi=‚Ñô(PE>p|x,Y=)B_i = \\mathbb{P}(P_E > p \\,\\vert\\,x, Y = ) indicator function Ii=(Bi>Œ∏T)I_i = (B_i > \\theta_T ), PP=ùîº([‚Ñô(PE>p|x,Y)>Œ∏T]|x)=‚à´[‚Ñô(PE>p|x,Y)>Œ∏T]dP(Y|x)=‚àë=0m‚Ñô(Y=|x)√ó[‚Ñô(PE>p|x,Y=)>Œ∏T]=‚àë=0m‚Ñô(Y=|x)√ó(Bi>Œ∏t)=‚àë=0m‚Ñô(Y=|x)√óIi\\begin{align*} PP &= \\mathbb{E}([\\mathbb{P}(P_E>p\\,\\vert\\,x,Y)>\\theta_T]\\,\\vert\\,x)\\\\ &=\\int [\\mathbb{P}(P_E>p\\,\\vert\\,x,Y)>\\theta_T]dP(Y\\,\\vert\\,x)\\\\ &=\\sum_{=0}^m\\mathbb{P}(Y=\\,\\vert\\,x)\\times [\\mathbb{P}(P_E>p\\,\\vert\\,x,Y=)>\\theta_T]\\\\ &=\\sum_{=0}^m\\mathbb{P}(Y=\\,\\vert\\,x)\\times (B_i>\\theta_t)\\\\ &=\\sum_{=0}^m \\mathbb{P}(Y=\\,\\vert\\,x)\\times I_i \\end{align*} quantity BiB_i probability response rate larger pp given xx responses nn patients current data ii responses mm future patients. Comparing BiB_i threshold value Œ∏T\\theta_T yields indicator IiI_i considering treatment efficacious end trial given current data potential outcome Y=iY = .","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"basic-pred-prob-design","dir":"Articles","previous_headings":"Methods and Models > Predictive Probabilities","what":"Basic predictive probability design","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"weighted sum indicators IiI_i yields predictive probability concluding positive result end trial based cumulative information current stage. high PP means treatment likely efficacious end study, given current data, whereas low PP suggests treatment may sufficient activity. Therefore, PP can used determine whether trial stopped early due efficacy/futility continued current data yet conclusive. define rule introducing two thresholds PP. decision rule can constructed follows: Algorithm (Basic PP design) Step 1: PP<œïLPP < \\phi_L, stop trial reject alternative hypothesis; Step 2: PP>œïUPP > \\phi_U, stop trial reject null hypothesis; Step 3: Otherwise continue next stage reaching NmaxN_{\\max} patients. Typically, choose œïL\\phi_L small positive number œïU\\phi_U large positive number, 0 1 (inclusive). Note œïL<œïU\\phi_L < \\phi_U hence order steps 1, 2 3 relevant. PP<œïLPP < \\phi_L indicates unlikely response rate larger pp end trial given current information. happens, may well stop trial reject alternative hypothesis point. hand, PP>œïUPP > \\phi_U, current data suggest , trend continues, high probability concluding treatment efficacious end study. result, , provides evidence stop trial early due efficacy. choosing œïL>0\\phi_L > 0 œïU<1\\phi_U < 1, trial can terminate early due either futility efficacy. trial reaches maximal number subjects, predictive probability PP=[‚Ñô(PE>p|x)>Œ∏T]PP=[\\mathbb{P}(P_E>p\\,\\vert\\,x)>\\theta_T ]. ‚Ñô(PE>p|x)\\mathbb{P}(P_E>p\\,\\vert\\,x) constant, PPPP equal either 0 1 hence always Go Go decision made final analysis, .e ‚Äúgray zone‚Äù exists.","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"advanced-predictive-probability-design","dir":"Articles","previous_headings":"Methods and Models > Predictive Probabilities","what":"Advanced predictive probability design","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"Since usually phase 1b trials, response rate endpoint surrogate early determination meaningful clinical benefits, ‚Äúgray zone‚Äù final analyses evaluations may desired practice. plan design, advanced predictive probability approach included latest version R-package. major difference previous approach , addition hypothesis Go decision, H0:PE‚â§pH_0: P_E \\leq p versus HA:PE>pH_A: P_E > p, separate hypothesis testing rule Go/futility decisions, H0:PE‚â•pFH_0: P_E \\geq p_F versus HA:PE<pFH_A: P_E < p_F utilized (Note pF<pp_F < p required). Hence, final analysis: - design declare efficacy posterior probability PE>pP_E > p greater threshold Œ∏T\\theta_T (event ) - design declare futility posterior probability PE<PFP_E < P_F greater threshold Œ∏F\\theta_{F} (event B) Œ∏T\\theta_T Œ∏F\\theta_{F} range 0 1. Thus decision rule interim final analyses can conducted mixture two basic PP designs: Algorithm (Advanced PP design). - Step 1: PP(event )>œïUPP(\\text{event })> \\phi_U, stop trial declare efficacy; - Step 2: PP(event B)>œïFPP(\\text{event B})> \\phi_F, stop trial declare futility; - Step 3: Otherwise continue next stage reaching NmaxN_{\\max} patients. Note œïU\\phi_U œïF\\phi_F typically probabilities 0.5. Hence PP(event )>œïUPP(\\text{event })>\\phi_U indicates likely treatment efficacious end study trend current data continues. PP(event B)>œïFPP(\\text{event B})>\\phi_F indicates high likelihood treatment declared inefficacious given current information. fact, predictive probability futility can written format predictive probability efficacy: PP=ùîº([‚Ñô(PE<pF|x,Y)>Œ∏F]|x)=ùîº([‚Ñô(PE‚â•pF|x,Y)<1‚àíŒ∏F]|x)=1‚àíùîº([‚Ñô(PE‚â•pF|x,Y)>1‚àíŒ∏F]|x)\\begin{align*} PP &= \\mathbb{E}([\\mathbb{P}(P_E<p_F\\,\\vert\\,x,Y)>\\theta_{F}]\\,\\vert\\,x)\\\\ &= \\mathbb{E}([\\mathbb{P}(P_E \\geq p_F\\,\\vert\\,x,Y)< 1 - \\theta_{F}]\\,\\vert\\,x)\\\\ &=1-\\mathbb{E}([\\mathbb{P}(P_E \\geq p_F\\,\\vert\\,x,Y)>1-\\theta_{F}]\\,\\vert\\,x) \\end{align*} Thus using trick, predprob() predprobDist() functions can used calculate predictive probabilities futility. separate section describes advanced predictive probability design.","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"examples","dir":"Articles","previous_headings":"","what":"Examples using phase1b","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"following subsections take reader series synthetic examples based specific Oncology indication. accompanying (highly modifiable) R code intended help familiarize user phase1b R-package, can course applied indication.","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"example-scenario","dir":"Articles","previous_headings":"Examples using phase1b","what":"Scenario for the example","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"Assume following hypothetical scenario. current standard care (SOC) cancer XYZ chemotherapy regimen known ABC. example, explore potential advantage phase 1b combination trial XYZ indication combining ABC new molecule, say D, compared current SOC. combination example considered, unmet need progression free survival (PFS) hazard ratio (HR) 0.64. control comes 150 patient subset previous study using ABC XYZ, Phase 1b endpoint PET-CR hypothesized meaningful improvement PET-CR may predict meaningful improvement PFS.","code":""},{"path":[]},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"posterior-probability-calculations","dir":"Articles","previous_headings":"Examples using phase1b > Posterior Probability Design","what":"Posterior Probability Calculations","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"Bayesian approach, quantify priori uncertainty PET-CR rates via prior distributions. sake example, use Beta(5.75,4.25)\\text{Beta}(5.75,4.25) prior describe uncertainty unknown PET-CR rate novel combo (ABC + D), however practice, prior chosen based historical data /eliciting expert knowledge opinion. Likewise, historical control (ABC), set prior distribution equal posterior distribution Beta(75,75)\\text{Beta(75,75)} distribution centered exactly observed PET-CR rate historical control. following lines code @ref(fig:ex1-prior) allow user able visualize prior uncertainty PET-CR rates historical control novel combination. prior distributions historical control novel combination treatment group. $ ext{Beta}(75,75)$ prior used historical control, $ ext{Beta}(5.75,4.25)$ prior used novel combination treatment group resulting Figure~@ref(fig:ex1-prior) see density prior historical control greatly concentrated area observed PET-CR rate prior PET-CR rate novel combination dispersed across many potential PET-CR rates indicating higher level apriori uncertainty. Now, using posterior distribution, can update uncertainty PET-CR rate novel combination via calculating posterior distribution. Recall prior distribution novel combination PET-CR rate Beta(5.75,4.25)\\text{Beta}(5.75,4.25), data likelihood, conditional PET-CR rate, follows binomial likelihood thus, due conjugacy, posterior distribution also follow Beta distribution updated parameters based observed data. example, running trial novel combination observe 55 responders total 80 patients, .e., PET-CR rate 68.75%, posterior updating based prior distribution observed data lead Beta(60.75,29.25)\\text{Beta}(60.75,29.25) posterior distribution novel combination PET-CR rate. Alternatively, use R-package function plotBeta() achieve result, see Figure~@ref(fig:ex1-prior_plotBeta1) Figure~@ref(fig:ex1-prior_plotBeta2). prior distributions historical control novel combination treatment group. $ ext{Beta}(75,75)$ prior used historical control, $ ext{Beta}(5.75,4.25)$ prior used novel combination treatment group. Novel combination, following posterior updated. prior distributions historical control novel combination treatment group. $ ext{Beta}(75,75)$ prior used historical control, $ ext{Beta}(5.75,4.25)$ prior used novel combination treatment group. following code allows reader visualize posterior distribution PET-CR rate posterior distribution historical control.  resulting Figure~@ref(fig:ex1-posterior) see posterior distribution much peaked prior distribution Figure~@ref(fig:ex1-prior) reflecting fact observed data, uncertainty true PET-CR rate novel combination diminish. posterior distribution obtained, user can use postprob() command make posterior probability calculations PET-CR rate either novel combination historical control. example, user calculate probability PET-CR rate greater 60%, .e., ‚Ñô(PE>0.6|x)\\mathbb{P}(P_E > 0.6 \\,\\vert\\,x), issuing following command: result indicates roughly 93% chance PET-CR rate novel combination 60%.","code":"xx <- seq(0, 1, .001) dens.control <- dbeta(xx, 75, 75) # Posterior of the control dens.prior <- dbeta(xx, 5.75, 4.25) # Prior of the Phase 1b trial plot(xx, dens.control,   type = \"l\", lwd = 2, col = \"darkgrey\", axes = FALSE,   xlab = \"PET-CR Rate\", ylab = \"Density\", ylim = c(0, 10),   main = \"Prior Distributions\" ) lines(xx, dens.prior, lwd = 2, col = \"deepskyblue\") axis(1, seq(0, 1, .25), c(\"0%\", \"25%\", \"50%\", \"75%\", \"100%\")) axis(2) box() legend(\"topright\", c(\"Hist. Control\", \"Novel Combo\"),   lwd = 2, lty = 1,   col = c(\"lightgrey\", \"deepskyblue\"), bty = \"n\" ) plotBeta(alpha = 75, beta = 75) plotBeta(alpha = 5.75, beta = 4.25) xx <- seq(0, 1, .001) dens.control <- dbeta(xx, 75, 75) dens.post <- dbeta(xx, 5.75 + 55, 4.25 + 80 - 55) # 80 is sample size of 1b trial and 55 is the number of responders  plot(xx, dens.control,   type = \"l\", lwd = 2, col = \"darkgrey\", axes = FALSE,   xlab = \"PET-CR Rate\", ylab = \"Density\", ylim = c(0, 10),   main = \"Posterior Distributions\" ) lines(xx, dens.post, lwd = 2, col = \"deepskyblue\") axis(1, seq(0, 1, .25), c(\"0%\", \"25%\", \"50%\", \"75%\", \"100%\")) axis(2) box() legend(\"topright\", c(\"Hist. Control\", \"Novel Combo\"),   lwd = 2, lty = 1,   col = c(\"darkgrey\", \"deepskyblue\"), bty = \"n\" ) postprob(x = 55, n = 80, p = 0.6, parE = c(5.75, 4.25)) #> [1] 0.9322701"},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"operating-characteristics","dir":"Articles","previous_headings":"Examples using phase1b > Posterior Probability Design","what":"Operating Characteristics","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"Similarly, user may interested calculating frequentist probability clinical trial stopped efficacy futility, conditional true values response rate. calculations need take account particular interim looks data reaching final sample size trial. Hence, calculations difficult perform closed manner. However, can resort Monte Carlo calculation, means simulate large number trials estimate high precision frequentist probabilities interest. key operating characteristics trial design. example, may interested conducting single arm Phase 1b trial interim analyses planned accrued 10, 20 30 patients (30 maximum number patients accrue). declare efficacy early, interim looks, posterior probability observed response rate, pEp_E, greater predefined efficacy threshold, p1=30%p_1 = 30\\%, exceeds upper probability threshold tU=80%t_U=80\\%, .e., ‚Ñô(pE>p1)>tU. \\mathbb{P}(p_E>p_1)>t_U. Likewise, declare futility early posterior probability observed response rate, pEp_E, less predefined efficacy threshold, p0=20%p_0=20\\%, smaller lower probability threshold tL=60%t_L=60\\%, .e., ‚Ñô(pE<p0)<tL. \\mathbb{P}(p_E<p_0)<t_L.  Following usual Bayesian framework, need specify prior distribution unknown response rate pEp_E place Beta(1,1)\\text{Beta}(1,1) prior unknown response rate pEp_E. Furthermore, may wish examine operating characteristics design scenario true response rate, pp, equal 40% ‚Äì scenario like declare efficacy. order calculate operating characteristics using 10,000 (parameter ns) simulated trials, issue following command: object results list, stores operating characteristics running simulations inside element oc. simulations expected number patients trial, stopping either efficacy futility, 19. Furthermore, 67% simulated trials stopped early interim analyses. 10,000 trials, 61.95% declared early efficacy 5.27% stopped early futility. However, combining trials stop early, 75.64% declared efficacy 5.4% declared futility. percentages sum 100% 10,000 simulated trials 18.62% declared efficacious futile time maximum sample size 30 patients reached ‚Äì .e., fell grayzone.","code":"set.seed(4) results <- ocPostprob(   nnE = c(10, 20, 30),   truep = 0.4,   p0 = 0.2,   p1 = 0.3,   tL = 0.6,   tU = 0.8,   parE = c(1, 1),   sim = 100,   wiggle = FALSE,   nnF = c(10, 20, 30) ) #> Warning in ocPostprob(nnE = c(10, 20, 30), truep = 0.4, p0 = 0.2, p1 = 0.3, : #> Advise to use sim >= 50000 to achieve convergence results$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      19.8        0.64       0.57       0.07       0.71       0.07       0.22"},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"difference-in-posterior-distributions","dir":"Articles","previous_headings":"Examples using phase1b > Posterior Probability Design","what":"Difference in Posterior Distributions","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"user may interested showing novel combination superior historical control comparing PET-CR rates. order make comparison, can make use dbetadiff() function compute distribution difference PET-CR rates novel combination historical control. relatively simple task , Bayesian point view, simply distribution difference posterior distributions, equivalent distribution difference two independent Beta random variables. interested user reminded read methods section detailed analytical calculations distribution. Returning previous example, recall placed Beta(5.75,4.25)\\text{Beta}(5.75,4.25) prior PET-CR rate novel combination, observed 55 responders 80 patients novel combination, well 75 responders 150 patients historical control. observed PET-CR rates led Beta(60.75,29.25)\\text{Beta}(60.75,29.25) Beta(75,75)\\text{Beta}(75,75) posterior distribution novel combination historical control PET-CR rates, respectively. Based learning endpoint, may believe seeing difference PET-CR rates greater threshold, say example 15%, may indicate meaningful improvement PFS novel combination historical control. Defining difference PET-CR rates Œî=(Combo Response)-(Control Response)\\Delta=\\text{(Combo Response)-(Control Response)}, may ultimately interested making probabilistic calculations ‚Ñô(Œî>15%)\\mathbb{P}(\\Delta>15\\%) ‚Ñô(Œî‚â§5%)\\mathbb{P}(\\Delta\\leq 5\\%) calculations may informative Go\" andNo Go‚Äù decisions. example, ‚Ñô(Œî>15%)\\mathbb{P}(\\Delta>15\\%) ‚Ñô(Œî‚â§5%)\\mathbb{P}(\\Delta\\leq 5\\%) ‚Äúlarge‚Äù may decide declare go go, respectively. Consider probability exceeding 60% large, following example , evaluate following go/go criteria based distribution difference PET-CR code @ref(fig:ex1:betadiff1).  Alternatively, use R-package function plotBetaDiff() achieve result far fewer lines code, see Figure~@ref(fig:ex1:betadiff1:plotBetadiff)). distribution difference PET-CR rates novel combination group historical control. , see probability go decision (green) much likely probability go decision (red). Figure @ref(fig:ex1:betadiff1) see probability go decision (shaded green) much larger probability go decision (shaded red). fact, can calculate exact probability values go/go decision following commands: ‚Äúlarge‚Äù threshold exceeding 60%, see declare go decision situation since probability Œî\\Delta exceeds 15% equal 66% larger 60% threshold. Alternatively, posterior probability can calculated using postprobDist() function, follows: function works similar way postprob explained . difference now beta prior distribution comparator response rate. hand, observed hypothetical situation number responders much lower, say 42 responders 80 patients, re-run analysis see impact go/go decisions. following code re-runs previous example much lower response rate 42/80=52.5%42/80=52.5\\%. distribution difference PET-CR rates amongst novel combination group historical control. , see probability go decision (green) much less likely probability go decision (red). Note now change response rate also affects posterior distribution PET-CR rate novel combination group. posterior distribution Beta(60.75,29.25)\\text{Beta}(60.75,29.25) distribution now, due low observed response rate, posterior distribution Beta(47.75,42.25)\\text{Beta}(47.75,42.25). Using new posterior distribution, obtain following distribution difference, Figure~@ref(fig:ex1:betadiff2), PET-CR rates two groups. see probability go decision much higher probability go decision due lower response rate novel combination group. , can execute following commands calculate exact probabilities: Thus, 61% chance novel combination results less 5% improvement PET-CR rates relative historical control, hence go decision declared.","code":"parX <- c(75, 75) parY <- c(5.75 + 55, 4.25 + 80 - 55) xx <- seq(-0.5, 0.75, 0.001) dens <- dbetadiff(xx, parY, parX)  x.poly <- c(rev(xx), xx) y.poly <- c(rep(0, length(xx)), dens)  idx1 <- which(x.poly < 0.05) idx2 <- which(x.poly > 0.15)  plot(xx, dens,   type = \"l\", main = \"PET-CR Comparison\",   xlab = \"(Combo Response) - (Control Response)\",   ylab = \"\", yaxs = \"i\", axes = FALSE ) axis(1, seq(-0.5, 0.75, .25), c(\"-50%\", \"-25%\", \"+0%\", \"+25%\", \"+50%\", \"+75%\")) polygon(x.poly[idx1], y.poly[idx1], col = \"red\") polygon(x.poly[idx2], y.poly[idx2], col = \"green\") box() legend(\"topright\", c(\"Prob. of No Go\", \"Prob. of Go\"),   pch = 15,   col = c(\"red\", \"green\"), bty = \"n\" )  arrows(.5, 2, .22, 1, lwd = 2) text(.5, 2.2, expression(\"Prob\" * (Delta > +15 * \"%\")))  arrows(-.25, 2, 0, .2, lwd = 2) text(-.25, 2.2, expression(\"Prob\" * (Delta < +5 * \"%\"))) plotBetaDiff(   parX = parX,   parY = parY,   go_cut = 0.3,   stop_cut = 0.15, # below a difference of 15%, is an unsuccessful trial   shade = TRUE,   note = TRUE ) pbetadiff(0.05, parY = c(5.75 + 55, 4.25 + 80 - 55), parX = c(75, 75)) #> [1] 0.02684542 1 - pbetadiff(0.15, parY = c(5.75 + 55, 4.25 + 80 - 55), parX = c(75, 75)) #> [1] 0.6558079 1 - postprobDist(x = 55, n = 80, delta = 0.05, parE = c(5.75, 4.25), parS = c(75, 75)) #> [1] 0.02684542 postprobDist(x = 55, n = 80, delta = 0.15, parE = c(5.75, 4.25), parS = c(75, 75)) #> [1] 0.6558079 parX <- c(75, 75) parY <- c(5.75 + 42, 4.25 + 80 - 42) xx <- seq(-0.5, 0.75, 0.001) dens <- dbetadiff(xx, parY, parX)  x.poly <- c(rev(xx), xx) y.poly <- c(rep(0, length(xx)), dens)  idx1 <- which(x.poly < 0.05) idx2 <- which(x.poly > 0.15)  plot(xx, dens,   type = \"l\", main = \"PET-CR Comparison\",   xlab = \"(Combo Response) - (Control Response)\",   ylab = \"\", yaxs = \"i\", axes = FALSE ) axis(1, seq(-0.5, 0.75, .25), c(\"-50%\", \"-25%\", \"+0%\", \"+25%\", \"+50%\", \"+75%\")) polygon(x.poly[idx1], y.poly[idx1], col = \"red\") polygon(x.poly[idx2], y.poly[idx2], col = \"green\") box() legend(\"topright\", c(\"Prob. of No Go\", \"Prob. of Go\"),   pch = 15,   col = c(\"red\", \"green\"), bty = \"n\" ) arrows(.45, 2, .2, .5, lwd = 2) text(.45, 2.2, expression(\"Prob\" * (Delta > +15 * \"%\")))  arrows(-.3, 2, -.03, .9, lwd = 2) text(-.3, 2.2, expression(\"Prob\" * (Delta < +5 * \"%\"))) 1 - postprobDist(x = 42, n = 80, delta = 0.05, parE = c(5.75, 4.25), parS = c(75, 75)) #> [1] 0.6142228 postprobDist(x = 42, n = 80, delta = 0.15, parE = c(5.75, 4.25), parS = c(75, 75)) #> [1] 0.03532739"},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"PredProb-design","dir":"Articles","previous_headings":"Examples using phase1b","what":"Predictive Probability Design","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"example aims illustrate usage predictive probabilities (PP) conduct interim analyses described basic PP design. single arm XYZ combo trial discussed previous section used section well. Besides, section also includes simulation study evaluate operating characteristics study design. Similar previous example, hypothesized 15% absolute increasement PET-CR may predict meaningful clinical benefit XYZ patients. Thus goal trial set evaluate PET-CR rate PcomboP_{combo} testing hyoithesis H0:Pcombo‚â§Pcontrol+15%H_0: P_{combo} \\leq P_{control}+15\\% versus HA:Pcombo>Pcontrol+15%H_A: P_{combo} > P_{control}+15\\%. Thus let‚Äôs determine , sample size reaches maximum, study declare efficacy posterior probability Pcombo>Pcontrol+15%P_{combo} > P_{control}+15\\% greater threshold Œ∏T=0.6\\theta_T=0.6. Otherwise, study declare futility. , assumed 2 interim analyses planed 25 40 patients along final analysis 80 patients evaluate efficacy futility. study stops interim Efficacy stop PP>œïUPP>\\phi_U Futility stop PP<œïLPP<\\phi_L set œïU=0.8\\phi_U=0.8 œïL=0.2\\phi_L=0.2 illustration. Please aware, ‚Äúgray zone‚Äù terms decision making final analysis using basic PP design (see details predictive probability section).","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"predictive-probability-calculation","dir":"Articles","previous_headings":"Examples using phase1b > Predictive Probability Design","what":"Predictive Probability Calculation","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"calculate predictive probability comparing two distributions (treatment vs.¬†SOC), predprobDist() function can used. order perform calulation, maximal number patient (80), Beta prior treatment arm (Beta(5.75,4.25)\\text{Beta}(5.75, 4.25)), Beta posterior distribution SOC arm (Beta(75,75)\\text{Beta}(75,75)) required. Since beta distribution conjugate prior binomial distribution (see formula 1-8), posterior distribution SOC can directly entered parS argument. instance, 18 PET-CR first interim analysis (n=25), predictive probabilities can calculated case, study continue since PP, 57.5%, neither exceed 80% fall 20%.","code":"predprobDist(   x = 18, n = 25, Nmax = 80,   delta = 0.15,   thetaT = 0.6,   parE = c(5.75, 4.25),   parS = c(75, 75) )[1] #> $result #> [1] 0.5755374"},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"operating-characteristics-evaluation","dir":"Articles","previous_headings":"Examples using phase1b > Predictive Probability Design","what":"Operating Characteristics Evaluation","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"Phase 1b trial starts, users may want evaluate design operating characteristics assumed true PET-CR rate combo trial. ocPredprobDist() function allow evaluation single scenario true response rate. following code assumes true PET-CR rate 75%. planned interim final looks 25, 40 80 patients entered vector nnE argument. truep true PET-CR rate assumed, targeting deltaE improvement control (deltaE deltaF ranges 0 1). tT threshold probability control + delta end trial, phiL phiU lower upper thresholds predictive probability, respectively. notations predprobDist() function, parE parS place enter beta parameters prior treatment control proportion, respectively. number simulation 10 case, just speed example. However, user needs increase number 50,000 higher generate better convergence. According simulation result, expected sample size trial 44.4. 87% simulated trials declare efficacy rest 13% trials declare futility. terms early stopping, 71% simulated trials stop interim. Among , 60%/71%=84.5%60\\%/71\\%=84.5\\% trials stop efficacy, 11%/71%=15.511\\%/71\\%=15.5 trials stop futility. Usually, one true scenario evaluated. Figure @ref(fig:ex2:summary) summerizes operating characteristics among different true PET-CR rate 10% 80%. Y axis percentage trials return efficacy/futility decision. true rate low comparing response rate control+delta, efficacy decision considered type error, true rate relatively high comparing control+delta, futility decision considered type II error. summary plot Go/Go decisions different true rates","code":"# with 100 simulated trials, assume true PET-CR rate of the combo trial is 40% set.seed(4) res1 <- ocPredprobDist(   nnE = c(25, 40, 80),   truep = 0.75,   deltaE = 0.15,   deltaF = 0.15,   relativeDelta = TRUE,   tT = 0.6,   phiL = 0.2,   phiU = 0.8,   parE = c(5.75, 4.25),   parS = c(75, 75),   weights = 1,   weightsS = 1,   sim = 5, # advise to use > 50000 to achieve convergence   nnF = c(25, 40, 80),   wiggle = TRUE,   decision1 = TRUE ) #> Warning in ocPredprobDist(nnE = c(25, 40, 80), truep = 0.75, deltaE = 0.15, : #> Advise to use sim >= 50000 to achieve convergence  res1$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1        64         0.4        0.4          0          1          0          0 set.seed(4) # Used for reproducibility p_par <- seq(0.1, 0.9, by = 0.1)  Mysim <- sapply(p_par, function(x) {   res <- ocPredprobDist(     nnE = c(25, 40, 80),     truep = x,     delta = 0.15,     deltaF = 0.15,     relativeDelta = TRUE,     tT = 0.6,     phiL = 0.8,     phiU = 0.2,     parE = c(5.75, 4.25),     parS = c(75, 75),     weights = 1,     weightsS = 1,     sim = 10, # advise to use > 50000 to achieve convergence     nnF = c(25, 40, 80),     wiggle = TRUE,     decision1 = TRUE   )   return(res$oc) }) #> Warning in ocPredprobDist(nnE = c(25, 40, 80), truep = x, delta = 0.15, : #> Advise to use sim >= 50000 to achieve convergence #> Warning in ocPredprobDist(nnE = c(25, 40, 80), truep = x, delta = 0.15, : #> Advise to use sim >= 50000 to achieve convergence #> Warning in ocPredprobDist(nnE = c(25, 40, 80), truep = x, delta = 0.15, : #> Advise to use sim >= 50000 to achieve convergence #> Warning in ocPredprobDist(nnE = c(25, 40, 80), truep = x, delta = 0.15, : #> Advise to use sim >= 50000 to achieve convergence #> Warning in ocPredprobDist(nnE = c(25, 40, 80), truep = x, delta = 0.15, : #> Advise to use sim >= 50000 to achieve convergence #> Warning in ocPredprobDist(nnE = c(25, 40, 80), truep = x, delta = 0.15, : #> Advise to use sim >= 50000 to achieve convergence #> Warning in ocPredprobDist(nnE = c(25, 40, 80), truep = x, delta = 0.15, : #> Advise to use sim >= 50000 to achieve convergence #> Warning in ocPredprobDist(nnE = c(25, 40, 80), truep = x, delta = 0.15, : #> Advise to use sim >= 50000 to achieve convergence #> Warning in ocPredprobDist(nnE = c(25, 40, 80), truep = x, delta = 0.15, : #> Advise to use sim >= 50000 to achieve convergence  peffbp <- Mysim[5, ] pfutbp <- Mysim[6, ]  par(mar = c(5, 4, 1, 1) + .1) plot(c(0, 1), c(0, 1), type = \"n\", xlab = \"True Rate\", ylab = \"Pr(Decision)\") grid() lines(p_par, peffbp, lwd = 5, col = \"green\") lines(p_par, pfutbp, lwd = 5, col = \"red\")  legend(.1, .6,   lwd = 5, col = c(\"green\", \"red\"), cex = .75,   c(\"Efficacy Decision\", \"Futility Decision\") )"},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"PredProb-advanced","dir":"Articles","previous_headings":"Examples using phase1b","what":"Advanced predictive probability design","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"extension basic example, example shows way use predictive probabilities (PP) conduct interim analyses allowing gray zones final analyses, .e.¬†trial results neither efficacy futility decisions made possible (refering advance PP design predictive probability section). final analysis design used XYZ example, basic PP design used example earlier suitable related interim analyses, advanced predictive probability design used. advantage design allows option evaluation additional clinical endpoints PD markers decision falls ‚Äúgray zone‚Äù. Moreover, separate delta can specified futility decision represent ‚Äúpool clinical improvement‚Äù, makes flexible decision rule. single arm XYZ combo trial discussed previous examples used well. simulation study evaluate operating characteristics study design carried . Similar first example, goal evaluate PET-CR rate PcomboP_{combo} testing hypothesis H0:Pcombo‚â§Pcontrol+15%H_0: P_{combo} \\leq P_{control}+15\\% versus HA:Pcombo>Pcontrol+15%H_A: P_{combo} > P_{control}+15\\% efficacy. futility checks conducted testing hypothesis H0:Pcombo‚â•Pcontrol+5%H_0: P_{combo} \\geq P_{control}+5\\% versus HA:Pcombo<Pcontrol+5%H_A: P_{combo} < P_{control}+5\\%. , assume 2 interim analyses planed 25 40 patients along final analysis evaluate efficacy futility. Thus final analysis: design declare efficacy posterior probability Pcombo>Pcontrol+15%P_{combo} > P_{control}+15\\% greater threshold Œ∏U=0.6\\theta_{U}=0.6 (event ) design declare futility posterior probability Pcombo<Pcontrol+5%P_{combo} < P_{control}+5\\% greater threshold Œ∏F=0.6\\theta_{F}=0.6 (event B) Œ∏U\\theta_{U} Œ∏F\\theta_{F} thresholds set posterior probabilities final analysis. 60% assumed parameters. addition, assume study stops interim Efficacy stop PP(event )>œïUPP(\\text{event })>\\phi_U Futility stop PP(event B)>œïFPP(\\text{event B})>\\phi_F œïU=œïF=0.8\\phi_U=\\phi_F=0.8 illustration. œïF\\phi_F œïU\\phi_U independent thresholds can set unequal values depending need users.","code":""},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"predictive-probability-calculation-1","dir":"Articles","previous_headings":"Examples using phase1b > Advanced predictive probability design","what":"Predictive Probability Calculation","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"following code shows utilize predprobDist() function calculate PPs, 18 PET-CR first interim analysis: According result, study continue since neither PP(event ), 57.6%, PP(event B), 1.4% exceed œïU=œïF=80%\\phi_U=\\phi_F=80\\%.","code":"# PP(event A) result1 <- predprobDist(   x = 18, n = 25, Nmax = 80,   delta = 0.15,   thetaT = 0.6,   parE = c(5.75, 4.25),   parS = c(75, 75) )$result   ## PP(event B) result2 <- 1 - predprobDist(   x = 18, n = 25, Nmax = 80,   delta = 0.05,   thetaT = 1 - 0.6,   parE = c(5.75, 4.25),   parS = c(75, 75) )$result"},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"operating-characteristics-evaluation-1","dir":"Articles","previous_headings":"Examples using phase1b > Advanced predictive probability design","what":"Operating Characteristics Evaluation","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"evaluate design operating characteristics assumed true PET-CR rate combo trial, ocPredprobDist() function can used advanced PP design well. , additional arguments, deltaFu, tFu phiFu need specified. Also, phiL argument skipped. evaluate scenario true response rate 75%75\\%, following code can used: number simulation 10 reduce computational time code. However, user must increase number 10,000 higher generate correct result. Comparing example earlier, gray zone final analysis. According simulation result, 6% simulated trials declared neither efficacy futility final analysis (.e.¬†‚Äúgray zone‚Äù). expected sample size, 50, tends higher one example earlier. 94% simulated trials declare efficacy, 60%/94%=63.8%60\\%/94\\%=63.8\\% stop interim. Besides, none simulated trial stop futility. Similar simulation analyses can conducted different assumed true PET-CR rates 75%, complete picture operating characteristics.","code":"# with 100 simulated trials, assume true PET-CR rate of the combo trial is 40% set.seed(4) # Used for reproducibility res1 <- ocPredprobDist(   nn = c(25, 40, 80),   truep = 0.75,   deltaE = 0.15,   deltaF = 0.05,   tT = 0.6,   tF = 0.6,   phiU = 0.8,   phiFu = 0.8,   parE = c(5.75, 4.25),   parS = c(75, 75),   weights = 1,   weightsS = 1,   sim = 50,   nnF = c(25, 40, 80),   wiggle = TRUE,   decision1 = FALSE ) #> Warning in ocPredprobDist(nn = c(25, 40, 80), truep = 0.75, deltaE = 0.15, : #> Advise to use sim >= 50000 to achieve convergence res1$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      70.3        0.22          0       0.22        0.7       0.22       0.08"},{"path":"https://genentech.github.io/phase1b/articles/introduction.html","id":"acknowledge","dir":"Articles","previous_headings":"","what":"Acknowledgments","title":"`phase1b`: Tools for Decision Making in Phase 1b Studies","text":"authors like thank everyone contributed phase1b R-package, particularly James Lymp implemented first functions earlier version R-package.","code":""},{"path":[]},{"path":"https://genentech.github.io/phase1b/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Daniel Sabanes Bove. Author, maintainer. Markus Elze. Author. Tony Pourmohamad. Author. Jiawen Zhu. Author. James Lymp. Author. Anastasia Teterina. Author. Audrey Yeo. Author. F. Hoffmann-La Roche Ltd. Copyright holder, funder.","code":""},{"path":"https://genentech.github.io/phase1b/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Sabanes Bove D, Elze M, Pourmohamad T, Zhu J, Lymp J, Teterina , Yeo (2025). phase1b: Calculations decisions Phase 1b clinical trials. R package version 1.0.0, https://github.com/genentech/phase1b/.","code":"@Manual{,   title = {phase1b: Calculations for decisions on Phase 1b clinical trials},   author = {Daniel {Sabanes Bove} and Markus Elze and Tony Pourmohamad and Jiawen Zhu and James Lymp and Anastasia Teterina and Audrey Yeo},   year = {2025},   note = {R package version 1.0.0},   url = {https://github.com/genentech/phase1b/}, }"},{"path":"https://genentech.github.io/phase1b/index.html","id":"phase1b","dir":"","previous_headings":"","what":"Calculations for decisions on Phase 1b clinical trials","title":"Calculations for decisions on Phase 1b clinical trials","text":"phase1b package implements Bayesian approach decision making early development clinical trials. background, main purpose early trials determine whether novel treatment demonstrates sufficient safety efficacy signals warrant investment (Lee & Liu, 2008). new R package phase1b flexible toolkit calculates many properties end, especially oncology therapeutic area. primary focus package binary endpoints. benefit Bayesian approach possibility account prior data (Thall & Simon, 1994) new drug may shown signals efficacy owing proposed mode action, similar activity based prior data. concept phase1b package evaluate posterior probability response rate novel drug better current standard care treatment early phase trials Phase . phase1b package provides facility early development study teams decide development drug either designing phase 2 3, expansion cohorts. prior distribution can incorporate previous data via mixtures beta distributions. Furthermore, based assumed true response rate novel drug administered wider population, package calculates frequentist probability current clinical trial stopped efficacy futility conditional true values response, otherwise known operating characteristics. intended user early clinical trial statistician design interim stage study offers flexible approach setting priors weighting.","code":""},{"path":[]},{"path":"https://genentech.github.io/phase1b/index.html","id":"development","dir":"","previous_headings":"Installation","what":"Development","title":"Calculations for decisions on Phase 1b clinical trials","text":"can install development version phase1b GitHub :","code":"devtools::install_github(\"https://github.com/Genentech/phase1b/\", force = TRUE) library(phase1b)"},{"path":"https://genentech.github.io/phase1b/index.html","id":"getting-started","dir":"","previous_headings":"","what":"Getting Started","title":"Calculations for decisions on Phase 1b clinical trials","text":"introductory vignette currently prepared. Use help function console access documentation.","code":""},{"path":"https://genentech.github.io/phase1b/index.html","id":"citing-phase1b","dir":"","previous_headings":"","what":"Citing phase1b","title":"Calculations for decisions on Phase 1b clinical trials","text":"cite phase1b please see .","code":""},{"path":"https://genentech.github.io/phase1b/reference/ASLdata.html","id":null,"dir":"Reference","previous_headings":"","what":"An example dataset formatted as subject level VAD ‚Äî ASLdata","title":"An example dataset formatted as subject level VAD ‚Äî ASLdata","text":"example dataset formatted subject level VAD","code":""},{"path":"https://genentech.github.io/phase1b/reference/ASLdata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"An example dataset formatted as subject level VAD ‚Äî ASLdata","text":"","code":"ASLdata"},{"path":"https://genentech.github.io/phase1b/reference/ASLdata.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"An example dataset formatted as subject level VAD ‚Äî ASLdata","text":"data frame 80 obs.  4 variables: SUBJID  SEX  AGE  ARM","code":""},{"path":"https://genentech.github.io/phase1b/reference/ATEdata.html","id":null,"dir":"Reference","previous_headings":"","what":"An example dataset formatted as time to event efficacy VAD ‚Äî ATEdata","title":"An example dataset formatted as time to event efficacy VAD ‚Äî ATEdata","text":"example dataset formatted time event efficacy VAD","code":""},{"path":"https://genentech.github.io/phase1b/reference/ATEdata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"An example dataset formatted as time to event efficacy VAD ‚Äî ATEdata","text":"","code":"ATEdata"},{"path":"https://genentech.github.io/phase1b/reference/ATEdata.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"An example dataset formatted as time to event efficacy VAD ‚Äî ATEdata","text":"data frame 80 obs.  4 variables:","code":""},{"path":"https://genentech.github.io/phase1b/reference/Phase1b-package.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculations for decisions on Phase 1b clinical trials ‚Äî Phase1b-package","title":"Calculations for decisions on Phase 1b clinical trials ‚Äî Phase1b-package","text":"Phase 1b tools","code":""},{"path":[]},{"path":"https://genentech.github.io/phase1b/reference/Phase1b-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Calculations for decisions on Phase 1b clinical trials ‚Äî Phase1b-package","text":"Maintainer: Daniel Sabanes Bove daniel@rconis.com Authors: Markus Elze markus.elze@roche.com Tony Pourmohamad pourmoht@gene.com Jiawen Zhu zhu.jiawen@gene.com James Lymp Anastasia Teterina anastasia.teterina@roche.com Audrey Yeo audrey.yeo@roche.com contributors: F. Hoffmann-La Roche Ltd [copyright holder, funder]","code":""},{"path":"https://genentech.github.io/phase1b/reference/TTEdata.html","id":null,"dir":"Reference","previous_headings":"","what":"Example of time to event dataset ‚Äî TTEdata","title":"Example of time to event dataset ‚Äî TTEdata","text":"example dataset containing oncology time event endpoints formatted time event analysis functions package","code":""},{"path":"https://genentech.github.io/phase1b/reference/TTEdata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example of time to event dataset ‚Äî TTEdata","text":"","code":"TTEdata"},{"path":"https://genentech.github.io/phase1b/reference/TTEdata.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example of time to event dataset ‚Äî TTEdata","text":"data frame 80 obs.  12 variables: ID Patient number formatted USUBJID treatment Factor w/ 2 levels: \"Control\" \"Experimental\" PFStime progression free surivival, days PFSevent censoring indicator PFS DoR duration response responder responder status, used censoring variable DoR TtR time response TtRevent censoring indicator TtR OStime survival time, days OSevent death indicator SEX covariate AGE covariate","code":""},{"path":"https://genentech.github.io/phase1b/reference/boundsPostprob.html","id":null,"dir":"Reference","previous_headings":"","what":"Decision cutpoints for boundary (based on posterior probability) ‚Äî boundsPostprob","title":"Decision cutpoints for boundary (based on posterior probability) ‚Äî boundsPostprob","text":"function used identify efficacy futility boundaries based following rules: Efficacy boundary: find minimum x (xU) Pr(RR > p1 | x, n, , b) >= tU Futility boundary: find maximum x (xL) Pr(RR < p0 | x, n, , b) >= tL","code":""},{"path":"https://genentech.github.io/phase1b/reference/boundsPostprob.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Decision cutpoints for boundary (based on posterior probability) ‚Äî boundsPostprob","text":"","code":"boundsPostprob(looks, p0, p1 = p0, tL, tU, parE = c(1, 1), weights)"},{"path":"https://genentech.github.io/phase1b/reference/boundsPostprob.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Decision cutpoints for boundary (based on posterior probability) ‚Äî boundsPostprob","text":"looks (numeric): vector number patients look. p0 (number): lower Futility threshold response rate. p1 (number): upper Efficacy threshold response rate. tL (number): posterior probability threshold p0. tU (number): posterior probability threshold p1. parE (matrix): beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. weights (vector): mixture weights beta mixture prior.","code":""},{"path":"https://genentech.github.io/phase1b/reference/boundsPostprob.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Decision cutpoints for boundary (based on posterior probability) ‚Äî boundsPostprob","text":"matrix size looks. sample size, following returned: xL : maximum number responses meet futility threshold. pL : response rate corresponding xL. postL: posterior probability corresponding xL, .e. Pr(RR < p0 | xL, n, , b). pL_upper_ci : upper bound one sided 95% CI response rate pL based exact binomial test. xU : minimal number responses meet efficacy threshold. pU : response rate corresponding xU. postU : posterior probability corresponding xU, .e. Pr(RR > p1 |xU, n, , b). pU_lower_ci : lower bound one sided 95% CI response rate pU based exact binomial test.","code":""},{"path":"https://genentech.github.io/phase1b/reference/boundsPostprob.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Decision cutpoints for boundary (based on posterior probability) ‚Äî boundsPostprob","text":"","code":"# 40 pts trial with interim looks after each 10 pts., # Efficacy decision if more than 80% probability to be above 20% ORR, # Futility decision if more than 60% probability to be below 15% ORR, # with uniform prior (i.e. beta(1, 1)) on the ORR: boundsPostprob(   looks = c(10, 20, 30, 40),   p0 = 0.15,   p1 = 0.20,   tL = 0.60,   tU = 0.80,   parE = c(1, 1) ) #>    looks xL  pL  postL pL_upper_ci xU     pU  postU pU_lower_ci #> 10    10  0 0.0 0.8327      0.2589  3 0.3000 0.8389      0.0873 #> 20    20  2 0.1 0.6295      0.2826  6 0.3000 0.8915      0.1396 #> 30    30  3 0.1 0.7039      0.2386  8 0.2667 0.8492      0.1402 #> 40    40  4 0.1 0.7567      0.2144 10 0.2500 0.8177      0.1424  # 40 pts trial with interim looks at 7 and 20 pts. # Efficacy decision if more than 80% probability to be above 20% ORR, # Futility decision if more than 60% probability to be below 15% ORR, # with mixed prior and weights: boundsPostprob(   looks = c(7, 20, 40),   p0 = 0.15,   p1 = 0.20,   tL = 0.60,   tU = 0.80,   parE = rbind(c(1, 19), c(2, 10)),   weights = c(0.2, 0.8) ) #>    looks xL    pL  postL pL_upper_ci xU     pU  postU pU_lower_ci #> 7      7  0 0.000 0.7456      0.3482  2 0.2857 0.8890      0.0534 #> 20    20  2 0.100 0.6601      0.2826  6 0.3000 0.9054      0.1396 #> 40    40  5 0.125 0.6173      0.2450 10 0.2500 0.8012      0.1424"},{"path":"https://genentech.github.io/phase1b/reference/boundsPredprob.html","id":null,"dir":"Reference","previous_headings":"","what":"Decision cutpoints for boundary (based on predictive probability) for Decision 1 rule. ‚Äî boundsPredprob","title":"Decision cutpoints for boundary (based on predictive probability) for Decision 1 rule. ‚Äî boundsPredprob","text":"function used identify efficacy boundary futility boundary based rules @details.","code":""},{"path":"https://genentech.github.io/phase1b/reference/boundsPredprob.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Decision cutpoints for boundary (based on predictive probability) for Decision 1 rule. ‚Äî boundsPredprob","text":"","code":"boundsPredprob(   looks,   Nmax = max(looks),   p0,   tT,   phiL,   phiU,   parE = c(1, 1),   weights )"},{"path":"https://genentech.github.io/phase1b/reference/boundsPredprob.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Decision cutpoints for boundary (based on predictive probability) for Decision 1 rule. ‚Äî boundsPredprob","text":"looks (numeric): vector number patients look. Nmax (number): maximum number patients end trial E group. p0 (number): lower Futility threshold response rate. tT (number): threshold assumed truep exceeds acceptable threshold p0. phiL (number): lower threshold predictive probability. phiU (number): upper threshold predictive probability. parE (numeric): beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. weights (numeric): mixture weights beta mixture prior.","code":""},{"path":"https://genentech.github.io/phase1b/reference/boundsPredprob.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Decision cutpoints for boundary (based on predictive probability) for Decision 1 rule. ‚Äî boundsPredprob","text":"matrix size looks. sample size, following returned: xL : maximum number responses meet futility threshold. pL : response rate corresponding xL. predL : predictive probability corresponding xL postL: posterior probability corresponding xL. pL_upper_ci : upper bound one sided 95% CI response rate based exact binomial test. xU : minimal number responses meet efficacy threshold. pU : response rate corresponding xU. predU : predictive probability corresponding xU. postU: posterior probability corresponding xU. pU_lower_ci : lower bound one sided 95% CI response rate based exact binomial test.","code":""},{"path":"https://genentech.github.io/phase1b/reference/boundsPredprob.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Decision cutpoints for boundary (based on predictive probability) for Decision 1 rule. ‚Äî boundsPredprob","text":"see also predprob() following rules Decision 1 rules: Efficacy boundary: find minimum x (xU) Pr(Pr(RR > p0 | data) >= tT | x) >= phiU, Futility boundary: find maximum x (xL) Pr(Pr(RR > p0 | data) >= tT | x) =< phiL","code":""},{"path":"https://genentech.github.io/phase1b/reference/boundsPredprob.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Decision cutpoints for boundary (based on predictive probability) for Decision 1 rule. ‚Äî boundsPredprob","text":"","code":"# 40 pts trial with interim looks after each 10 patients. # Final efficacy decision if more than 80% probability to be above 20% ORR, # Final futility decision otherwise. # Interim efficacy decision if more than 90% predictive probability reach this or # Efficacy look Pr(Pr(RR > p0 | x, Y) >= tT | x) >= phiU, # Interim futility decision if less than 10% predictive probability or # Futility look Pr(Pr(RR > p0 | x, Y) >= tT | x) =< phiL # Uniform prior (i.e. beta(1, 1)) on the ORR: boundsPredprob(   looks = c(10, 20, 30, 40),   p0 = 0.20,   tT = 0.80,   phiL = 0.60,   phiU = 0.90 ) #>    looks xL     pL  predL  postL pL_upper_ci xU   pU  predU  postU pU_lower_ci #> 10    10  2 0.2000 0.4543 0.6174      0.5069  4 0.40 0.9287 0.9496      0.1500 #> 20    20  4 0.2000 0.3258 0.5860      0.4010  7 0.35 0.9600 0.9569      0.1773 #> 30    30  7 0.2333 0.4640 0.7300      0.3939  9 0.30 0.9604 0.9254      0.1663 #> 40    40  9 0.2250 0.0000 0.7040      0.3598 10 0.25 1.0000 0.8177      0.1424  # 25 pts trial with interim looks at 7 and 15 pts. # Efficacy decision if more than 80% probability to be above 20% ORR, # Final futility decision otherwise. # Interim efficacy decision if more than 90% predictive probability reach this or # Efficacy look Pr(Pr(RR > p0 | x, Y) >= tT | x) >= phiU, # Interim futility decision if less than 60% predictive probability or # Futility look Pr(Pr(RR > p0 | x, Y) >= tT | x) =< phi # with mixed prior and weights: boundsPredprob(   looks = c(7, 15, 25),   p0 = 0.20,   tT = 0.80,   phiL = 0.60,   phiU = 0.90,   parE = cbind(c(1, 1), c(3, 10)),   weights = c(0.2, 0.8) ) #>    looks xL     pL  predL  postL pL_upper_ci xU     pU  predU  postU #> 7      7  3 0.4286 0.5342 0.7006      0.7747  5 0.7143 0.9732 0.9753 #> 15    15  5 0.3333 0.4961 0.7211      0.5774  7 0.4667 0.9748 0.9512 #> 25    25  7 0.2800 0.0000 0.6786      0.4622  8 0.3200 1.0000 0.8166 #>    pU_lower_ci #> 7       0.3413 #> 15      0.2437 #> 25      0.1703"},{"path":"https://genentech.github.io/phase1b/reference/dbetaMix.html","id":null,"dir":"Reference","previous_headings":"","what":"Beta-Mixture density function ‚Äî dbetaMix","title":"Beta-Mixture density function ‚Äî dbetaMix","text":"beta-mixture distribution defined K beta parameters corresponding weights.","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetaMix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Beta-Mixture density function ‚Äî dbetaMix","text":"","code":"dbetaMix(x, par, weights, log = FALSE)"},{"path":"https://genentech.github.io/phase1b/reference/dbetaMix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Beta-Mixture density function ‚Äî dbetaMix","text":"x (numeric): number successes. par (matrix): beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. weights (numeric): mixture weights beta mixture prior length K. element corresponds row beta parameters par. log (flag): whether log values beta-mixture density function returned.","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetaMix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Beta-Mixture density function ‚Äî dbetaMix","text":"(log) density values","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetaMix.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Beta-Mixture density function ‚Äî dbetaMix","text":"function calculates beta-mixture density values.","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetaMix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Beta-Mixture density function ‚Äî dbetaMix","text":"","code":"# Calculating the density of a mixture. dbetaMix(x = 0.3, par = rbind(c(0.2, 0.4)), weights = 1) #> [1] 0.4745802  # With 2 mixture components dbetaMix(   x = 0.3, par = rbind(c(0.2, 0.4), c(1, 1)),   weights = c(0.6, 0.4) ) #> [1] 0.6847481  # Can also specify x as a vector dbetaMix(   x = seq(0, 1, .01),   par = rbind(c(0.2, 0.4), c(1, 1)),   weights = c(0.6, 0.4) ) #>   [1]       Inf 3.9142739 2.4307529 1.8772591 1.5808806 1.3940462 1.2646075 #>   [8] 1.1692164 1.0957802 1.0373792 0.9897544 0.9501341 0.9166330 0.8879221 #>  [15] 0.8630365 0.8412578 0.8220396 0.8049587 0.7896821 0.7759437 0.7635287 #>  [22] 0.7522614 0.7419966 0.7326136 0.7240109 0.7161025 0.7088154 0.7020870 #>  [29] 0.6958631 0.6900971 0.6847481 0.6797808 0.6751639 0.6708699 0.6668746 #>  [36] 0.6631566 0.6596969 0.6564785 0.6534865 0.6507074 0.6481293 0.6457415 #>  [43] 0.6435345 0.6415000 0.6396303 0.6379190 0.6363601 0.6349486 0.6336801 #>  [50] 0.6325508 0.6315574 0.6306975 0.6299690 0.6293704 0.6289006 0.6285594 #>  [57] 0.6283467 0.6282631 0.6283099 0.6284887 0.6288020 0.6292525 0.6298440 #>  [64] 0.6305809 0.6314682 0.6325119 0.6337191 0.6350978 0.6366571 0.6384078 #>  [71] 0.6403619 0.6425332 0.6449379 0.6475940 0.6505229 0.6537486 0.6572996 #>  [78] 0.6612086 0.6655140 0.6702611 0.6755033 0.6813044 0.6877413 0.6949069 #>  [85] 0.7029154 0.7119082 0.7220632 0.7336071 0.7468341 0.7621338 0.7800342 #>  [92] 0.8012713 0.8269062 0.8585340 0.8986820 0.9516401 1.0254085 1.1371003 #>  [99] 1.3324335 1.8018727       Inf"},{"path":"https://genentech.github.io/phase1b/reference/dbetabinom.html","id":null,"dir":"Reference","previous_headings":"","what":"Beta-Binomial Density Function ‚Äî dbetabinom","title":"Beta-Binomial Density Function ‚Äî dbetabinom","text":"Calculates density function beta-binomial distribution. beta-binomial density function following form: p(x) = (m! / (x!*(m-x)!)) * Beta(x+,m-x+b) / Beta(,b)","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetabinom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Beta-Binomial Density Function ‚Äî dbetabinom","text":"","code":"dbetabinom(x, m, a, b, log = FALSE)"},{"path":"https://genentech.github.io/phase1b/reference/dbetabinom.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Beta-Binomial Density Function ‚Äî dbetabinom","text":"x (numeric): number successes. m (number): number trials. (numeric): first parameter beta distribution. b (numeric): second parameter beta distribution. log (flag): whether return log density value (default).","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetabinom.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Beta-Binomial Density Function ‚Äî dbetabinom","text":"density values beta-binomial distribution x.","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetabinom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Beta-Binomial Density Function ‚Äî dbetabinom","text":"","code":"# dbetabinom -- dbetabinom(x = 2, m = 29, a = 0.2, b = 0.4, log = FALSE) #> [1] 0.04286893  # Can also specify x as a vector. dbetabinom(x = 1:28, m = 29, a = 0.2, b = 0.4, log = FALSE) #>  [1] 0.06991718 0.04286893 0.03215170 0.02632895 0.02266016 0.02014236 #>  [7] 0.01831825 0.01694866 0.01589629 0.01507689 0.01443628 0.01393847 #> [13] 0.01355928 0.01328256 0.01309808 0.01300034 0.01298800 0.01306396 #> [19] 0.01323585 0.01351746 0.01393126 0.01451316 0.01532164 0.01645657 #> [25] 0.01810223 0.02064146 0.02503732 0.03474567"},{"path":"https://genentech.github.io/phase1b/reference/dbetabinomMix.html","id":null,"dir":"Reference","previous_headings":"","what":"Beta-Mixture-Binomial Density Function ‚Äî dbetabinomMix","title":"Beta-Mixture-Binomial Density Function ‚Äî dbetabinomMix","text":"Calculates density function mixture beta-binomial distributions.","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetabinomMix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Beta-Mixture-Binomial Density Function ‚Äî dbetabinomMix","text":"","code":"dbetabinomMix(x, m, par, weights, log = FALSE)"},{"path":"https://genentech.github.io/phase1b/reference/dbetabinomMix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Beta-Mixture-Binomial Density Function ‚Äî dbetabinomMix","text":"x (numeric): number successes. m (number): number trials. par (matrix): beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. weights (numeric): mixture weights beta mixture prior length K. element corresponds row beta parameters par. log (flag): whether return log density value (default).","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetabinomMix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Beta-Mixture-Binomial Density Function ‚Äî dbetabinomMix","text":"(log) density values mixture beta-binomial distributions x.","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetabinomMix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Beta-Mixture-Binomial Density Function ‚Äî dbetabinomMix","text":"","code":"dbetabinomMix(x = 2, m = 29, par = rbind(c(0.2, 0.4)), weights = 1) #> [1] 0.04286893  dbetabinomMix(   x = 2, m = 29, par = rbind(c(0.2, 0.4), c(1, 1)),   weights = c(0.6, 0.4) ) #> [1] 0.03905469 # x could be a vector dbetabinomMix(   x = 1:28, m = 29, par = rbind(c(0.2, 0.4), c(1, 1)),   weights = c(0.6, 0.4) ) #>  [1] 0.05528364 0.03905469 0.03262435 0.02913070 0.02692943 0.02541875 #>  [7] 0.02432428 0.02350253 0.02287111 0.02237947 0.02199510 0.02169642 #> [13] 0.02146890 0.02130287 0.02119218 0.02113354 0.02112613 0.02117171 #> [19] 0.02127484 0.02144381 0.02169209 0.02204123 0.02252632 0.02320728 #> [25] 0.02419467 0.02571821 0.02835573 0.03418074"},{"path":"https://genentech.github.io/phase1b/reference/dbetadiff.html","id":null,"dir":"Reference","previous_headings":"","what":"The Difference between Two Beta Distributions ‚Äî dbetadiff","title":"The Difference between Two Beta Distributions ‚Äî dbetadiff","text":"Probability Density Function difference two Beta Distributions. Density, distribution function quantile function distribution difference two Beta distributions parameters parX parY. denote X Y two random variables representing response rate Control Treatment group respectively. assignment Control Treatment practically interchangeable. denote Z difference two groups Z = Y-X.","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetadiff.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"The Difference between Two Beta Distributions ‚Äî dbetadiff","text":"","code":"dbetadiff(   z,   parY,   parX,   eps = .Machine$double.eps,   rel.tol = .Machine$double.eps^0.1 )"},{"path":"https://genentech.github.io/phase1b/reference/dbetadiff.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"The Difference between Two Beta Distributions ‚Äî dbetadiff","text":"z (numeric): vector differences Control Treatment arms Z = Y-X parY (numeric): two parameters Y's Beta distribution (Treatment) parX (numeric): two parameters X's Beta distribution (Control) eps (number): lowest floating point number lower bound integration rel.tol (number): used stats::integrate()","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetadiff.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"The Difference between Two Beta Distributions ‚Äî dbetadiff","text":"density values","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetadiff.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"The Difference between Two Beta Distributions ‚Äî dbetadiff","text":"X Y can either Control Treatment Z = X-Y, subject assumptions.","code":""},{"path":"https://genentech.github.io/phase1b/reference/dbetadiff.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"The Difference between Two Beta Distributions ‚Äî dbetadiff","text":"","code":"# The following examples use these parameters: parX <- c(1, 52) parY <- c(5.5, 20.5)  # The difference between Control and Treatment is denoted as z. z <- seq(from = -1, to = 1, length = 100) plot(z, dbetadiff(z, parY = parY, parX = parX),   type = \"l\" )   # Calculate probability of Go, if difference was at least 15%. test <- integrate(   f = dbetadiff,   parY = parY,   parX = parX,   lower = 0.15,   upper = 1 ) str(test) #> List of 5 #>  $ value       : num 0.677 #>  $ abs.error   : num 2.41e-07 #>  $ subdivisions: int 1 #>  $ message     : chr \"OK\" #>  $ call        : language integrate(f = dbetadiff, lower = 0.15, upper = 1, parY = parY, parX = parX) #>  - attr(*, \"class\")= chr \"integrate\" test$value #> [1] 0.677447  # Calculate probability of Stop, if difference was at most 50%. integrate(   f = dbetadiff,   parY = parY,   parX = parX,   lower = -1,   upper = 0.5 ) #> 0.9993974 with absolute error < 8.6e-06"},{"path":"https://genentech.github.io/phase1b/reference/h_decision_one_RctpredprobDist.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating random decision and sample size looks ‚Äî h_decision_one_RctpredprobDist","title":"Generating random decision and sample size looks ‚Äî h_decision_one_RctpredprobDist","text":"helper function ocRctPredprobDist() generate single trial decision sample size.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_one_RctpredprobDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating random decision and sample size looks ‚Äî h_decision_one_RctpredprobDist","text":"","code":"h_decision_one_RctpredprobDist(   nnr,   nnE,   nnF,   pE,   pS,   parE,   parS,   tT,   phiU,   phiL,   deltaE,   deltaF,   weights,   weightsS,   relativeDelta = FALSE,   randRatio = 1 )"},{"path":"https://genentech.github.io/phase1b/reference/h_decision_one_RctpredprobDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating random decision and sample size looks ‚Äî h_decision_one_RctpredprobDist","text":"nnr (numeric): union nnEand nnF. nnE (numeric): sample size sizes study can stopped Efficacy decision. different Futility decision, specify nnF. nnF (numeric): sample size sizes study can stopped Futility decision different Efficacy decision. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. parS (numeric matrix): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. See details. tT (number): threshold assumed truep exceeds acceptable threshold p0. phiU (number): upper threshold predictive probability. phiL (number): lower threshold predictive probability. deltaE (number): margin response rate treatment group better standard care control S group Efficacy looks . Note can also negative well. deltaF (number): margin response rate treatment group better standard care control S group Futility looks . Note can also negative well. weights (numeric): mixture weights beta mixture prior. weightsS (numeric): weights S group. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients included margin treatment control group. See note.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_one_RctpredprobDist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating random decision and sample size looks ‚Äî h_decision_one_RctpredprobDist","text":"list following elements : decision : decision flag TRUE Go, FALSE Stop, NA Gray zone. all_sizes : resulting sample size. nActive : number patients active arm. nControl : number patients control arm.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_one_predprobDist.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating random decision and sample size looks for decision1 == TRUE or default option ‚Äî h_decision_one_predprobDist","title":"Generating random decision and sample size looks for decision1 == TRUE or default option ‚Äî h_decision_one_predprobDist","text":"helper function ocPredprobDist() generate numeric decisions decisions random looks all_sizes decision1 == TRUE.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_one_predprobDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating random decision and sample size looks for decision1 == TRUE or default option ‚Äî h_decision_one_predprobDist","text":"","code":"h_decision_one_predprobDist(   nnE,   nnF,   nnr,   truep,   xS,   nS,   parE,   parS,   tT,   phiU,   phiL,   deltaE,   deltaF,   weights,   weightsS,   relativeDelta = FALSE )"},{"path":"https://genentech.github.io/phase1b/reference/h_decision_one_predprobDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating random decision and sample size looks for decision1 == TRUE or default option ‚Äî h_decision_one_predprobDist","text":"nnE (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnE) = 1 Efficacy looks performed. nnF (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnF) = 1 Futility looks performed. nnr (numeric): union nnE nnF. truep (number): assumed true response rate true rate (scenario). xS (number): number successes S group interim. nS (number): number patients E group interim. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. parS (numeric): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. tT (number): threshold assumed truep exceeds acceptable threshold p0. phiU (number): upper threshold predictive probability. phiL (number): lower threshold predictive probability. deltaE (number): margin response rate treatment group better standard care control S group Efficacy looks . Note can also negative well. deltaF (number): margin response rate treatment group better standard care control S group Futility looks . Note can also negative well. weights (numeric): mixture weights beta mixture prior. weightsS (numeric): weights S group. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients. See postprobDist().","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_one_predprobDist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating random decision and sample size looks for decision1 == TRUE or default option ‚Äî h_decision_one_predprobDist","text":"list following elements : decision : decision flag TRUE Go, FALSE Stop, NA Gray zone. all_sizes : resulting number look size, anything maximum look size indicated interim, Futility Efficacy .","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_two_RctpredprobDist.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating random decision and sample size looks ‚Äî h_decision_two_RctpredprobDist","title":"Generating random decision and sample size looks ‚Äî h_decision_two_RctpredprobDist","text":"helper function ocRctPredprobDist() generate single trial decision sample size.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_two_RctpredprobDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating random decision and sample size looks ‚Äî h_decision_two_RctpredprobDist","text":"","code":"h_decision_two_RctpredprobDist(   nnE,   nnF,   nnr,   pE,   pS,   parE,   parS,   tF,   tT,   phiU,   phiFu,   deltaE,   deltaF,   weights,   weightsS,   relativeDelta,   randRatio )"},{"path":"https://genentech.github.io/phase1b/reference/h_decision_two_RctpredprobDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating random decision and sample size looks ‚Äî h_decision_two_RctpredprobDist","text":"nnE (numeric): sample size sizes study can stopped Efficacy decision. different Futility decision, specify nnF. nnF (numeric): sample size sizes study can stopped Futility decision different Efficacy decision. nnr (numeric): union nnEand nnF. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. parS (numeric matrix): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. See details. tF (number): threshold assumed truep exceed threshold p1. tT (number): threshold assumed truep exceeds acceptable threshold p0. phiU (number): upper threshold predictive probability. phiFu (number): upper threshold predictive probability. deltaE (number): margin response rate treatment group better standard care control S group Efficacy looks . Note can also negative well. deltaF (number): margin response rate treatment group better standard care control S group Futility looks . Note can also negative well. weights (numeric): mixture weights beta mixture prior. weightsS (numeric): weights S group. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients included margin treatment control group. See note.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_two_RctpredprobDist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating random decision and sample size looks ‚Äî h_decision_two_RctpredprobDist","text":"list following elements : decision : decision flag TRUE Go, FALSE Stop, NA Gray zone. all_sizes : resulting sample size. nActive : number patients active arm. nControl : number patients control arm.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_two_predprobDist.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating random decision and sample size looks for decision1 == FALSE or default option ‚Äî h_decision_two_predprobDist","title":"Generating random decision and sample size looks for decision1 == FALSE or default option ‚Äî h_decision_two_predprobDist","text":"helper function ocPredprobDist() generate numeric decisions decisions random looks all_sizes decision1 == TRUE.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_two_predprobDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating random decision and sample size looks for decision1 == FALSE or default option ‚Äî h_decision_two_predprobDist","text":"","code":"h_decision_two_predprobDist(   nnE,   nnF,   nnr,   truep,   xS,   nS,   parE,   parS,   tT,   tF,   phiU,   phiFu,   deltaE,   deltaF,   weights,   weightsS,   relativeDelta )"},{"path":"https://genentech.github.io/phase1b/reference/h_decision_two_predprobDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating random decision and sample size looks for decision1 == FALSE or default option ‚Äî h_decision_two_predprobDist","text":"nnE (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnE) = 1 Efficacy looks performed. nnF (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnF) = 1 Futility looks performed. nnr (numeric): union nnE nnF. truep (number): assumed true response rate true rate (scenario). xS (number): number successes S group interim. nS (number): number patients E group interim. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. parS (numeric): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. tT (number): threshold assumed truep exceeds acceptable threshold p0. tF (number): threshold assumed truep exceed threshold p1. phiU (number): upper threshold predictive probability. phiFu (number): upper threshold predictive probability. deltaE (number): margin response rate treatment group better standard care control S group Efficacy looks . Note can also negative well. deltaF (number): margin response rate treatment group better standard care control S group Futility looks . Note can also negative well. weights (numeric): mixture weights beta mixture prior. weightsS (numeric): weights S group. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients. See postprobDist().","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_decision_two_predprobDist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating random decision and sample size looks for decision1 == FALSE or default option ‚Äî h_decision_two_predprobDist","text":"list following elements: decision : decision flag TRUE Go, FALSE Stop, NA Gray zone. all_sizes : resulting number look size, anything maximum look size indicated interim, Futility Efficacy .","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_dist0.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating random distance for h_get_distance() helper function ‚Äî h_dist0","title":"Generating random distance for h_get_distance() helper function ‚Äî h_dist0","text":"helper function h_get_distance() first calculating non-overlapping distance looks looks minimum length 2 elements.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_dist0.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating random distance for h_get_distance() helper function ‚Äî h_dist0","text":"","code":"h_dist0(nn)"},{"path":"https://genentech.github.io/phase1b/reference/h_dist0.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating random distance for h_get_distance() helper function ‚Äî h_dist0","text":"nn (number numeric): union nnE nnF, futility analysis looks supplied.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_dist0.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating random distance for h_get_distance() helper function ‚Äî h_dist0","text":"number providing wiggle distance.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_getBetamixPost.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Beta-Mixture-Binomial Posterior Distribution ‚Äî h_getBetamixPost","title":"Compute Beta-Mixture-Binomial Posterior Distribution ‚Äî h_getBetamixPost","text":"helper function computes posterior parameters beta-mixture-binomial distribution.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_getBetamixPost.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Beta-Mixture-Binomial Posterior Distribution ‚Äî h_getBetamixPost","text":"","code":"h_getBetamixPost(x, n, par, weights)"},{"path":"https://genentech.github.io/phase1b/reference/h_getBetamixPost.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Beta-Mixture-Binomial Posterior Distribution ‚Äî h_getBetamixPost","text":"x (numeric): number successes. par (matrix): beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. weights (numeric): mixture weights beta mixture prior length K. element corresponds row beta parameters par.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_getBetamixPost.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Beta-Mixture-Binomial Posterior Distribution ‚Äî h_getBetamixPost","text":"list updated beta parameters weights.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_bounds.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating bounds for the Integration of Beta Mixture Posterior ‚Äî h_get_bounds","title":"Generating bounds for the Integration of Beta Mixture Posterior ‚Äî h_get_bounds","text":"Using quantile Beta Mixture Distribution parameters given standard care S experimental group E determine bounds inputs stats::integrate().","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_bounds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating bounds for the Integration of Beta Mixture Posterior ‚Äî h_get_bounds","text":"","code":"h_get_bounds(controlBetamixPost)"},{"path":"https://genentech.github.io/phase1b/reference/h_get_bounds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating bounds for the Integration of Beta Mixture Posterior ‚Äî h_get_bounds","text":"controlBetamixPost (list): list posterior parameters beta-mixture-binomial distribution generic names par weights. See h_getBetamixPost().","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_bounds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating bounds for the Integration of Beta Mixture Posterior ‚Äî h_get_bounds","text":"Integrand function","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating random decision and sample size looks ‚Äî h_get_decision","title":"Generating random decision and sample size looks ‚Äî h_get_decision","text":"helper function ocPostprob() generate numeric decisions decisions random looks all_sizes.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating random decision and sample size looks ‚Äî h_get_decision","text":"","code":"h_get_decision(nnr, truep, p0, p1, parE = c(1, 1), nnE, nnF, tL, tU)"},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating random decision and sample size looks ‚Äî h_get_decision","text":"nnr (numeric): union nnEand nnF. truep (number): assumed true response rate. p0 (number): lower Futility threshold response rate. p1 (number): upper Efficacy threshold response rate. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. nnE (numeric): sample size sizes study can stopped Efficacy decision. different Futility decision, specify nnF. nnF (numeric): sample size sizes study can stopped Futility decision different Efficacy decision. tL (number): posterior probability threshold p0. tU (number): posterior probability threshold p1.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating random decision and sample size looks ‚Äî h_get_decision","text":"list following elements : decision : decision flag TRUE Go, FALSE Stop, NA Gray zone. all_sizes : resulting number look size, anything maximum look size indicated interim, Futility Efficacy .","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decisionDist.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluate Posteriors based on Efficacy and Futility Thresholds in Two-Armed trials ‚Äî h_get_decisionDist","title":"Evaluate Posteriors based on Efficacy and Futility Thresholds in Two-Armed trials ‚Äî h_get_decisionDist","text":"helper function adapted h_get_decision() replacing internal use postprob() postprobDist() generate decision random looks all_sizes.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decisionDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluate Posteriors based on Efficacy and Futility Thresholds in Two-Armed trials ‚Äî h_get_decisionDist","text":"","code":"h_get_decisionDist(   nnr,   nnrE,   nnrF,   truep,   parE = c(1, 1),   parS = c(1, 1),   tL,   tU,   deltaE,   deltaF,   relativeDelta )"},{"path":"https://genentech.github.io/phase1b/reference/h_get_decisionDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Evaluate Posteriors based on Efficacy and Futility Thresholds in Two-Armed trials ‚Äî h_get_decisionDist","text":"nnr (numeric): union nnEand nnF. truep (number): assumed true response rate. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. parS (numeric matrix): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. See details. tL (number): posterior probability threshold p0. tU (number): posterior probability threshold p1. deltaE (number): margin response rate treatment group better standard care control S group Efficacy looks . Note can also negative well. deltaF (number): margin response rate treatment group better standard care control S group Futility looks . Note can also negative well. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients included margin treatment control group. See note.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decisionDist_rct.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating random decision and sample size looks ‚Äî h_get_decisionDist_rct","title":"Generating random decision and sample size looks ‚Äî h_get_decisionDist_rct","text":"helper function ocRctPostprobDist() generate numeric decisions decisions random looks all_sizes.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decisionDist_rct.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating random decision and sample size looks ‚Äî h_get_decisionDist_rct","text":"","code":"h_get_decisionDist_rct(   nnr,   nnrE,   nnrF,   pE,   pS,   parE = c(1, 1),   parS = c(1, 1),   tL,   tU,   deltaE,   deltaF,   relativeDelta,   randRatio = 1,   Nmax )"},{"path":"https://genentech.github.io/phase1b/reference/h_get_decisionDist_rct.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating random decision and sample size looks ‚Äî h_get_decisionDist_rct","text":"nnr (numeric): union nnE nnF. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. randRatio (numeric): randomisation ratio treatment control. Must greater 0 maximum 1. Nmax (number): max sample size sample size final look.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decisionDist_rct.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating random decision and sample size looks ‚Äî h_get_decisionDist_rct","text":"list following elements : decision : decision flag TRUE Go, FALSE Stop, NA Gray zone. all_sizes : resulting number look size, anything maximum look size indicated interim, Futility Efficacy . nActive : mean look size Active arm. nControl : mean look size Control arm.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision_one_predprob.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating random decision and sample size looks for decision1 == TRUE or default option ‚Äî h_get_decision_one_predprob","title":"Generating random decision and sample size looks for decision1 == TRUE or default option ‚Äî h_get_decision_one_predprob","text":"helper function ocPredprob() generate numeric decisions decisions random looks all_sizes decision1 == TRUE.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision_one_predprob.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating random decision and sample size looks for decision1 == TRUE or default option ‚Äî h_get_decision_one_predprob","text":"","code":"h_get_decision_one_predprob(   nnr,   truep,   p0,   parE = c(1, 1),   nnE,   nnF,   tT,   phiU,   phiL )"},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision_one_predprob.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating random decision and sample size looks for decision1 == TRUE or default option ‚Äî h_get_decision_one_predprob","text":"nnr (numeric): union nnE nnF. truep (number): assumed true response rate true rate (scenario). p0 (number): lower Futility threshold response rate. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. nnE (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnE) = 1 Efficacy looks performed. nnF (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnF) = 1 Futility looks performed. tT (number): threshold assumed truep exceeds acceptable threshold p0. phiU (number): upper threshold predictive probability. phiL (number): lower threshold predictive probability.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision_one_predprob.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating random decision and sample size looks for decision1 == TRUE or default option ‚Äî h_get_decision_one_predprob","text":"list following elements: decision : decision flag TRUE Go, FALSE Stop, NA Gray zone. all_sizes : resulting number look size, anything maximum look size indicated interim, Futility Efficacy .","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision_two_predprob.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating random decision and sample size looks for decision1 == FALSE ‚Äî h_get_decision_two_predprob","title":"Generating random decision and sample size looks for decision1 == FALSE ‚Äî h_get_decision_two_predprob","text":"helper function ocPredprob() generate numeric decisions decisions random looks all_sizes decision1 == FALSE.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision_two_predprob.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating random decision and sample size looks for decision1 == FALSE ‚Äî h_get_decision_two_predprob","text":"","code":"h_get_decision_two_predprob(   nnr,   truep,   p0,   p1,   parE = c(1, 1),   nnE,   nnF,   tT,   tF,   phiFu,   phiU )"},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision_two_predprob.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating random decision and sample size looks for decision1 == FALSE ‚Äî h_get_decision_two_predprob","text":"nnr (numeric): union nnE nnF. truep (number): assumed true response rate true rate (scenario). p0 (number): lower Futility threshold response rate. p1 (number): upper Futility threshold response rate. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. nnE (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnE) = 1 Efficacy looks performed. nnF (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnF) = 1 Futility looks performed. tT (number): threshold assumed truep exceeds acceptable threshold p0. tF (number): threshold assumed truep exceed threshold p1. phiFu (number): upper threshold predictive probability. phiU (number): upper threshold predictive probability.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_decision_two_predprob.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating random decision and sample size looks for decision1 == FALSE ‚Äî h_get_decision_two_predprob","text":"list following elements: decision : decision flag TRUE Go, FALSE Stop, NA Gray zone. all_sizes : resulting number look size, anything maximum look size indicated interim, Futility Efficacy .","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating random distance in given looks for sample sizes for Efficacy and Futility. ‚Äî h_get_distance","title":"Generating random distance in given looks for sample sizes for Efficacy and Futility. ‚Äî h_get_distance","text":"helper function ocPostprob() generate random distance's wiggle room around looks nn.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating random distance in given looks for sample sizes for Efficacy and Futility. ‚Äî h_get_distance","text":"","code":"h_get_distance(nn)"},{"path":"https://genentech.github.io/phase1b/reference/h_get_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating random distance in given looks for sample sizes for Efficacy and Futility. ‚Äî h_get_distance","text":"nn (number numeric): union nnE nnF, futility analysis looks supplied.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_distance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating random distance in given looks for sample sizes for Efficacy and Futility. ‚Äî h_get_distance","text":"numeric length(nn)-1 elements.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_looks.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating looks from random distance ‚Äî h_get_looks","title":"Generating looks from random distance ‚Äî h_get_looks","text":"helper function ocPostprob() applies numeric element dist looks nn.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_looks.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating looks from random distance ‚Äî h_get_looks","text":"","code":"h_get_looks(dist, nnE, nnF)"},{"path":"https://genentech.github.io/phase1b/reference/h_get_looks.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating looks from random distance ‚Äî h_get_looks","text":"dist (numeric logical): distance random looks around look locations nn, dist generated h_get_distance() numeric least one element. NULL, one location look set nnE nnF. nnE (numeric): sample size sizes study can stopped Efficacy decision. different Futility decision, specify nnF. nnF (numeric): sample size sizes study can stopped Futility decision different Efficacy decision.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_looks.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating looks from random distance ‚Äî h_get_looks","text":"Uses distance h_get_distance() add looks, creating wiggled looks: nnrE result Efficacy looks random distance added. nnrF result Futility looks random distance added.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_oc.html","id":null,"dir":"Reference","previous_headings":"","what":"Creating list for operating characteristics ‚Äî h_get_oc","title":"Creating list for operating characteristics ‚Äî h_get_oc","text":"Generates operating characteristics.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_oc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creating list for operating characteristics ‚Äî h_get_oc","text":"","code":"h_get_oc(all_sizes, Nmax, decision)"},{"path":"https://genentech.github.io/phase1b/reference/h_get_oc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creating list for operating characteristics ‚Äî h_get_oc","text":"all_sizes (numeric): sample sizes looks simulated length(sim) times dist applied. decision (numeric): Go, Stop Gray Zone decisions looks simulated length(sim) times.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_oc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creating list for operating characteristics ‚Äî h_get_oc","text":"list results containing : ExpectedN: expected number patients trials PrStopEarly: probability stop trial early (reaching maximum sample size) PrEarlyEff: probability Early Go decision PrEarlyFut: probability Early Stop decision PrEfficacy: probability Go decision PrFutility: probability Stop decision PrGrayZone: probability Go Stop ,\"Evaluate\" Gray decision zone","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_oc_rct.html","id":null,"dir":"Reference","previous_headings":"","what":"Creating list for operating characteristics ‚Äî h_get_oc_rct","title":"Creating list for operating characteristics ‚Äî h_get_oc_rct","text":"Generates operating characteristics ocRctPostprobDist().","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_oc_rct.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creating list for operating characteristics ‚Äî h_get_oc_rct","text":"","code":"h_get_oc_rct(all_sizes, Nmax, nActive, nControl, decision)"},{"path":"https://genentech.github.io/phase1b/reference/h_get_oc_rct.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creating list for operating characteristics ‚Äî h_get_oc_rct","text":"Nmax (number): max sample size sample size final look.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_get_oc_rct.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creating list for operating characteristics ‚Äî h_get_oc_rct","text":"list results containing : ExpectedN: expected number patients trials treatment SOC group PrStopEarly: probability stop trial early (reaching maximum sample size) PrEarlyEff: probability Early Go decision PrEarlyFut: probability Early Stop decision PrEfficacy: probability Go decision PrFutility: probability Stop decision PrGrayZone: probability Go Stop ,\"Evaluate\" Gray decision zone ExpectedNactive : mean number patients treatment arm ExpectedNcontrol: mean number patients control arm","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_integrand.html","id":null,"dir":"Reference","previous_headings":"","what":"The Posterior Beta Mixture Integrand when Delta is absolute The helper function to generate Integrand function when relativeDelta = FALSE, a default setting. ‚Äî h_integrand","title":"The Posterior Beta Mixture Integrand when Delta is absolute The helper function to generate Integrand function when relativeDelta = FALSE, a default setting. ‚Äî h_integrand","text":"Posterior Beta Mixture Integrand Delta absolute helper function generate Integrand function relativeDelta = FALSE, default setting.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_integrand.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"The Posterior Beta Mixture Integrand when Delta is absolute The helper function to generate Integrand function when relativeDelta = FALSE, a default setting. ‚Äî h_integrand","text":"","code":"h_integrand(p_s, delta, activeBetamixPost, controlBetamixPost)"},{"path":"https://genentech.github.io/phase1b/reference/h_integrand.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"The Posterior Beta Mixture Integrand when Delta is absolute The helper function to generate Integrand function when relativeDelta = FALSE, a default setting. ‚Äî h_integrand","text":"p_s (number): probability success response rate standard care control S group. delta (number): margin response rate treatment group better standard care control S group. Note can also negative, e.g. non-inferiority assessed. activeBetamixPost (list): list posterior parameters beta-mixture-binomial distribution generic names par weights. See h_getBetamixPost(). controlBetamixPost (list): list posterior parameters beta-mixture-binomial distribution generic names par weights. See h_getBetamixPost().","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_integrand.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"The Posterior Beta Mixture Integrand when Delta is absolute The helper function to generate Integrand function when relativeDelta = FALSE, a default setting. ‚Äî h_integrand","text":"Function argument stats::integrate().","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_integrand_relDelta.html","id":null,"dir":"Reference","previous_headings":"","what":"The Posterior Beta Mixture Integrand when delta is relative ‚Äî h_integrand_relDelta","title":"The Posterior Beta Mixture Integrand when delta is relative ‚Äî h_integrand_relDelta","text":"helper function generate Integrand function relativeDelta = TRUE.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_integrand_relDelta.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"The Posterior Beta Mixture Integrand when delta is relative ‚Äî h_integrand_relDelta","text":"","code":"h_integrand_relDelta(p_s, delta, activeBetamixPost, controlBetamixPost)"},{"path":"https://genentech.github.io/phase1b/reference/h_integrand_relDelta.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"The Posterior Beta Mixture Integrand when delta is relative ‚Äî h_integrand_relDelta","text":"p_s (number): probability success response rate standard care control S group. delta (number): margin response rate treatment group better standard care control S group. Note can also negative, e.g. non-inferiority assessed. activeBetamixPost (list): list posterior parameters beta-mixture-binomial distribution generic names par weights. See h_getBetamixPost(). controlBetamixPost (list): list posterior parameters beta-mixture-binomial distribution generic names par weights. See h_getBetamixPost().","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_integrand_relDelta.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"The Posterior Beta Mixture Integrand when delta is relative ‚Äî h_integrand_relDelta","text":"Function argument stats::integrate().","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_predprobdist.html","id":null,"dir":"Reference","previous_headings":"","what":"The predictive probability of success in two-arm studies. ‚Äî h_predprobdist","title":"The predictive probability of success in two-arm studies. ‚Äî h_predprobdist","text":"helper function generate predictive probability success based difference treatment group (E) control standard care (S) group.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_predprobdist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"The predictive probability of success in two-arm studies. ‚Äî h_predprobdist","text":"","code":"h_predprobdist(   x,   n,   xS,   nS,   Nmax,   NmaxControl,   delta,   relativeDelta,   parE,   parS,   weights,   weightsS,   thetaT )"},{"path":"https://genentech.github.io/phase1b/reference/h_predprobdist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"The predictive probability of success in two-arm studies. ‚Äî h_predprobdist","text":"x (number): number successes E group interim. n (number): number patients E group interim. xS (number): number successes S group interim. nS (number): number patients E group interim. Nmax (number): maximum number patients E group final analysis. NmaxControl (number): maximum number patients S group final analysis. delta (number): difference response rates met. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients. See postprobDist(). parE (numeric): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution E group. parS (numeric): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. weights (numeric): mixture weights beta mixture prior. weightsS (numeric): weights S group. thetaT (number): threshold probability used.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_predprobdist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"The predictive probability of success in two-arm studies. ‚Äî h_predprobdist","text":"list returned names result predictive probability table numeric values counts responses remaining patients, density probabilities counts, posterior corresponding probabilities threshold, successfor trial success indicators.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_predprobdist_single_arm.html","id":null,"dir":"Reference","previous_headings":"","what":"The predictive probability of success in single arm studies. ‚Äî h_predprobdist_single_arm","title":"The predictive probability of success in single arm studies. ‚Äî h_predprobdist_single_arm","text":"helper function generate predictive probability success based treatment group (E) control standard care (S), indicated NmaxControl == 0.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_predprobdist_single_arm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"The predictive probability of success in single arm studies. ‚Äî h_predprobdist_single_arm","text":"","code":"h_predprobdist_single_arm(   x,   mE,   n,   Nmax,   delta,   relativeDelta,   parE,   parS,   weights,   weightsS,   thetaT )"},{"path":"https://genentech.github.io/phase1b/reference/h_predprobdist_single_arm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"The predictive probability of success in single arm studies. ‚Äî h_predprobdist_single_arm","text":"x (number): number successes E group interim. (number): number successes remaining Nmax-n number patients treatment E group. Nmax (number): maximum number patients E group final analysis. delta (number): difference response rates met. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients. See postprobDist(). parE (numeric): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution E group. parS (numeric): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. weights (numeric): mixture weights beta mixture prior. weightsS (numeric): weights S group. thetaT (number): threshold probability used.","code":""},{"path":"https://genentech.github.io/phase1b/reference/h_predprobdist_single_arm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"The predictive probability of success in single arm studies. ‚Äî h_predprobdist_single_arm","text":"list returned names result predictive probability table numeric values counts responses remaining patients, probabilities counts, corresponding probabilities threshold, trial success indicators.","code":""},{"path":"https://genentech.github.io/phase1b/reference/oc2.html","id":null,"dir":"Reference","previous_headings":"","what":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc2","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc2","text":"Interim looks done three times total including last one, approximately equal distance looks.","code":""},{"path":"https://genentech.github.io/phase1b/reference/oc2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc2","text":"","code":"oc2(   method = c(\"PointMass.Bayes\", \"Prior.Bayes\", \"RCT.Bayes\", \"RCT.BayesRobust\",     \"RCTvanilla.Bayes\", \"PointMass.PP\", \"Prior.PP\", \"RCT.PP\", \"RCT.PProbust\",     \"RCTvanilla.PP\"),   nSim,   histSize,   trialSize,   drift = 0,   controlRate,   nmeRate,   delta,   tL = 0.8,   tU = 0.8,   tT = 0.85,   phiL = 0.05,   phiU = 0.95,   parE = c(1, 1),   weights )"},{"path":"https://genentech.github.io/phase1b/reference/oc2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc2","text":"method 8 different methods can selected: PointMass.Bayes: single arm trial pointmass derived historical data control response rate, see postprob Prior.Bayes: single arm trial prior derived historical data control response rate, see postprobDist RCT.Bayes: RCT (1:1 randomization) prior derived historical data control response rate, see postprobDist RCT.BayesRobust: RCT.Bayes, robust prior, enabling dynamic borrowing historical information RCT.vanillaBayes: RCT, using historical control data PointMass.PP: single arm trial pointmass derived historical data control response rate, using predictive probability method, see predprob Prior.PP: single arm trial prior derived historical data control response rate, using predictive probability method, see predprobDist RCT.PP: RCT (1:1 randomization) prior derived historical data control response rate, using predictive probability method, see predprobDist RCT.PProbust: RCT.PP,  robust prior, enabling dynamic borrowing historical information RCT.vanillaPP: RCT using predictive probability method, using historical control data nSim number trials simulate histSize historical data size trialSize total trial sample size drift drift parameter: actual control response rate historical control response rate plus drift. Hence positive drift means controls now higher response rates historical trial. controlRate actual control response rate nmeRate treatment response rate delta delta stopping efficacy used. Implicitly zero delta stopping futility used. tL Bayes methods: probability threshold control response rate (default: 0.8) tU Bayes methods: probability threshold control response rate + delta (default: 0.8) tT threshold probability response rate p0 end trial (default: 0.85) phiL lower threshold predictive probability (default: 0.05) phiU upper threshold predictive probability (default: 0.95) parE beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. Default uniform prior. weights mixture weights beta mixture prior. Default uniform weights across mixture components.","code":""},{"path":"https://genentech.github.io/phase1b/reference/oc2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc2","text":"Returned operating characteristics matrix include: ExpectedN: expected number patients trials ExpectedNactive: expected number patients treatment PrStopEarly: probability stop trial early (reaching maximum sample size) PrEarlyEff: probability decide efficacy early PrEarlyFut: probability decide futility early PrEfficacy: probability decide efficacy PrFutility: probability decide futility PrGrayZone: probability decision end (\"gray zone\")","code":""},{"path":"https://genentech.github.io/phase1b/reference/oc2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc2","text":"","code":"# this looks OK now: oc2(   method = \"Prior.PP\",   histSize = 1e5L,   trialSize = 100,   drift = 0,   controlRate = 0.5,   nmeRate = 0.70,   nSim = 20,   delta = 0.15 ) #>      ExpectedN ExpectedNactive ExpectedNcontrol PrStopEarly PrEarlyEff #> [1,]     75.25           75.25                0        0.45        0.2 #>      PrEarlyFut PrEfficacy PrFutility PrGrayZone #> [1,]       0.25        0.5        0.5          0  ## this one as well: oc2(   method = \"Prior.Bayes\",   histSize = 1e6L,   trialSize = 100,   drift = 0,   controlRate = 0.5,   nmeRate = 0.65,   nSim = 20,   delta = 0.15 ) #>      ExpectedN ExpectedNactive ExpectedNcontrol PrStopEarly PrEarlyEff #> [1,]       100             100                0           0          0 #>      PrEarlyFut PrEfficacy PrFutility PrGrayZone #> [1,]          0          0          0          1  ## this example takes longer to run, therefore we don't execute it here: if (FALSE) {   ## the different methods we are looking at:   methods <- c(     \"PointMass.Bayes\", \"Prior.Bayes\", \"RCT.Bayes\", \"RCTvanilla.Bayes\",     \"PointMass.PP\", \"Prior.PP\", \"RCT.PP\", \"RCTvanilla.PP\"   )    ## the control rate will always be 50%   ## but the historical data will be generated randomly from that   ## binomial distribution!    ## delta will be 0.15    ## 200 simulations    ## the different prior sample sizes (historical data size, histSizes <- c(10, 20, 50, 150))   ##   ## later: add very large size, but with heterogeneity =>   ## mixture of beta priors   histSizes <- c(20, 150)    ## the trial sample size (total)   trialSizes <- c(40)    ## the drift   drift <- c(0, 0.1, 0.2)    ## the different true rates for the NME: nmeRates <- seq(from=0.05, to=0.95, by=0.05)   ##   nmeRates <- c(0.4, 0.5, 0.6, 0.7, 0.8)    ## so the whole grid is   wholeGrid <- expand.grid(     method = methods,     drift = drift,     histSize = histSizes,     trialSize = trialSizes,     nmeRate = nmeRates, stringsAsFactors = FALSE   )    ## summarize the methods    ## compute the operating characteristics for all combinations   if (file.exists(savefile <- \"allSims4.RData\")) {     load(savefile)   } else {     ## setup the result list     allOcs <- vector(       mode = \"list\",       length = nrow(wholeGrid)     )      for (i in seq_len(nrow(wholeGrid))) {       set.seed(i)       allOcs[[i]] <- with(         wholeGrid[i, ],         oc2(           method = method,           histSize = histSize,           trialSize = trialSize,           drift = drift,           controlRate = 0.5,           nmeRate = nmeRate,           nSim = 200,           delta = 0.15         )       )     }      save(allOcs,       file = savefile     )   }    length(allOcs)   allOcs    allOcs[[1]]    allPossibleNames <- colnames(allOcs[[1]])   allPossibleNames    allOcsMatrix <-     t(sapply(       allOcs,       function(x) {         res <- rep(NA, length(allPossibleNames))         names(res) <- allPossibleNames         res[colnames(x)] <- x         res       }     ))     allOcsMatrix   wholeMatrix <- cbind(wholeGrid, allOcsMatrix)    library(reshape)     ## write a table to a Word file in the current directory   outputTab <- function(tab,                         out = \"output.docx\", # name of the output file                         # how many digits for numbers?                         digits = 2) {     library(officer)     doc <- read_docx()     dat <- as.data.frame(tab)     whichNum <- which(sapply(dat, is.numeric))     whichInt <- which(sapply(dat, function(x) {       is.numeric(x) && all(x == round(x))     }))     for (i in whichNum) {       if (i %in% whichInt) {         dat[[i]] <- format(dat[[i]], nsmall = 0)       } else {         dat[[i]] <- format(dat[[i]], digits = digits, nsmall = digits)       }     }      doc <- body_add_table(doc, dat, style = \"Normal Table\")     print(doc, target = paste0(getwd(), \"/myreport.docx\"))   }     ## --------------------------------------------------   ## derive the tables   ## (here change drift and histSize values manually to get the   ## different tables for the slides)   tab1 <- subset(     wholeMatrix,     (drift == 0.2) &       (histSize == 150) &       (method %in% ppNames)   ) }"},{"path":"https://genentech.github.io/phase1b/reference/oc3.html","id":null,"dir":"Reference","previous_headings":"","what":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc3","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc3","text":"function differs oc2 respect historical actual control rates determined, see parameter controlRateDist.","code":""},{"path":"https://genentech.github.io/phase1b/reference/oc3.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc3","text":"","code":"oc3(   method = c(\"PointMass.Bayes\", \"Prior.Bayes\", \"RCT.Bayes\", \"RCTvanilla.Bayes\",     \"PointMass.PP\", \"Prior.PP\", \"RCT.PP\", \"RCTvanilla.PP\"),   nSim,   histSize,   trialSize,   controlRateDist,   nmeRate,   delta,   tL = 0.8,   tU = 0.8,   tT = 0.85,   phiL = 0.05,   phiU = 0.95,   parE = c(1, 1),   weights )"},{"path":"https://genentech.github.io/phase1b/reference/oc3.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc3","text":"method 8 different methods can selected: PointMass.Bayes: single arm trial pointmass derived historical data control response rate, see postprob Prior.Bayes: single arm trial prior derived historical data control response rate, see postprobDist RCT.Bayes: RCT (1:1 randomization) prior derived historical data control response rate, see postprobDist RCT.vanillaBayes: RCT, using historical control data PointMass.PP: single arm trial pointmass derived historical data control response rate, using predictive probability method, see predprob Prior.PP: single arm trial prior derived historical data control response rate, using predictive probability method, see predprobDist RCT.PP: RCT (1:1 randomization) prior derived historical data control response rate, using predictive probability method, see predprobDist RCT.vanillaPP: RCT using predictive probability method, using historical control data nSim number trials simulate histSize historical data size trialSize total trial sample size controlRateDist control response rate distribution. shall function without arguments, gives back random draw control response rate distribution. invoked obtain control rates historical actual control data sets. nmeRate treatment response rate delta delta stopping efficacy used. Implicitly zero delta stopping futility used. tL Bayes methods: probability threshold control response rate (default: 0.8) tU Bayes methods: probability threshold control response rate + delta (default: 0.8) tT threshold probability response rate p0 end trial (default: 0.85) phiL lower threshold predictive probability (default: 0.05) phiU upper threshold predictive probability (default: 0.95) parE beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. Default uniform prior. weights mixture weights beta mixture prior. Default uniform weights across mixture components.","code":""},{"path":"https://genentech.github.io/phase1b/reference/oc3.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc3","text":"Returned operating characteristics matrix include: ExpectedN: expected number patients trials ExpectedNactive: expected number patients treatment PrStopEarly: probability stop trial early (reaching maximum sample size) PrEarlyEff: probability decide efficacy early PrEarlyFut: probability decide futility early PrEfficacy: probability decide efficacy PrFutility: probability decide futility PrGrayZone: probability decision end (\"gray zone\")","code":""},{"path":"https://genentech.github.io/phase1b/reference/oc3.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc3","text":"Interim looks done three times total including last one, approximately equal distance looks.","code":""},{"path":"https://genentech.github.io/phase1b/reference/oc3.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run simulations to obtain operating characteristics for methods that include historical data on control ‚Äî oc3","text":"","code":"## this looks OK now: oc3(   method = \"Prior.PP\",   histSize = 1e5L,   trialSize = 100,   controlRateDist = function() {     rbeta(n = 1, 10, 10)   },   nmeRate = 0.70,   nSim = 20,   delta = 0.15 ) #>      ExpectedN ExpectedNactive ExpectedNcontrol PrStopEarly PrEarlyEff #> [1,]      60.4            60.4                0         0.7        0.3 #>      PrEarlyFut PrEfficacy PrFutility PrGrayZone #> [1,]        0.4       0.45       0.55          0  ## this one as well: oc3(   method = \"Prior.Bayes\",   histSize = 1e6L,   trialSize = 100,   controlRateDist = function() {     rbeta(n = 1, 10, 10)   },   nmeRate = 0.65,   nSim = 20,   delta = 0.15 ) #>      ExpectedN ExpectedNactive ExpectedNcontrol PrStopEarly PrEarlyEff #> [1,]     91.75           91.75                0         0.2        0.1 #>      PrEarlyFut PrEfficacy PrFutility PrGrayZone #> [1,]        0.1        0.1       0.15       0.75  ## this example takes longer to run, therefore we don't execute it here: if (FALSE) {   ## the different methods we are looking at:   methods <- c(     \"PointMass.Bayes\", \"Prior.Bayes\", \"RCT.Bayes\", \"RCTvanilla.Bayes\",     \"PointMass.PP\", \"Prior.PP\", \"RCT.PP\", \"RCTvanilla.PP\"   )    ## the control rate will come from a Beta(10, 10) distribution   ## and the historical data will be generated randomly from the resulting   ## binomial distribution!    ## delta will be 0.15    ## 200 simulations    ## the different prior sample sizes (historical data size) e.g. histSizes <- c(10, 20, 50, 150)   ##   ## later: add very large size, but with heterogeneity =>   ## mixture of beta priors   histSizes <- c(20, 150)    ## the trial sample size (total)   trialSizes <- c(40)    ## the different true rates for the NME: nmeRates <- seq(from=0.05, to=0.95, by=0.05)   ##   nmeRates <- c(0.4, 0.5, 0.6, 0.7, 0.8)    ## so the whole grid is   wholeGrid <- expand.grid(     method = methods,     histSize = histSizes,     trialSize = trialSizes,     nmeRate = nmeRates, stringsAsFactors = FALSE   )    ## summarize the methods    ## compute the operating characteristics for all combinations   if (file.exists(savefile <- \"allSims4.RData\")) {     load(savefile)   } else {     ## setup the result list     allOcs <- vector(       mode = \"list\",       length = nrow(wholeGrid)     )      for (i in seq_len(nrow(wholeGrid))) {       set.seed(i)       allOcs[[i]] <- with(         wholeGrid[i, ],         oc3(           method = method,           histSize = histSize,           trialSize = trialSize,           controlRateDist = function() {             rbeta(n = 1, 10, 10)           },           nmeRate = nmeRate,           nSim = 200,           delta = 0.15         )       )     }      save(allOcs,       file = savefile     )   }    length(allOcs)   allOcs    allOcs[[1]]    allPossibleNames <- colnames(allOcs[[1]])   allPossibleNames    allOcsMatrix <-     t(sapply(       allOcs,       function(x) {         res <- rep(NA, length(allPossibleNames))         names(res) <- allPossibleNames         res[colnames(x)] <- x         res       }     ))     allOcsMatrix   wholeMatrix <- cbind(wholeGrid, allOcsMatrix)    library(reshape)     ## write a table to a Word file in the current directory   outputTab <- function(tab,                         # name of the output file                         out = \"output.docx\",                         # how many digits for numbers?                         digits = 2) {     library(officer)     doc <- read_docx()     dat <- as.data.frame(tab)     whichNum <- which(sapply(dat, is.numeric))     whichInt <- which(sapply(dat, function(x) {       is.numeric(x) && all(x == round(x))     }))     for (i in whichNum) {       if (i %in% whichInt) {         dat[[i]] <- format(dat[[i]], nsmall = 0)       } else {         dat[[i]] <- format(dat[[i]], digits = digits, nsmall = digits)       }     }      doc <- body_add_table(doc, dat, style = \"Normal Table\")     writeDoc(doc, target = paste0(getwd(), \"/myreport.docx\"))   }     ## --------------------------------------------------   ## derive the tables   ## (here change drift and histSize values manually to get the   ## different tables for the slides)   tab1 <- subset(     wholeMatrix,     (histSize == 150) &       (method %in% ppNames)   ) }"},{"path":"https://genentech.github.io/phase1b/reference/ocPostprob.html","id":null,"dir":"Reference","previous_headings":"","what":"Operating Characteristics for Posterior Probability method ‚Äî ocPostprob","title":"Operating Characteristics for Posterior Probability method ‚Äî ocPostprob","text":"Calculate operating characteristics posterior probability method. assumed true response rate truep. trial stopped Efficacy posterior probability p1 larger tU, stopped Futility posterior probability p0 larger tL: Stop criteria Efficacy : Pr(RR > p1) > tU Stop criteria Futility : Pr(RR < p0) > tL Resulting operating characteristics include following: ExpectedN: expected number patients trials PrStopEarly: probability stop trial early (reaching maximum sample size) PrEarlyEff: probability Early Go decision PrEarlyFut: probability Early Stop decision PrEfficacy: probability Go decision PrFutility: probability Stop decision PrGrayZone: probability Go Stop ,\"Evaluate\" Gray decision zone","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPostprob.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Operating Characteristics for Posterior Probability method ‚Äî ocPostprob","text":"","code":"ocPostprob(   nnE,   truep,   p0,   p1,   tL,   tU,   parE = c(1, 1),   sim = 50000,   wiggle = FALSE,   nnF = nnE )"},{"path":"https://genentech.github.io/phase1b/reference/ocPostprob.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Operating Characteristics for Posterior Probability method ‚Äî ocPostprob","text":"nnE (numeric): sample size sizes study can stopped Efficacy decision. different Futility decision, specify nnF. truep (number): assumed true response rate. p0 (number): lower Futility threshold response rate. p1 (number): upper Efficacy threshold response rate. tL (number): posterior probability threshold p0. tU (number): posterior probability threshold p1. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. sim (number): number simulations. wiggle (flag): generate random look locations (default). TRUE, optional specify dist (see @details). nnF (numeric): sample size sizes study can stopped Futility decision different Efficacy decision.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPostprob.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Operating Characteristics for Posterior Probability method ‚Äî ocPostprob","text":"list following elements: oc: matrix operating characteristics (see @details section) nn: vector look locations supplied nnE: vector Efficacy look locations nnF: vector Futility look locations params: user input arguments.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPostprob.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Operating Characteristics for Posterior Probability method ‚Äî ocPostprob","text":"","code":"# For three looks of 10, 20 and 30 we have the following assumptions : # True response rate or truep of the treatment group = 40% # The following are the Stop rules respectively : # Look for Efficacy: Pr(RR > 30% )> 80% # Look for Futility: Pr(RR < 20% )> 60% # Prior of treatment arm parE= Beta(1,1). res <- ocPostprob(   nnE = c(10, 20, 30), truep = 0.40, p0 = 0.20, p1 = 0.30, tL = 0.60, tU = 0.80, parE = c(1, 1),   sim = 50, wiggle = TRUE, nnF = c(10, 20, 30) ) #> Warning: Advise to use sim >= 50000 to achieve convergence  res$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1     18.28         0.7        0.6        0.1       0.82        0.1       0.08  # We specify the distance in this example. res <- ocPostprob(   nnE = c(10, 20, 30), truep = 0.40, p0 = 0.20, p1 = 0.30, tL = 0.60, tU = 0.80, parE = c(1, 1),   sim = 50, wiggle = TRUE, nnF = c(10, 20, 30) ) #> Warning: Advise to use sim >= 50000 to achieve convergence  res$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1        18         0.7       0.64       0.06       0.78       0.06       0.16  # Here, nnE = nnF, and no wiggle room is allowed. Random distance also not supplied. res <- ocPostprob(   nnE = c(10, 20, 30), truep = 0.40, p0 = 0.20, p1 = 0.30, tL = 0.60, tU = 0.80, parE = c(1, 1),   sim = 50, wiggle = FALSE, nnF = c(10, 20, 30) ) #> Warning: Advise to use sim >= 50000 to achieve convergence  res$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      19.2        0.66       0.66          0       0.84          0       0.16  # Here, we only have one Futility and Efficacy look or stop. res <- ocPostprob(   nnE = c(10), truep = 0.40, p0 = 0.20, p1 = 0.30, tL = 0.60, tU = 0.80, parE = c(1, 1),   sim = 50, wiggle = FALSE, nnF = 10 ) #> Warning: Advise to use sim >= 50000 to achieve convergence  res$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1        10           0          0          0       0.28       0.04       0.68  # Here, we only have one Futility but many Efficacy looks or stop. res <- ocPostprob(   nnE = c(10, 20, 30), truep = 0.40, p0 = 0.20, p1 = 0.30, tL = 0.60, tU = 0.80, parE = c(1, 1),   sim = 50, wiggle = FALSE, nnF = 10 ) #> Warning: Advise to use sim >= 50000 to achieve convergence  res$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      20.4        0.64       0.56       0.08       0.64       0.08       0.28"},{"path":[]},{"path":"https://genentech.github.io/phase1b/reference/ocPostprobDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Operating characteristics of Posterior Probability method with Beta Prior on the Control or Standard of Care Arm ‚Äî ocPostprobDist","text":"","code":"ocPostprobDist(   nnE,   truep,   deltaE,   deltaF,   relativeDelta = FALSE,   tL,   tU,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   wiggle = TRUE,   sim = 50000,   nnF = nnE )"},{"path":"https://genentech.github.io/phase1b/reference/ocPostprobDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Operating characteristics of Posterior Probability method with Beta Prior on the Control or Standard of Care Arm ‚Äî ocPostprobDist","text":"nnE (numeric): sample size sizes study can stopped Efficacy decision. different Futility decision, specify nnF. truep (number): assumed true response rate. deltaE (number): margin response rate treatment group better standard care group. Delta Efficacy used calculate P(truep > P_S + deltaE) exceed threshold tU stop Efficacy. DeltaE can also negative non-inferiority setting. See also note. deltaF (number): margin response rate treatment group better standard care group. Delta Futility used calculate  P(truep > P_S - deltaF) exceed threshold tL stop Futility.DeltaF can also negative non-inferiority setting. See also note. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients included margin treatment control group. See note. tL (number): posterior probability threshold p0. tU (number): posterior probability threshold p1. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. parS (numeric matrix): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. See details. wiggle (flag): generate random look locations (default). TRUE, optional specify dist (see @details). sim (number): number simulations. nnF (numeric): sample size sizes study can stopped Futility decision different Efficacy decision.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPostprobDist.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Operating characteristics of Posterior Probability method with Beta Prior on the Control or Standard of Care Arm ‚Äî ocPostprobDist","text":"trial stopped Efficacy posterior probability assumed true response rate truep better control arm least deltaE, larger tU. Analogously, trial stopped Efficacy posterior probability assumed true response rate truep better control arm least deltaF, larger tL Futility looks. criteria met, trial continued maximum sample size, may reach decision \"gray zone\".following represents stopping criteria Efficacy Futility respectively. Stop criteria Efficacy : Pr(RR > P_S + deltaE) > tU Stop criteria Futility : Pr(RR < P_S + deltaF) > tL truep assumed true rate response p1 p0 respectively thresholds Efficacy Futility respectively. Resulting operating characteristics include following: ExpectedN: expected number patients trials PrStopEarly: probability stop trial early (reaching maximum sample size) PrEarlyEff: probability Early Go decision PrEarlyFut: probability Early Stop decision PrEfficacy: probability Go decision PrFutility: probability Stop decision PrGrayZone: probability Go Stop ,\"Evaluate\" Gray decision zone","code":""},{"path":[]},{"path":"https://genentech.github.io/phase1b/reference/ocPostprobDist.html","id":"delta-","dir":"Reference","previous_headings":"","what":"Delta :","title":"Calculate Operating characteristics of Posterior Probability method with Beta Prior on the Control or Standard of Care Arm ‚Äî ocPostprobDist","text":"desired improvement denoted deltaE deltaF two options exist use: absolute case relativeDelta = FALSE relative relativeDelta = TRUE. absolute case define absolute delta, greater P_S, response rate standard care control S group posterior Pr(truep > P_S + deltaE | data) Efficacy looks Pr(truep > P_S + deltaF | data) Futility looks. relative case, suppose treatment group's response rate assumed greater P_S + (1-P_S) * delta posterior Pr(truep > P_S + (1 - P_S) * deltaE | data) Efficacy looks Pr(truep > P_S + (1 - P_S) * deltaF | data) Futility looks.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPostprobDist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Operating characteristics of Posterior Probability method with Beta Prior on the Control or Standard of Care Arm ‚Äî ocPostprobDist","text":"","code":"# operating characteristics for posterior probability method with beta prior on SOC # For three looks of 10, 20 and 30 we have the following assumptions : # True response rate or truep of the treatment group = 40% # The following are the Go and Stop rules respectively : # Prior of treatment arm parE= Beta(1,1). # Without random distance allowed for Futility and Efficacy Looks. res1 <- ocPostprobDist(   nnE = c(10, 20, 30),   truep = 0.4,   deltaE = 0.1,   deltaF = -0.1,   tL = 0.6,   tU = 0.6,   parE = c(1, 1),   parS = c(5, 25),   sim = 50,   wiggle = FALSE ) #> Warning: Advise to use sim >= 50000 to achieve convergence  res1$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1        16        0.72          0       0.72          0       0.84       0.16  # Allow random distance for Efficacy and Futility looks. res2 <- ocPostprobDist(   nnE = c(10, 20, 30),   truep = 0.4,   deltaE = 0.1,   deltaF = -0.1,   tL = 0.6,   tU = 0.6,   parE = c(1, 1),   parS = c(5, 25),   sim = 50,   wiggle = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence  res2$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1     14.18         0.9       0.06       0.84       0.06       0.88       0.06  # Allow Futility analysis only at the end. res4 <- ocPostprobDist(   nnE = c(10, 20, 30),   truep = 0.4,   deltaE = 0.1,   deltaF = -0.1,   tL = 0.6,   tU = 0.6,   parE = c(1, 1),   parS = c(5, 25),   sim = 50,   wiggle = TRUE,   nnF = 30 ) #> Warning: Advise to use sim >= 50000 to achieve convergence  res4$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1        30           0          0          0          0       0.82       0.18"},{"path":"https://genentech.github.io/phase1b/reference/ocPredprob.html","id":null,"dir":"Reference","previous_headings":"","what":"Operating Characteristics for Predictive Probability method ‚Äî ocPredprob","title":"Operating Characteristics for Predictive Probability method ‚Äî ocPredprob","text":"Calculate operating characteristics predictive probability method. assumed true response rate truep. Trials can stop Futility Efficacy. Trials can also stop Interim Final Futility Efficacy. two variations decision rule, Decision 1 Decision 2, evaluate decision Interim Final, Futility Efficacy. Decision 1 used decision1 == TRUE default setting.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPredprob.html","id":"decision-","dir":"Reference","previous_headings":"","what":"Decision 1:","title":"Operating Characteristics for Predictive Probability method ‚Äî ocPredprob","text":"criteria Decision 1 Interim looks : interim GO =  P(successful trial final) > phiU interim STOP = P(successful trial final) < phiL criteria Decision 1 Final looks : Final GO = P( RR > p0 | data) > tT Final STOP = P( RR > p0 | data ) < tT","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPredprob.html","id":"decision--1","dir":"Reference","previous_headings":"","what":"Decision 2:","title":"Operating Characteristics for Predictive Probability method ‚Äî ocPredprob","text":"criteria Decision 2 Interim looks : Interim GO : P ( success final) > phiU Interim STOP : P (failure final ) > phiFu criteria Decision 2 Futility looks : Final GO = P( RR > p0) > tT Final STOP = P( RR  < p1) > tF","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPredprob.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Operating Characteristics for Predictive Probability method ‚Äî ocPredprob","text":"","code":"ocPredprob(   nnE,   truep,   p0,   phiU,   p1 = p0,   tT = 1 - tF,   tF = 1 - tT,   phiL = 1 - phiFu,   phiFu = 1 - phiL,   parE = c(1, 1),   sim = 50000,   wiggle = FALSE,   nnF = nnE,   decision1 = TRUE )"},{"path":"https://genentech.github.io/phase1b/reference/ocPredprob.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Operating Characteristics for Predictive Probability method ‚Äî ocPredprob","text":"nnE (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnE) = 1 Efficacy looks performed. truep (number): assumed true response rate true rate (scenario). p0 (number): lower Futility threshold response rate. phiU (number): upper threshold predictive probability. p1 (number): upper Futility threshold response rate. tT (number): threshold assumed truep exceeds acceptable threshold p0. tF (number): threshold assumed truep exceed threshold p1. phiL (number): lower threshold predictive probability. phiFu (number): upper threshold predictive probability. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. sim (number): number simulations. wiggle (flag): generate random look locations (default). wiggle = TRUE nnE = nnF, wiggled looks nnE nnF. nnF (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnF) = 1 Futility looks performed. decision1 (flag): Flag decision1 = TRUE Decision 1 rules used, otherwise Decision 2 rules used.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPredprob.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Operating Characteristics for Predictive Probability method ‚Äî ocPredprob","text":"list following elements: oc: matrix operating characteristics following details: ExpectedN: expected number patients trials PrStopEarly: probability stop trial early (reaching maximum sample size) PrEarlyEff: probability Early Go decision PrEarlyFut: probability Early Stop decision PrEfficacy: probability Go decision PrFutility: probability Stop decision PrGrayZone: probability Go Stop ,\"Evaluate\" Gray decision zone Decision : numeric results TRUE Go decision, FALSE Stop NA gray zone. SampleSize : numeric sample sizes nnE nnF . wiggled_nnE : user input nnE random distance applied. wiggled_nnF : user input nnF random distance applied. wiggled_dist : magnitude random distance applied order input looks. params : user input arguments.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPredprob.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Operating Characteristics for Predictive Probability method ‚Äî ocPredprob","text":"","code":"# Here we illustrate an example for Decision 1 with the following assumptions : # True response rate or truep of the treatment group = 40% # The following are the Final Stop rules respectively : # - Final look for Efficacy: Pr( RR > 25% ) > 60% or P( RR > p0) > tT # - Final look for Futility: Pr( RR < 25% ) < 60% or P(RR > p0) < tT # - Interim look for Efficacy: Pr( success at final ) > 80% or P(success at final) > phiU # - Interim look for Futility: Pr( failure at final ) < 20% or P(success at final) < phiL # We assume a prior of treatment arm parE = Beta(1,1), unless otherwise indicated.  # Decision 1 with no wiggle. set.seed(20) result <- ocPredprob(   nnE = c(10, 20),   truep = 0.4,   p0 = 0.25,   tT = 0.6,   phiL = 0.2,   phiU = 0.8,   parE = c(1, 1),   sim = 50,   wiggle = FALSE,   decision1 = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence result$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      12.6        0.74          0       0.74        0.2        0.8          0  # Decision 1 with wiggle. result <- ocPredprob(   nnE = c(10, 20),   truep = 0.4,   p0 = 0.25,   tT = 0.6,   phiL = 0.2,   phiU = 0.8,   parE = c(1, 1),   sim = 50,   wiggle = TRUE,   nnF = c(10, 20),   decision1 = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence result$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      13.3         0.7          0        0.7       0.22       0.78          0  # Decision 1 with separate Futility and Efficacy looks at interim and final without wiggle. result <- ocPredprob(   nnE = c(10, 25, 30),   truep = 0.4,   p0 = 0.25,   p1 = 0.2,   tT = 0.6,   phiL = 0.2,   phiU = 0.8,   parE = c(1, 1),   sim = 50,   wiggle = FALSE,   nnF = c(10, 15, 20),   decision1 = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence result$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1        16           1          0          1          0          1          0  # Decision 1 with separate Futility and Efficacy looks at interim and final with wiggle. result <- ocPredprob(   nnE = c(10, 25, 30),   truep = 0.4,   p0 = 0.25,   p1 = 0.2,   tT = 0.6,   phiL = 0.2,   phiU = 0.8,   parE = c(1, 1),   sim = 50,   wiggle = TRUE,   nnF = c(10, 15, 20),   decision1 = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence result$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1     14.82        0.96          0       0.96       0.04       0.96          0  # Here we illustrate an example for Decision 2 with the following assumptions : # True response rate or truep of the treatment group = 60% # The following are the Final Stop rules respectively : # - Final look for Efficacy: Pr( RR > 25% ) > 60% or P(RR > p0) > tT # - Final look for Futility: Pr( RR < 25% ) < 60% or P(RR < p1) > tF # - Interim look for Efficacy: Pr( success at final ) > 80% or P(success at final) > phiU # - Interim look for Futility: Pr( failure at final ) > 80% or P(failure at final) > phiFu # We assume a prior of treatment arm parE = Beta(1,1), unless otherwise indicated.  # Decision 2 without wiggle. result <- ocPredprob(   nnE = c(10, 20),   truep = 0.6,   p0 = 0.25,   p1 = 0.25,   tT = 0.6,   tF = 0.6,   phiU = 0.8,   phiFu = 0.8,   parE = c(1, 1),   sim = 50,   wiggle = FALSE,   nnF = c(10, 20),   decision1 = FALSE ) #> Warning: Advise to use sim >= 50000 to achieve convergence result$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1        10           1       0.98       0.02       0.98       0.02          0  # Decision 2 with wiggle and with Futility only at final with non-uniform beta prior parE. result <- ocPredprob(   nnE = c(10, 25, 30),   truep = 0.6,   p0 = 0.25,   p1 = 0.25,   tT = 0.6,   tF = 0.6,   phiL = 0.8,   phiU = 0.8,   parE = c(11, 19),   sim = 50,   wiggle = TRUE,   nnF = 30,   decision1 = FALSE ) #> Warning: Advise to use sim >= 50000 to achieve convergence result$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      9.96           1          1          0          1          0          0"},{"path":"https://genentech.github.io/phase1b/reference/ocPredprobDist.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate operating characteristics for predictive probability method with beta prior on SOC response rate (gray zone allowed in the final analysis for Decision 2) ‚Äî ocPredprobDist","title":"Calculate operating characteristics for predictive probability method with beta prior on SOC response rate (gray zone allowed in the final analysis for Decision 2) ‚Äî ocPredprobDist","text":"formulas expressions predictive probability, refer predprobDist().","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPredprobDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate operating characteristics for predictive probability method with beta prior on SOC response rate (gray zone allowed in the final analysis for Decision 2) ‚Äî ocPredprobDist","text":"","code":"ocPredprobDist(   nnE,   truep,   deltaE,   deltaF,   phiU,   xS = 0,   nS = 0,   relativeDelta = FALSE,   tT = 1 - tF,   tF = 1 - tT,   phiL = 1 - phiFu,   phiFu = 1 - phiL,   parE = c(1, 1),   parS = c(1, 1),   weights = weights,   weightsS = weightsS,   sim = 50000,   wiggle = FALSE,   nnF = nnE,   decision1 = TRUE )"},{"path":"https://genentech.github.io/phase1b/reference/ocPredprobDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate operating characteristics for predictive probability method with beta prior on SOC response rate (gray zone allowed in the final analysis for Decision 2) ‚Äî ocPredprobDist","text":"nnE (numeric): sample size sizes study can stopped Efficacy decision. different Futility decision, specify nnF. truep (number): assumed true response rate true rate (scenario). deltaE (number): margin response rate treatment group better standard care control S group Efficacy looks . Note can also negative well. deltaF (number): margin response rate treatment group better standard care control S group Futility looks . Note can also negative well. phiU (number): upper threshold predictive probability. xS (number): number successes S group interim. nS (number): number patients E group interim. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients. See postprobDist(). tT (number): threshold assumed truep exceeds acceptable threshold p0. tF (number): threshold assumed truep exceed threshold p1. phiL (number): lower threshold predictive probability. phiFu (number): upper threshold predictive probability. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. parS (numeric): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. weights (numeric): mixture weights beta mixture prior. weightsS (numeric): weights S group. sim (number): number simulations. wiggle (flag): generate random look locations (default). wiggle = TRUE nnE = nnF, wiggled looks nnE nnF. nnF (numeric): sample size sizes study can stopped Futility decision different Efficacy decision. decision1 (flag): Flag decision1 = TRUE Decision 1 rules used, otherwise Decision 2 rules used.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPredprobDist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate operating characteristics for predictive probability method with beta prior on SOC response rate (gray zone allowed in the final analysis for Decision 2) ‚Äî ocPredprobDist","text":"list following elements: oc: matrix operating characteristics following details: ExpectedN: expected number patients trials PrStopEarly: probability stop trial early (reaching maximum sample size) PrEarlyEff: probability Early Go decision PrEarlyFut: probability Early Stop decision PrEfficacy: probability Go decision PrFutility: probability Stop decision PrGrayZone: probability Go Stop ,\"Evaluate\" Gray decision zone Decision : numeric results TRUE Go decision, FALSE Stop NA gray zone. SampleSize : numeric sample sizes nnE nnF . wiggled_nnE : user input nnE random distance applied. wiggled_nnF : user input nnF random distance applied. wiggled_dist : magnitude random distance applied order input looks. params : user input arguments.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPredprobDist.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate operating characteristics for predictive probability method with beta prior on SOC response rate (gray zone allowed in the final analysis for Decision 2) ‚Äî ocPredprobDist","text":"rules Stop, Go Gray Zone (applicable) ocPredprob(). However compared ocPredprob(), predictive probability response rate > p0 used reach decisions, response rate - p0 > 0 replaced response rate - p0 > delta, reason p0 now also uncertain, quantified posterior distribution. therefore understand margin difference experimental control group, refer two ways calculating delta postprobDist(). margin delta postprobDist() longer used however Go decision evaluated, margin deltaE instead employed, Stop decision evaluated, margin deltaF instead employed lieu delta. Decision 1 Decision 2 share Go rule interim final, margin difference accounted following manner final looks: Pr(P_E > p0 + deltaE | data) > tT  absolute case Pr(P_E > (1-p0)*deltaE | data) > tT relative case mentioned, rules ocPredprobDist() ocPredprob() Decision 1 Decision 2 , margin difference differ depending whether Go Stop decision (deltaE deltaF employed instead delta). highlight another distinction ocPredprob() ocPredprobDist(), seen evaluation final futility look ocPredprobDist() p1 used instead p0 : Pr(P_E < p1 + deltaF | data) > tF absolute case Pr(P_E < (1-p1)*deltaF | data) > tF relative case","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocPredprobDist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate operating characteristics for predictive probability method with beta prior on SOC response rate (gray zone allowed in the final analysis for Decision 2) ‚Äî ocPredprobDist","text":"","code":"# Here we illustrate an example for Decision 1 with the following assumptions : # Efficacy Looks and Futility looks are identical at sample size of 10, 20 and 30. # True response rate or truep of the treatment group = 40% # Desired difference to Standard of Care for Efficacy and Futility = 10% # The following are the Final Stop rules respectively : # - Final look for Efficacy: Pr( RR + deltaE > 25% ) > 60% # - Final look for Futility: Pr( RR + deltaF < 25% ) < 60% # - Interim look for Efficacy: Pr( success at final ) > 80% # - Interim look for Futility: Pr( failure at final ) < 20% # We assume a prior of treatment arm parE = Beta(1,1), unless otherwise indicated.  set.seed(20) result <- ocPredprobDist(   nnE = c(10, 20, 30),   truep = 0.40,   deltaE = 0.10,   deltaF = 0.10,   relativeDelta = FALSE,   tT = 0.6,   phiU = 0.80,   phiL = 0.20,   parE = c(1, 1),   parS = c(5, 25),   weights = 1,   weightsS = 1,   sim = 50,   wiggle = FALSE,   decision1 = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence result$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      16.4         0.8       0.66       0.14       0.82       0.18          0   # Here we illustrate an example for Decision 1 with the following assumptions : # Efficacy Looks are at sample size of 10, 20 and 30 where sample looks are allowed to wiggle. # Futility is only at sample size of 20 and 30. We won't do a futility at 10 patients. # True response rate or truep of the treatment group = 40% # Desired difference to Standard of Care for Efficacy and Futility is 10% and -10% respectively. # Grey zone occurs due to different posterior probability distribution in the Efficacy and Futility rules. # Delta calculation is absolute case. The following are the Final Stop rules respectively : # - Final look for Efficacy: Pr( RR + deltaE > 25% ) > 60% # - Final look for Futility: Pr( RR + deltaF < 25% ) < 60% # - Interim look for Efficacy: Pr( success at final ) > 80% # - Interim look for Futility: Pr( failure at final ) < 20% # We assume a prior of treatment arm parE = Beta(1,1), unless otherwise indicated. # set.seed(20) result <- ocPredprobDist(   nnE = c(10, 20, 30),   truep = 0.40,   deltaE = 0.10,   deltaF = -0.10,   relativeDelta = FALSE,   tT = 0.6,   phiU = 0.80,   phiL = 0.20,   parE = c(1, 1),   parS = c(5, 25),   weights = 1,   weightsS = 1,   sim = 50,   nnF = c(20, 30),   wiggle = TRUE,   decision1 = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence result$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      25.8        0.28       0.28          0       0.96          0       0.04  # Here we illustrate an example for Decision 2 with the following assumptions : # Efficacy Looks and Futility looks are identical at sample size of 10, 20 and 30 # where sample looks are allowed to wiggle. # True response rate or truep of the treatment group = 40% # Desired difference to Standard of Care for Efficacy and Futility = 50% # Delta calculation is absolute case. The following are the Final Stop rules respectively : # - Final look for Efficacy: Pr( RR + deltaE > 25% ) > 60% or P(RR + deltaE > p0) > tT # - Final look for Futility: Pr( RR + deltaF < 25% ) < 60% or P(RR + deltaF > p0) < tT # - Interim look for Efficacy: Pr( success at final ) > 80% or P(success at final) > phiU # - Interim look for Futility: Pr( failure at final ) < 20% or #   P(success at final) < phiL # We assume a prior of treatment arm parE = Beta(1,1), unless otherwise indicated.  set.seed(20) result <- ocPredprobDist(   nnE = c(10, 20, 30),   truep = 0.40,   deltaE = 0.5,   deltaF = 0.5,   relativeDelta = FALSE,   tT = 0.6,   phiU = 0.80,   phiFu = 0.7,   parE = c(1, 1),   parS = c(5, 25),   weights = 1,   weightsS = 1,   sim = 50,   nnF = c(10, 20, 30),   wiggle = TRUE,   decision1 = FALSE ) #> Warning: Advise to use sim >= 50000 to achieve convergence result$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      23.8        0.42          0       0.42          0          1          0  # Here we illustrate an example for Decision 2 with the following assumptions : # Efficacy Looks and Futility looks are identical at sample size of 10, 20 and 30 # where wiggle is allowed. # True response rate or truep of the treatment group = 40% # Desired difference to Standard of Care for Efficacy and Futility = 50% # Delta calculation is relative case. The following are the Final Stop rules respectively : # - Final look for Efficacy: P( P_S + (1-P_S)*deltaE > 25% ) > 60% # - Final look for Futility: P( P_S + (1-P_S)*deltaEF < 25% ) < 60% # - Interim look for Efficacy: P( success at final ) > 80% # - Interim look for Futility: P( failure at final ) < 20% # We assume a prior of treatment arm parE = Beta(1,1), unless otherwise indicated.  set.seed(20) result <- ocPredprobDist(   nnE = c(10, 20, 30),   truep = 0.40,   deltaE = 0.5,   deltaF = 0.5,   relativeDelta = TRUE,   tT = 0.6,   phiU = 0.80,   phiFu = 0.7,   parE = c(1, 1),   parS = c(5, 25),   weights = 1,   weightsS = 1,   sim = 50,   nnF = c(10, 20, 30),   wiggle = TRUE,   decision1 = FALSE ) #> Warning: Advise to use sim >= 50000 to achieve convergence result$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      24.2         0.4          0        0.4          0          1          0"},{"path":"https://genentech.github.io/phase1b/reference/ocRctPostprobDist.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate operating characteristics for RCT against SOC, using the posterior probability method with beta priors ‚Äî ocRctPostprobDist","title":"Calculate operating characteristics for RCT against SOC, using the posterior probability method with beta priors ‚Äî ocRctPostprobDist","text":"emulate randomized-controlled trial setting given sample size, exists number patients enrolled either standard care (SOC) control arm, treatment experimental arm. allocation patients depend randomization ratio set user rounded next higher integer. Therefore sequence patients determined start, number patients arms constant across trial simulations, however number patients within control treatment arm determined randomisation ratio. Interim looks sample sizes final sample size.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocRctPostprobDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate operating characteristics for RCT against SOC, using the posterior probability method with beta priors ‚Äî ocRctPostprobDist","text":"","code":"ocRctPostprobDist(   nnE,   pE,   pS,   deltaE,   deltaF,   relativeDelta = FALSE,   tL,   tU,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   randRatio = 1,   sim,   wiggle = FALSE,   nnF = nnE )"},{"path":"https://genentech.github.io/phase1b/reference/ocRctPostprobDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate operating characteristics for RCT against SOC, using the posterior probability method with beta priors ‚Äî ocRctPostprobDist","text":"nnE (numeric): sample size sizes study can stopped Efficacy decision. different Futility decision, specify nnF. pE (number): Response rate Treatment group. pS (number): Response rate Control group. deltaE (number): margin response rate treatment group better standard care control S group Efficacy looks . Note can also negative well. deltaF (number): margin response rate treatment group better standard care control S group Futility looks . Note can also negative well. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients included margin treatment control group. See note. tL (number): posterior probability threshold p0. tU (number): posterior probability threshold p1. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. parS (numeric matrix): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. See details. randRatio (numeric): randomisation ratio treatment control. Must greater 0 maximum 1. sim (number): number simulations. wiggle (flag): generate random look locations (default). TRUE, optional specify dist (see @details). nnF (numeric): sample size sizes study can stopped Futility decision different Efficacy decision.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocRctPostprobDist.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate operating characteristics for RCT against SOC, using the posterior probability method with beta priors ‚Äî ocRctPostprobDist","text":"Final looks performed maximum sample size. interim final look, futility efficacy can performed. rules Stop, Go Gray Zone (applicable), use beta priors ocPostprobDist() difference emulate randomized-controlled trial setting. returned value list following elements: oc: matrix operating characteristics following details: ExpectedN: expected number patients trials treatment SOC group ExpectedNactive : mean number patients treatment arm ExpectedNcontrol: mean number patients control arm PrStopEarly: probability stop trial early (reaching maximum sample size) PrEarlyEff: probability Early Go decision PrEarlyFut: probability Early Stop decision PrEfficacy: probability Go decision PrFutility: probability Stop decision PrGrayZone: probability Evaluate \"Gray Zone\" decision (Go Stop) Decision : numeric results TRUE Go, FALSE Stop NA Evaluate decision. SampleSize : numeric sample sizes nnE nnF . wiggled_nnE : user input nnE random distance applied. wiggled_nnF : user input nnF random distance applied. wiggled_dist : magnitude random distance applied order input looks. params : user input arguments.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocRctPostprobDist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate operating characteristics for RCT against SOC, using the posterior probability method with beta priors ‚Äî ocRctPostprobDist","text":"","code":"# When `relativeDelta = TRUE`: set.seed(2000) ocRctPostprobDist(   nnE = c(10, 20, 30),   pE = 0.4,   pS = 0.3,   deltaE = 0.15,   deltaF = 0.05,   relativeDelta = TRUE,   tL = 0.2,   tU = 0.8,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   randRatio = 1,   sim = 50,   wiggle = FALSE,   nnF = c(10, 20, 30) ) #> Warning: Advise to use sim >= 50000 to achieve convergence #> $oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      12.2        0.94        0.2       0.74       0.22       0.78          0 #>   ExpectedNactive ExpectedNcontrol #> 1            6.14             6.06 #>  #> $ExpectedN #> [1] 12.2 #>  #> $ExpectedNactive #> [1] 6.14 #>  #> $ExpectedNcontrol #> [1] 6.06 #>  #> $Decision #>  [1]  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE #> [13] FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE #> [25] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE #> [37]  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE #> [49] FALSE FALSE #>  #> $SampleSize #>  [1] 20 10 10 30 10 10 10 30 10 10 20 10 10 30 10 10 10 10 20 10 10 10 10 10 10 #> [26] 10 10 10 10 10 10 20 10 10 10 10 10 10 10 10 10 10 10 10 10 20 10 10 10 10 #>  #> $SampleSizeActive #>  [1] 10  5  5 15  5  6  5 15  4  3  8  5  4 15  6  7  6  6  9  4  3  5  7  5  4 #> [26]  7  6  4  4  5  7 11  8  5  6  6  4  4  4  6  6  7  3  3  3 10  7  3  5  6 #>  #> $SampleSizeControl #>  [1] 10  5  5 15  5  4  5 15  6  7 12  5  6 15  4  3  4  4 11  6  7  5  3  5  6 #> [26]  3  4  6  6  5  3  9  2  5  4  4  6  6  6  4  4  3  7  7  7 10  3  7  5  4 #>  #> $union_nn #> [1] 10 20 30 #>  #> $wiggled_nnE #> [1] 10 20 30 #>  #> $wiggled_nnF #> [1] 10 20 30 #>  #> $wiggle_dist #> [1] 0 #>  #> $params #> $params[[1]] #> ocRctPostprobDist #>  #> $params$nnE #> c(10, 20, 30) #>  #> $params$pE #> [1] 0.4 #>  #> $params$pS #> [1] 0.3 #>  #> $params$deltaE #> [1] 0.15 #>  #> $params$deltaF #> [1] 0.05 #>  #> $params$relativeDelta #> [1] TRUE #>  #> $params$tL #> [1] 0.2 #>  #> $params$tU #> [1] 0.8 #>  #> $params$parE #> c(a = 1, b = 1) #>  #> $params$parS #> c(a = 1, b = 1) #>  #> $params$randRatio #> [1] 1 #>  #> $params$sim #> [1] 50 #>  #> $params$wiggle #> [1] FALSE #>  #> $params$nnF #> c(10, 20, 30) #>  #>   # When `relativeDelta = FALSE`: set.seed(2000) ocRctPostprobDist(   nnE = c(10, 20, 30),   pE = 0.4,   pS = 0.3,   deltaE = 0.15,   deltaF = 0.05,   relativeDelta = FALSE,   tL = 0.2,   tU = 0.8,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   randRatio = 1,   sim = 50,   wiggle = FALSE,   nnF = c(10, 20, 30) ) #> Warning: Advise to use sim >= 50000 to achieve convergence #> $oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      12.8        0.92       0.22        0.7       0.24       0.74       0.02 #>   ExpectedNactive ExpectedNcontrol #> 1            6.48             6.32 #>  #> $ExpectedN #> [1] 12.8 #>  #> $ExpectedNactive #> [1] 6.48 #>  #> $ExpectedNcontrol #> [1] 6.32 #>  #> $Decision #>  [1]  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE #> [13]    NA  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE #> [25] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE #> [37]  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE #> [49] FALSE FALSE #>  #> $SampleSize #>  [1] 20 10 10 30 10 10 10 30 10 10 20 10 30 30 10 10 10 10 20 10 10 10 10 10 10 #> [26] 20 10 10 10 10 10 20 10 10 10 10 10 10 10 10 10 10 10 10 10 20 10 10 10 10 #>  #> $SampleSizeActive #>  [1] 10  5  5 15  5  6  5 15  4  3  8  5 15 15  6  7  6  6  9  4  3  5  7  5  4 #> [26] 13  6  4  4  5  7 11  8  5  6  6  4  4  4  6  6  7  3  3  3 10  7  3  5  6 #>  #> $SampleSizeControl #>  [1] 10  5  5 15  5  4  5 15  6  7 12  5 15 15  4  3  4  4 11  6  7  5  3  5  6 #> [26]  7  4  6  6  5  3  9  2  5  4  4  6  6  6  4  4  3  7  7  7 10  3  7  5  4 #>  #> $union_nn #> [1] 10 20 30 #>  #> $wiggled_nnE #> [1] 10 20 30 #>  #> $wiggled_nnF #> [1] 10 20 30 #>  #> $wiggle_dist #> [1] 0 #>  #> $params #> $params[[1]] #> ocRctPostprobDist #>  #> $params$nnE #> c(10, 20, 30) #>  #> $params$pE #> [1] 0.4 #>  #> $params$pS #> [1] 0.3 #>  #> $params$deltaE #> [1] 0.15 #>  #> $params$deltaF #> [1] 0.05 #>  #> $params$relativeDelta #> [1] FALSE #>  #> $params$tL #> [1] 0.2 #>  #> $params$tU #> [1] 0.8 #>  #> $params$parE #> c(a = 1, b = 1) #>  #> $params$parS #> c(a = 1, b = 1) #>  #> $params$randRatio #> [1] 1 #>  #> $params$sim #> [1] 50 #>  #> $params$wiggle #> [1] FALSE #>  #> $params$nnF #> c(10, 20, 30) #>  #>   # Only one Futility look: set.seed(2000) ocRctPostprobDist(   nnE = c(10, 20, 30),   pE = 0.4,   pS = 0.3,   deltaE = 0.15,   deltaF = 0.05,   relativeDelta = FALSE,   tL = 0.2,   tU = 0.8,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   randRatio = 1,   sim = 50,   wiggle = FALSE,   nnF = 30 ) #> Warning: Advise to use sim >= 50000 to achieve convergence #> $oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1        26        0.24       0.24          0       0.26       0.48       0.26 #>   ExpectedNactive ExpectedNcontrol #> 1           12.98            13.02 #>  #> $ExpectedN #> [1] 26 #>  #> $ExpectedNactive #> [1] 12.98 #>  #> $ExpectedNcontrol #> [1] 13.02 #>  #> $Decision #>  [1]  TRUE FALSE FALSE FALSE    NA  TRUE    NA FALSE FALSE    NA FALSE FALSE #> [13]    NA  TRUE    NA FALSE    NA FALSE  TRUE FALSE  TRUE FALSE  TRUE    NA #> [25]    NA  TRUE    NA  TRUE    NA  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE #> [37]  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE    NA    NA FALSE  TRUE #> [49]    NA FALSE #>  #> $SampleSize #>  [1] 20 30 30 30 30 10 30 30 30 30 30 30 30 30 30 30 30 30 20 30 20 30 10 30 30 #> [26] 20 30 10 30 10 30 30 30 30 30 10 10 30 30 30 30 30 10 30 30 30 30 10 30 30 #>  #> $SampleSizeActive #>  [1] 10 15 15 15 15  6 15 15 15 15 15 15 15 15 15 15 15 15  9 15  9 15  7 15 15 #> [26] 13 15  4 15  5 15 15 15 15 15  6  4 15 15 15 15 15  3 15 15 15 15  3 15 15 #>  #> $SampleSizeControl #>  [1] 10 15 15 15 15  4 15 15 15 15 15 15 15 15 15 15 15 15 11 15 11 15  3 15 15 #> [26]  7 15  6 15  5 15 15 15 15 15  4  6 15 15 15 15 15  7 15 15 15 15  7 15 15 #>  #> $union_nn #> [1] 10 20 30 #>  #> $wiggled_nnE #> [1] 10 20 30 #>  #> $wiggled_nnF #> [1] 30 #>  #> $wiggle_dist #> [1] 0 #>  #> $params #> $params[[1]] #> ocRctPostprobDist #>  #> $params$nnE #> c(10, 20, 30) #>  #> $params$pE #> [1] 0.4 #>  #> $params$pS #> [1] 0.3 #>  #> $params$deltaE #> [1] 0.15 #>  #> $params$deltaF #> [1] 0.05 #>  #> $params$relativeDelta #> [1] FALSE #>  #> $params$tL #> [1] 0.2 #>  #> $params$tU #> [1] 0.8 #>  #> $params$parE #> c(a = 1, b = 1) #>  #> $params$parS #> c(a = 1, b = 1) #>  #> $params$randRatio #> [1] 1 #>  #> $params$sim #> [1] 50 #>  #> $params$wiggle #> [1] FALSE #>  #> $params$nnF #> [1] 30 #>  #>   # When `deltaF = 0`: set.seed(2000) ocRctPostprobDist(   nnE = c(10, 20, 30),   pE = 0.4,   pS = 0.3,   deltaE = 0.15,   deltaF = 0,   relativeDelta = FALSE,   tL = 0.2,   tU = 0.8,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   randRatio = 1,   sim = 50,   wiggle = FALSE,   nnF = c(10, 20, 30) ) #> Warning: Advise to use sim >= 50000 to achieve convergence #> $oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      11.4        0.98        0.2       0.78       0.22       0.78          0 #>   ExpectedNactive ExpectedNcontrol #> 1            5.74             5.66 #>  #> $ExpectedN #> [1] 11.4 #>  #> $ExpectedNactive #> [1] 5.74 #>  #> $ExpectedNcontrol #> [1] 5.66 #>  #> $Decision #>  [1]  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE #> [13] FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE #> [25] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE #> [37]  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE #> [49] FALSE FALSE #>  #> $SampleSize #>  [1] 20 10 10 10 10 10 10 10 10 10 20 10 10 30 10 10 10 10 20 10 10 10 10 10 10 #> [26] 10 10 10 10 10 10 20 10 10 10 10 10 10 10 10 10 10 10 10 10 20 10 10 10 10 #>  #> $SampleSizeActive #>  [1] 10  5  5  5  5  6  5  5  4  3  8  5  4 15  6  7  6  6  9  4  3  5  7  5  4 #> [26]  7  6  4  4  5  7 11  8  5  6  6  4  4  4  6  6  7  3  3  3 10  7  3  5  6 #>  #> $SampleSizeControl #>  [1] 10  5  5  5  5  4  5  5  6  7 12  5  6 15  4  3  4  4 11  6  7  5  3  5  6 #> [26]  3  4  6  6  5  3  9  2  5  4  4  6  6  6  4  4  3  7  7  7 10  3  7  5  4 #>  #> $union_nn #> [1] 10 20 30 #>  #> $wiggled_nnE #> [1] 10 20 30 #>  #> $wiggled_nnF #> [1] 10 20 30 #>  #> $wiggle_dist #> [1] 0 #>  #> $params #> $params[[1]] #> ocRctPostprobDist #>  #> $params$nnE #> c(10, 20, 30) #>  #> $params$pE #> [1] 0.4 #>  #> $params$pS #> [1] 0.3 #>  #> $params$deltaE #> [1] 0.15 #>  #> $params$deltaF #> [1] 0 #>  #> $params$relativeDelta #> [1] FALSE #>  #> $params$tL #> [1] 0.2 #>  #> $params$tU #> [1] 0.8 #>  #> $params$parE #> c(a = 1, b = 1) #>  #> $params$parS #> c(a = 1, b = 1) #>  #> $params$randRatio #> [1] 1 #>  #> $params$sim #> [1] 50 #>  #> $params$wiggle #> [1] FALSE #>  #> $params$nnF #> c(10, 20, 30) #>  #>"},{"path":"https://genentech.github.io/phase1b/reference/ocRctPredprobDist.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate operating characteristics for RCT against SOC, using the predictive probability method with beta priors ‚Äî ocRctPredprobDist","title":"Calculate operating characteristics for RCT against SOC, using the predictive probability method with beta priors ‚Äî ocRctPredprobDist","text":"emulate randomized-controlled trial setting given sample size, exists number patients enrolled either standard care (SOC) control arm, treatment experimental arm. allocation patients depend randomization ratio set user rounded next higher integer. Therefore sequence patients determined start, number patients arms constant across trial simulations, however number patients within control treatment arm determined randomisation ratio. Interim looks sample sizes final sample size.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocRctPredprobDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate operating characteristics for RCT against SOC, using the predictive probability method with beta priors ‚Äî ocRctPredprobDist","text":"","code":"ocRctPredprobDist(   nnE,   pE,   pS,   deltaE,   deltaF,   phiL = 1 - phiFu,   phiFu = 1 - phiL,   phiU,   relativeDelta = FALSE,   tT,   tF,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   weights,   weightsS,   randRatio = 1,   sim,   wiggle = FALSE,   nnF = nnE,   decision1 = TRUE )"},{"path":"https://genentech.github.io/phase1b/reference/ocRctPredprobDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate operating characteristics for RCT against SOC, using the predictive probability method with beta priors ‚Äî ocRctPredprobDist","text":"nnE (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnE) = 1 Efficacy looks performed. pE (number): Response rate Treatment group. pS (number): Response rate Control group. deltaE (number): margin response rate treatment group better standard care control S group Efficacy looks . Note can also negative well. deltaF (number): margin response rate treatment group better standard care control S group Futility looks . Note can also negative well. phiL (number): lower threshold predictive probability. phiFu (number): upper threshold predictive probability. phiU (number): upper threshold predictive probability. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients. See postprobDist(). tT (number): threshold assumed truep exceeds acceptable threshold p0. tF (number): threshold assumed truep exceed threshold p1. parE (numeric): alpha beta parameters prior treatment population. Default set alpha = 1, beta = 1, uniform prior. parS (numeric): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. weights (numeric): mixture weights beta mixture prior. weightsS (numeric): weights S group. randRatio (numeric): randomisation ratio treatment control. Must greater 0 maximum 1. sim (number): number simulations. wiggle (flag): generate random look locations (default). wiggle = TRUE nnE = nnF, wiggled looks nnE nnF. nnF (numeric): sample size sizes study can stopped Efficacy decision. 0 NULL length(nnF) = 1 Futility looks performed. decision1 (flag): Flag decision1 = TRUE Decision 1 rules used, otherwise Decision 2 rules used.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocRctPredprobDist.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate operating characteristics for RCT against SOC, using the predictive probability method with beta priors ‚Äî ocRctPredprobDist","text":"Final looks performed maximum sample size. interim final look, futility efficacy can performed. rules Stop, Go Gray Zone (applicable), use beta priors ocPredprobDist() difference emulate randomized-controlled trial setting. returned value list following elements: oc: matrix operating characteristics following details: ExpectedN: expected number patients trials treatment SOC group ExpectedNactive : mean number patients treatment arm ExpectedNcontrol: mean number patients control arm PrStopEarly: probability stop trial early (reaching maximum sample size) PrEarlyEff: probability Early Go decision PrEarlyFut: probability Early Stop decision PrEfficacy: probability Go decision PrFutility: probability Stop decision PrGrayZone: probability Evaluate \"Gray Zone\" decision (Go Stop) Decision : results logical TRUE Go, FALSE Stop NA Evaluate decision. SampleSize : numeric sample sizes nnE nnF . SampleSizeActive : numeric sample sizes treatment experimental arm. SampleSizeControl : numeric sample sizes either standard care (SOC) control arm. union_nn : unique nnE nnF looks. wiggled_nnE : user input nnE random distance applied. wiggled_nnF : user input nnF random distance applied. wiggled_dist : magnitude random distance applied order input looks. params : user input arguments.","code":""},{"path":"https://genentech.github.io/phase1b/reference/ocRctPredprobDist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate operating characteristics for RCT against SOC, using the predictive probability method with beta priors ‚Äî ocRctPredprobDist","text":"","code":"# When `relativeDelta = TRUE`: set.seed(2000) ocRctPredprobDist(   nnE = c(10, 20, 30),   pE = 0.3,   pS = 0.3,   deltaE = 0.2,   deltaF = 0.1,   phiU = 0.8,   phiFu = 0.2,   relativeDelta = TRUE,   tT = 0.6,   tF = 0.4,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   weights = 1,   weightsS = 1,   randRatio = 1,   sim = 50,   wiggle = FALSE,   nnF = c(10, 20, 30),   decision1 = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence #> $oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      11.2        0.96       0.12       0.84       0.14       0.84       0.02 #>   ExpectedNactive ExpectedNcontrol #> 1            5.62             5.58 #>  #> $Decision #>  [1]    NA FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> [13] FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE #> [25] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE #> [37] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE #> [49] FALSE FALSE #>  #> $SampleSize #>  [1] 30 10 10 10 10 10 10 10 10 10 10 10 10 30 10 10 10 10 20 10 10 10 10 10 10 #> [26] 10 10 10 10 20 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 #>  #> $SampleSizeActive #>  [1] 15  5  5  5  5  6  5  5  4  3  3  5  4 15  6  7  6  6  9  4  3  5  7  5  4 #> [26]  7  6  4  4 11  7  4  8  5  6  6  4  4  4  6  6  7  3  3  3  5  7  3  5  6 #>  #> $SampleSizeControl #>  [1] 15  5  5  5  5  4  5  5  6  7  7  5  6 15  4  3  4  4 11  6  7  5  3  5  6 #> [26]  3  4  6  6  9  3  6  2  5  4  4  6  6  6  4  4  3  7  7  7  5  3  7  5  4 #>  #> $union_nn #> [1] 10 20 30 #>  #> $wiggled_nnE #> [1] 10 20 30 #>  #> $wiggled_nnF #> [1] 10 20 30 #>  #> $wiggle_dist #> [1] NA #>  #> $params #> $params[[1]] #> ocRctPredprobDist #>  #> $params$nnE #> c(10, 20, 30) #>  #> $params$pE #> [1] 0.3 #>  #> $params$pS #> [1] 0.3 #>  #> $params$deltaE #> [1] 0.2 #>  #> $params$deltaF #> [1] 0.1 #>  #> $params$phiFu #> [1] 0.2 #>  #> $params$phiU #> [1] 0.8 #>  #> $params$relativeDelta #> [1] TRUE #>  #> $params$tT #> [1] 0.6 #>  #> $params$tF #> [1] 0.4 #>  #> $params$parE #> c(a = 1, b = 1) #>  #> $params$parS #> c(a = 1, b = 1) #>  #> $params$weights #> [1] 1 #>  #> $params$weightsS #> [1] 1 #>  #> $params$randRatio #> [1] 1 #>  #> $params$sim #> [1] 50 #>  #> $params$wiggle #> [1] FALSE #>  #> $params$nnF #> c(10, 20, 30) #>  #> $params$decision1 #> [1] TRUE #>  #>   # When `relativeDelta = FALSE`: set.seed(2000) ocRctPredprobDist(   nnE = c(10, 20, 30),   pE = 0.3,   pS = 0.3,   deltaE = 0.2,   deltaF = 0.1,   phiU = 0.8,   phiFu = 0.2,   relativeDelta = FALSE,   tT = 0.6,   tF = 0.4,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   weights = 1,   weightsS = 1,   randRatio = 1,   sim = 50,   wiggle = FALSE,   nnF = c(10, 20, 30),   decision1 = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence #> $oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1        11        0.98       0.04       0.94       0.04       0.94       0.02 #>   ExpectedNactive ExpectedNcontrol #> 1             5.5              5.5 #>  #> $Decision #>  [1]    NA FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> [25] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> [37] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE #> [49] FALSE FALSE #>  #> $SampleSize #>  [1] 30 10 10 10 10 10 10 10 10 10 10 10 10 20 10 10 10 10 10 10 10 10 10 10 10 #> [26] 10 10 10 10 10 10 10 10 10 10 20 10 10 10 10 10 10 10 10 10 10 10 20 10 10 #>  #> $SampleSizeActive #>  [1] 15  5  5  5  5  6  5  5  4  3  3  5  4  9  6  7  6  6  5  4  3  5  7  5  4 #> [26]  7  6  4  4  5  7  4  8  5  6 11  4  4  4  6  6  7  3  3  3  5  7  8  5  6 #>  #> $SampleSizeControl #>  [1] 15  5  5  5  5  4  5  5  6  7  7  5  6 11  4  3  4  4  5  6  7  5  3  5  6 #> [26]  3  4  6  6  5  3  6  2  5  4  9  6  6  6  4  4  3  7  7  7  5  3 12  5  4 #>  #> $union_nn #> [1] 10 20 30 #>  #> $wiggled_nnE #> [1] 10 20 30 #>  #> $wiggled_nnF #> [1] 10 20 30 #>  #> $wiggle_dist #> [1] NA #>  #> $params #> $params[[1]] #> ocRctPredprobDist #>  #> $params$nnE #> c(10, 20, 30) #>  #> $params$pE #> [1] 0.3 #>  #> $params$pS #> [1] 0.3 #>  #> $params$deltaE #> [1] 0.2 #>  #> $params$deltaF #> [1] 0.1 #>  #> $params$phiFu #> [1] 0.2 #>  #> $params$phiU #> [1] 0.8 #>  #> $params$relativeDelta #> [1] FALSE #>  #> $params$tT #> [1] 0.6 #>  #> $params$tF #> [1] 0.4 #>  #> $params$parE #> c(a = 1, b = 1) #>  #> $params$parS #> c(a = 1, b = 1) #>  #> $params$weights #> [1] 1 #>  #> $params$weightsS #> [1] 1 #>  #> $params$randRatio #> [1] 1 #>  #> $params$sim #> [1] 50 #>  #> $params$wiggle #> [1] FALSE #>  #> $params$nnF #> c(10, 20, 30) #>  #> $params$decision1 #> [1] TRUE #>  #>   # Only one Futility look: set.seed(2000) ocRctPredprobDist(   nnE = c(10, 20, 30),   pE = 0.3,   pS = 0.3,   deltaE = 0.2,   deltaF = 0.1,   phiU = 0.8,   phiFu = 0.2,   relativeDelta = FALSE,   tT = 0.6,   tF = 0.4,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   weights = 1,   weightsS = 1,   randRatio = 1,   sim = 50,   wiggle = FALSE,   nnF = 20,   decision1 = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence #> $oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      20.4        0.92       0.06       0.86        0.1       0.86       0.04 #>   ExpectedNactive ExpectedNcontrol #> 1            10.1             10.3 #>  #> $Decision #>  [1]    NA FALSE FALSE FALSE FALSE FALSE FALSE    NA FALSE FALSE FALSE FALSE #> [13] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE #> [25] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE #> [37] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE #> [49] FALSE FALSE #>  #> $SampleSize #>  [1] 30 20 20 20 20 20 20 30 20 20 20 20 20 20 20 20 20 20 20 20 30 20 20 20 20 #> [26] 20 20 10 20 30 20 20 20 20 20 20 20 20 20 20 20 20 10 20 20 20 20 20 20 20 #>  #> $SampleSizeActive #>  [1] 15 12 11  9 10 11 10 15 10  7  8 12  8  9 11  9 10  9  9 10 15  9 13 11  8 #> [26] 13 11  4 11 15 10 11 12 10 10 11  9  9 10  8 12 10  3 10  8 10 11  8  9  9 #>  #> $SampleSizeControl #>  [1] 15  8  9 11 10  9 10 15 10 13 12  8 12 11  9 11 10 11 11 10 15 11  7  9 12 #> [26]  7  9  6  9 15 10  9  8 10 10  9 11 11 10 12  8 10  7 10 12 10  9 12 11 11 #>  #> $union_nn #> [1] 10 20 30 #>  #> $wiggled_nnE #> [1] 10 20 30 #>  #> $wiggled_nnF #> [1] 20 #>  #> $wiggle_dist #> [1] NA #>  #> $params #> $params[[1]] #> ocRctPredprobDist #>  #> $params$nnE #> c(10, 20, 30) #>  #> $params$pE #> [1] 0.3 #>  #> $params$pS #> [1] 0.3 #>  #> $params$deltaE #> [1] 0.2 #>  #> $params$deltaF #> [1] 0.1 #>  #> $params$phiFu #> [1] 0.2 #>  #> $params$phiU #> [1] 0.8 #>  #> $params$relativeDelta #> [1] FALSE #>  #> $params$tT #> [1] 0.6 #>  #> $params$tF #> [1] 0.4 #>  #> $params$parE #> c(a = 1, b = 1) #>  #> $params$parS #> c(a = 1, b = 1) #>  #> $params$weights #> [1] 1 #>  #> $params$weightsS #> [1] 1 #>  #> $params$randRatio #> [1] 1 #>  #> $params$sim #> [1] 50 #>  #> $params$wiggle #> [1] FALSE #>  #> $params$nnF #> [1] 20 #>  #> $params$decision1 #> [1] TRUE #>  #>   # When `deltaF = 0`: set.seed(2000) ocRctPredprobDist(   nnE = c(10, 20, 30),   pE = 0.3,   pS = 0.3,   deltaE = 0.2,   deltaF = 0,   phiU = 0.8,   phiFu = 0.2,   relativeDelta = FALSE,   tT = 0.6,   tF = 0.4,   parE = c(a = 1, b = 1),   parS = c(a = 1, b = 1),   weights = 1,   weightsS = 1,   randRatio = 1,   sim = 50,   wiggle = FALSE,   nnF = c(10, 20, 30),   decision1 = TRUE ) #> Warning: Advise to use sim >= 50000 to achieve convergence #> $oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1      12.4        0.92       0.06       0.86       0.08       0.88       0.04 #>   ExpectedNactive ExpectedNcontrol #> 1            6.18             6.22 #>  #> $Decision #>  [1]    NA FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> [13] FALSE    NA FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE #> [25] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE #> [37] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE #> [49] FALSE FALSE #>  #> $SampleSize #>  [1] 30 10 10 10 10 20 10 10 10 10 20 10 10 30 10 10 10 10 20 10 10 10 10 10 10 #> [26] 10 10 10 10 30 10 10 10 10 10 30 10 10 10 10 10 10 10 10 10 10 10 20 10 10 #>  #> $SampleSizeActive #>  [1] 15  5  5  5  5 11  5  5  4  3  8  5  4 15  6  7  6  6  9  4  3  5  7  5  4 #> [26]  7  6  4  4 15  7  4  8  5  6 15  4  4  4  6  6  7  3  3  3  5  7  8  5  6 #>  #> $SampleSizeControl #>  [1] 15  5  5  5  5  9  5  5  6  7 12  5  6 15  4  3  4  4 11  6  7  5  3  5  6 #> [26]  3  4  6  6 15  3  6  2  5  4 15  6  6  6  4  4  3  7  7  7  5  3 12  5  4 #>  #> $union_nn #> [1] 10 20 30 #>  #> $wiggled_nnE #> [1] 10 20 30 #>  #> $wiggled_nnF #> [1] 10 20 30 #>  #> $wiggle_dist #> [1] NA #>  #> $params #> $params[[1]] #> ocRctPredprobDist #>  #> $params$nnE #> c(10, 20, 30) #>  #> $params$pE #> [1] 0.3 #>  #> $params$pS #> [1] 0.3 #>  #> $params$deltaE #> [1] 0.2 #>  #> $params$deltaF #> [1] 0 #>  #> $params$phiFu #> [1] 0.2 #>  #> $params$phiU #> [1] 0.8 #>  #> $params$relativeDelta #> [1] FALSE #>  #> $params$tT #> [1] 0.6 #>  #> $params$tF #> [1] 0.4 #>  #> $params$parE #> c(a = 1, b = 1) #>  #> $params$parS #> c(a = 1, b = 1) #>  #> $params$weights #> [1] 1 #>  #> $params$weightsS #> [1] 1 #>  #> $params$randRatio #> [1] 1 #>  #> $params$sim #> [1] 50 #>  #> $params$wiggle #> [1] FALSE #>  #> $params$nnF #> c(10, 20, 30) #>  #> $params$decision1 #> [1] TRUE #>  #>"},{"path":"https://genentech.github.io/phase1b/reference/pbetaMix.html","id":null,"dir":"Reference","previous_headings":"","what":"Beta-Mixture CDF ‚Äî pbetaMix","title":"Beta-Mixture CDF ‚Äî pbetaMix","text":"Calculates CDF Beta-Mixture distribution.","code":""},{"path":"https://genentech.github.io/phase1b/reference/pbetaMix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Beta-Mixture CDF ‚Äî pbetaMix","text":"","code":"pbetaMix(q, par, weights, lower.tail = TRUE)"},{"path":"https://genentech.github.io/phase1b/reference/pbetaMix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Beta-Mixture CDF ‚Äî pbetaMix","text":"q (number): abscissa. par (matrix): beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. weights (numeric): mixture weights beta mixture prior add 1. lower.tail (flag): TRUE (default), probabilities P[X <= x], otherwise P[X > x].","code":""},{"path":"https://genentech.github.io/phase1b/reference/pbetaMix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Beta-Mixture CDF ‚Äî pbetaMix","text":"(one minus) cdf value","code":""},{"path":"https://genentech.github.io/phase1b/reference/pbetaMix.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Beta-Mixture CDF ‚Äî pbetaMix","text":"q can vector.","code":""},{"path":"https://genentech.github.io/phase1b/reference/pbetaMix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Beta-Mixture CDF ‚Äî pbetaMix","text":"","code":"pbetaMix(q = 0.3, par = rbind(c(0.2, 0.4)), weights = 1) #> [1] 0.5947341  # Can get the one minus CDF values. pbetaMix(q = 0.3, par = rbind(c(0.2, 0.4)), weights = 1, lower.tail = FALSE) #> [1] 0.4052659  # With 2 mixture components pbetaMix(   q = 0.3, par = rbind(c(0.2, 0.4), c(1, 1)),   weights = c(0.6, 0.4) ) #> [1] 0.4768404  # Can also specify x as a vector. pbetaMix(   q = seq(0, 1, .01), par = rbind(c(0.2, 0.4), c(1, 1)),   weights = c(0.6, 0.4) ) #>   [1] 0.0000000 0.1788327 0.2090334 0.2302374 0.2474000 0.2622119 0.2754695 #>   [8] 0.2876164 0.2989265 0.3095818 0.3197098 0.3294035 0.3387328 0.3477521 #>  [15] 0.3565040 0.3650231 0.3733377 0.3814710 0.3894429 0.3972698 0.4049661 #>  [22] 0.4125442 0.4200147 0.4273871 0.4346696 0.4418696 0.4489937 0.4560478 #>  [29] 0.4630371 0.4699666 0.4768404 0.4836628 0.4904372 0.4971671 0.5038556 #>  [36] 0.5105056 0.5171196 0.5237003 0.5302499 0.5367707 0.5432648 0.5497340 #>  [43] 0.5561802 0.5626052 0.5690107 0.5753984 0.5817696 0.5881261 0.5944691 #>  [50] 0.6008001 0.6071205 0.6134317 0.6197349 0.6260315 0.6323228 0.6386100 #>  [57] 0.6448944 0.6511773 0.6574601 0.6637440 0.6700303 0.6763205 0.6826158 #>  [64] 0.6889178 0.6952279 0.7015477 0.7078787 0.7142227 0.7205813 0.7269564 #>  [71] 0.7333501 0.7397644 0.7462016 0.7526640 0.7591544 0.7656755 0.7722304 #>  [78] 0.7788226 0.7854559 0.7921344 0.7988628 0.8056463 0.8124910 0.8194036 #>  [85] 0.8263919 0.8334652 0.8406340 0.8479110 0.8553117 0.8628546 0.8705630 #>  [92] 0.8784664 0.8866030 0.8950244 0.9038019 0.9130404 0.9229032 0.9336724 #>  [99] 0.9459138 0.9611540 1.0000000"},{"path":"https://genentech.github.io/phase1b/reference/pbetadiff.html","id":null,"dir":"Reference","previous_headings":"","what":"Beta difference Cumulative Probability Function ‚Äî pbetadiff","title":"Beta difference Cumulative Probability Function ‚Äî pbetadiff","text":"Calculates Cumulative Probability Function Beta difference given probability.","code":""},{"path":"https://genentech.github.io/phase1b/reference/pbetadiff.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Beta difference Cumulative Probability Function ‚Äî pbetadiff","text":"","code":"pbetadiff(q, parY, parX, rel.tol = .Machine$double.eps^0.1)"},{"path":"https://genentech.github.io/phase1b/reference/pbetadiff.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Beta difference Cumulative Probability Function ‚Äî pbetadiff","text":"q (number): vector quantiles parY (numeric): two parameters Y's Beta distribution (Treatment) parX (numeric): two parameters X's Beta distribution (Control) rel.tol (number): used stats::integrate()","code":""},{"path":"https://genentech.github.io/phase1b/reference/pbetadiff.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Beta difference Cumulative Probability Function ‚Äî pbetadiff","text":"probability distribution value","code":""},{"path":"https://genentech.github.io/phase1b/reference/pbetadiff.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Beta difference Cumulative Probability Function ‚Äî pbetadiff","text":"","code":"# The following examples use these parameters: parX <- c(1, 52) parY <- c(5.5, 20.5)  # Calculate probability based on quantile `Q(Z) =< 0.122838` pbetadiff(   q = 0.122838,   parY = parY,   parX = parX ) #> [1] 0.2000019  # Calculate probability based on quantile `Q(Z) =< 0.5` pbetadiff(   q = 0.5,   parY = parY,   parX = parX ) #> [1] 0.9993969"},{"path":"https://genentech.github.io/phase1b/reference/plotBeta.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot the Beta distribution ‚Äî plotBeta","title":"Plot the Beta distribution ‚Äî plotBeta","text":"function plot PDF beta distribution","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotBeta.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot the Beta distribution ‚Äî plotBeta","text":"","code":"plotBeta(alpha, beta)"},{"path":"https://genentech.github.io/phase1b/reference/plotBeta.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot the Beta distribution ‚Äî plotBeta","text":"alpha (number): first parameter Beta distribution beta (number): second parameter Beta distribution","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotBeta.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot the Beta distribution ‚Äî plotBeta","text":"beta distribution density plot","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotBeta.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot the Beta distribution ‚Äî plotBeta","text":"","code":"plotBeta(alpha = 4, beta = 5)  plotBeta(alpha = 1, beta = 1)"},{"path":"https://genentech.github.io/phase1b/reference/plotBetaDiff.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot difference Between two Beta distributions ‚Äî plotBetaDiff","title":"Plot difference Between two Beta distributions ‚Äî plotBetaDiff","text":"function plot PDF difference two Beta distributions","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotBetaDiff.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot difference Between two Beta distributions ‚Äî plotBetaDiff","text":"","code":"plotBetaDiff(   parX,   parY,   go_cut = 0.2,   stop_cut = 0.1,   shade = TRUE,   note = TRUE )"},{"path":"https://genentech.github.io/phase1b/reference/plotBetaDiff.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot difference Between two Beta distributions ‚Äî plotBetaDiff","text":"parX (numeric): non-negative parameters control Beta distribution parY (numeric): non-negative parameters treatment Beta distribution. go_cut (number): meaningful improvement threshold, lower boundary meaningfully improvement response rate stop_cut (number): poor improvement threshold, upper boundary meaningfully poor improvement response rate shade (flag): paint two areas curve, default value = TRUE note (flag): show values colored area, default value = TRUE","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotBetaDiff.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot difference Between two Beta distributions ‚Äî plotBetaDiff","text":"ggplot object","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotBetaDiff.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot difference Between two Beta distributions ‚Äî plotBetaDiff","text":"","code":"# The beta distribution and acceptable bounds for # a meaningful improvement of 0.30 and worsening of 0.1 parX <- c(1, 52) # prior  parameters of control or SOC parY <- c(5.5, 20.5) # prior  parameters of experimental arm plotBetaDiff(   parX = parX,   parY = parY,   go_cut = 0.3,   stop_cut = 0.1, # below a difference of 10%, is an unsuccessful trial   shade = TRUE,   note = TRUE )   # a larger Go_cut with uniform prior plotBetaDiff(   parX = c(1, 1), # prior  parameters for experimental arm   parY = c(1, 1), # prior parameters for control or SOC arm   go_cut = 0.3,   stop_cut = 0.1, # below a difference of 10%, is an unsuccessful trial   shade = TRUE,   note = TRUE )"},{"path":"https://genentech.github.io/phase1b/reference/plotBounds.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot the boundary decision cutpoints ‚Äî plotBounds","title":"Plot the boundary decision cutpoints ‚Äî plotBounds","text":"function plot response rate futility efficacy boundaries, used together boundsPredprob boundsPostprob","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotBounds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot the boundary decision cutpoints ‚Äî plotBounds","text":"","code":"plotBounds(   z,   area = TRUE,   grid = TRUE,   yt = \"x\",   add = FALSE,   cols = c(\"green\", \"red\", \"darkgreen\", \"orange\"),   lwds = c(3, 3),   ltype = \"l\",   lpch = 16,   lcex = 1,   gy = 20 )"},{"path":"https://genentech.github.io/phase1b/reference/plotBounds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot the boundary decision cutpoints ‚Äî plotBounds","text":"z output boundsPredprob boundsPostprob area color futility/efficacy stop area grid show grid y-axis yt indicate y axis: response rate \"p\", number responses \"x\" add add boundary lines cols specific color [1] efficacy area [2] futility area [3] efficacy boundary [4] futility boundary lwds line width (two dimensional vector) ltype line type lpch value plotting characters symbols lcex value giving amount plotting characters symbols scaled relative default. gy value adjust gray level plot (default 20), applies grid==TRUE","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotBounds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot the boundary decision cutpoints ‚Äî plotBounds","text":"nothing, produces plot side effect","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotBounds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot the boundary decision cutpoints ‚Äî plotBounds","text":"","code":"# examples plotBounds(   boundsPostprob(     looks = c(10, 20, 30, 40), p0 = 0.20,     tL = 0.10, tU = 0.90, parE = c(1, 1)   ),   yt = \"p\", add = TRUE ) #> Error in plot.xy(xy.coords(x, y), type = type, ...): plot.new has not been called yet plotBounds(boundsPredprob(   looks = c(10, 20, 30, 40), p0 = 0.20, tT = 0.80,   phiL = 0.10, phiU = 0.90, ), yt = \"x\") plotBounds(boundsPredprob(   looks = c(10, 20, 30, 40), p0 = 0.20, tT = 0.80,   phiL = 0.10, phiU = 0.90, ), yt = \"p\")"},{"path":"https://genentech.github.io/phase1b/reference/plotDecision.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot a summary plot corresponding to the sumTable output ‚Äî plotDecision","title":"Plot a summary plot corresponding to the sumTable output ‚Äî plotDecision","text":"function return plot showing curve prob meaningful improvement estunated diff curve prob poor improvement estunated diff","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotDecision.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot a summary plot corresponding to the sumTable output ‚Äî plotDecision","text":"","code":"plotDecision(data, Pos_cut, Neg_cut)"},{"path":"https://genentech.github.io/phase1b/reference/plotDecision.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot a summary plot corresponding to the sumTable output ‚Äî plotDecision","text":"data output object sumTable Pos_cut cut prob meaningful improvement Neg_cut cut prob poor improvement","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotDecision.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot a summary plot corresponding to the sumTable output ‚Äî plotDecision","text":"data item imputed function","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotDecision.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot a summary plot corresponding to the sumTable output ‚Äî plotDecision","text":"","code":"summaries <- do.call(   cbind,   lapply(c(0:8),     sumTable,     TotalSample = 25,     parX = c(1, 52),     cut_B = 0.2,     cut_W = 0.05   ) )  plotDecision(summaries, Pos_cut = 60, Neg_cut = 60)  #>               summaries summaries summaries summaries summaries summaries #> # resp             0.00      1.00      2.00      3.00      4.00      5.00 #> obs ORR [%]        0.00      4.00      8.00     12.00     16.00     20.00 #> mode [%]           0.00      1.02      4.80      8.83     12.92     17.04 #> CI lower [%]      -4.55     -2.42     -0.24      2.03      4.55      7.27 #> CI upper [%]      17.51     13.05     18.83     24.07     28.97     33.64 #> prob.go [%]        0.05      0.74      3.79     11.58     25.23     43.17 #> prob.nogo [%]     93.39     66.49     36.46     16.09      6.00      1.98 #>               summaries summaries summaries #> # resp             6.00      7.00      8.00 #> obs ORR [%]       24.00     28.00     32.00 #> mode [%]          21.18     25.32     29.47 #> CI lower [%]      10.17     13.20     16.37 #> CI upper [%]      38.13     42.46     46.67 #> prob.go [%]       61.70     77.26     88.13 #> prob.nogo [%]      0.59      0.17      0.04"},{"path":"https://genentech.github.io/phase1b/reference/plotOc.html","id":null,"dir":"Reference","previous_headings":"","what":"Display the operating characteristics using an oc object ‚Äî plotOc","title":"Display the operating characteristics using an oc object ‚Äî plotOc","text":"Reads results ocPredprob, ocPostprob etc. displays bar plot operating characteristics","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotOc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Display the operating characteristics using an oc object ‚Äî plotOc","text":"","code":"plotOc(z)"},{"path":"https://genentech.github.io/phase1b/reference/plotOc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Display the operating characteristics using an oc object ‚Äî plotOc","text":"z returned oc value","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotOc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Display the operating characteristics using an oc object ‚Äî plotOc","text":"nothing, plots side effect","code":""},{"path":"https://genentech.github.io/phase1b/reference/plotOc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Display the operating characteristics using an oc object ‚Äî plotOc","text":"","code":"# get operating character result from oc.postprob  res1 <- ocPostprob(   nnE = c(10, 20, 30), truep = 0.4, p0 = 0.2,   p1 = 0.3, tL = 0.6, tU = 0.8, parE = c(1, 1), sim = 50000 ) res1$oc #>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone #> 1   19.1546     0.67212    0.61794    0.05418    0.75192    0.05574    0.19234  plotOc(res1)"},{"path":"https://genentech.github.io/phase1b/reference/postprob.html","id":null,"dir":"Reference","previous_headings":"","what":"Posterior Probability of Efficacy Given Beta-Mixture Prior ‚Äî postprob","title":"Posterior Probability of Efficacy Given Beta-Mixture Prior ‚Äî postprob","text":"Compute posterior probability response probability P_E threshold. posterior probability can expressed Pr(P_E > p | data). Prior P_E ~ sum(weights * beta(parE[, 1], parE[, 2])), .e., mixture beta priors. Default one component uniform beta(1,1). observed x successes n trials. Posterior mixture beta priors, updated mixture weights beta parameters.","code":""},{"path":"https://genentech.github.io/phase1b/reference/postprob.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Posterior Probability of Efficacy Given Beta-Mixture Prior ‚Äî postprob","text":"","code":"postprob(x, n, p, parE = c(1, 1), weights, betamixPost, log.p = FALSE)"},{"path":"https://genentech.github.io/phase1b/reference/postprob.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Posterior Probability of Efficacy Given Beta-Mixture Prior ‚Äî postprob","text":"x (numeric): number successes. n (number): number patients. p (number): threshold P_E measured. parE (matrix): beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. weights (vector): mixture weights beta mixture prior. betamixPost (matrix): optional result [h_getBetamixPost()] order speed computations. supplied, directly used, bypassing arguments (except p log.p course). log.p (number): whether return log probability","code":""},{"path":"https://genentech.github.io/phase1b/reference/postprob.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Posterior Probability of Efficacy Given Beta-Mixture Prior ‚Äî postprob","text":"posterior probability response rate P_E p.","code":""},{"path":"https://genentech.github.io/phase1b/reference/postprob.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Posterior Probability of Efficacy Given Beta-Mixture Prior ‚Äî postprob","text":"","code":"# Example taken from Lee and Liu (2008) : # We observed 16 successes out of 23 patients # We set a threshold of 0.60 # Assume a beta(0.6,0.4) prior for P_E # Posterior will be a beta(16.6, 7.4), Pr(P_E > p | data) = 0.836  postprob(x = 16, n = 23, p = 0.60, par = c(0.6, 0.4)) #> [1] 0.8359808  # We could instead specify a mixture prior # 2 component beta mixture prior : # i.e., P_E ~ 0.6*beta(0.6,0.4) + 0.4*beta(1,1) and Pr(P_E > p | data) = 0.823 postprob(   x = 16, n = 23, p = 0.60,   par =     rbind(       c(0.6, 0.4),       c(1, 1)     ),   weights = c(0.6, 0.4) ) #> [1] 0.8226271  postprob(   x = 0:23, n = 23, p = 0.60,   par =     rbind(       c(0.6, 0.4),       c(1, 1)     ),   weights = c(0.6, 0.4) ) #>  [1] 1.610230e-10 8.199326e-09 1.633863e-07 1.979370e-06 1.685148e-05 #>  [6] 1.084654e-04 5.515347e-04 2.281187e-03 7.835363e-03 2.269926e-02 #> [11] 5.614896e-02 1.198178e-01 2.226531e-01 3.637244e-01 5.278774e-01 #> [16] 6.893075e-01 8.226271e-01 9.142057e-01 9.657989e-01 9.891582e-01 #> [21] 9.974047e-01 9.995695e-01 9.999586e-01 9.999988e-01"},{"path":"https://genentech.github.io/phase1b/reference/postprobBeta.html","id":null,"dir":"Reference","previous_headings":"","what":"Posterior Probability of Efficacy Given Beta Prior ‚Äî postprobBeta","title":"Posterior Probability of Efficacy Given Beta Prior ‚Äî postprobBeta","text":"Compute posterior probability threshold assuming beta prior response rate response rate experimental treatment E exceeds threshold set compute posterior probability p :  Pr(P_E > p | data). Prior P_E ~ beta(, b), default set uniform beta(1,1). observed x successes n trials posterior P_E | data  ~ beta(+ x, b + n - x).","code":""},{"path":"https://genentech.github.io/phase1b/reference/postprobBeta.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Posterior Probability of Efficacy Given Beta Prior ‚Äî postprobBeta","text":"","code":"postprobBeta(x, n, p, a = 1, b = 1)"},{"path":"https://genentech.github.io/phase1b/reference/postprobBeta.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Posterior Probability of Efficacy Given Beta Prior ‚Äî postprobBeta","text":"x (numeric): number successes. n (number): number patients. p (number): threshold set compute posterior probability. (matrix): first parameter alpha beta prior (successes). b (matrix): second parameter beta beta prior (failures).","code":""},{"path":"https://genentech.github.io/phase1b/reference/postprobBeta.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Posterior Probability of Efficacy Given Beta Prior ‚Äî postprobBeta","text":"posterior probability response rate P_E threshold p.","code":""},{"path":"https://genentech.github.io/phase1b/reference/postprobBeta.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Posterior Probability of Efficacy Given Beta Prior ‚Äî postprobBeta","text":"","code":"# Example taken from Lee & Liu (2006) # We observed 16 successes out of 23 patients # should we write this in the documentation # We set a threshold of 0.60 # Assume a beta(0.6,0.4) prior for P_E # Posterior will be a beta(16.6,22.8), Pr(P_E > p | data) = 0.8358808   # Example taken from Lee and Liu (2006) postprobBeta(x = 16, n = 23, p = 0.60, a = 0.6, b = 0.4) #> [1] 0.8359808 # Interpretation : # The probability 16 of 23 successes is greater than 60 % threshold is approximately 84 %"},{"path":"https://genentech.github.io/phase1b/reference/postprobDist.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the Posterior Probability with Beta Prior on standard of care S ‚Äî postprobDist","title":"Compute the Posterior Probability with Beta Prior on standard of care S ‚Äî postprobDist","text":"Using approach Thall Simon (Biometrics, 1994), evaluates posterior probability achieving superior response rate treatment group E compared standard care S. See note two formulations difference response rates.","code":""},{"path":"https://genentech.github.io/phase1b/reference/postprobDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the Posterior Probability with Beta Prior on standard of care S ‚Äî postprobDist","text":"","code":"postprobDist(   x,   n,   xS = 0,   nS = 0,   delta,   relativeDelta = FALSE,   parE = c(1, 1),   weights,   parS = c(1, 1),   weightsS )"},{"path":"https://genentech.github.io/phase1b/reference/postprobDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the Posterior Probability with Beta Prior on standard of care S ‚Äî postprobDist","text":"x (numeric): number success counts E group. n (number): number patients E group. xS (number): number success counts S group. nS (number): number patients S group. delta (number): margin response rate treatment group better standard care control S group. Note can also negative, e.g. non-inferiority assessed. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients included margin treatment control group. See note. parE (numeric matrix): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution E group. See details. weights (numeric): non-negative mixture weights beta mixture prior group E. See details. parS (numeric matrix): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. See details. weightsS (numeric): non-negative mixture weights beta mixture prior group S. See details.","code":""},{"path":"https://genentech.github.io/phase1b/reference/postprobDist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the Posterior Probability with Beta Prior on standard of care S ‚Äî postprobDist","text":"posterior probability","code":""},{"path":"https://genentech.github.io/phase1b/reference/postprobDist.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute the Posterior Probability with Beta Prior on standard of care S ‚Äî postprobDist","text":"beta mixture prior E arm requires argument parE weights. beta mixture prior S arm requires argument parS weightsS. See postprob() details. beta-mixture used, default, weights uniform across components. Weights can exceed 1, algorithm normalize weights weights sum 1.","code":""},{"path":[]},{"path":"https://genentech.github.io/phase1b/reference/postprobDist.html","id":"delta-","dir":"Reference","previous_headings":"","what":"Delta :","title":"Compute the Posterior Probability with Beta Prior on standard of care S ‚Äî postprobDist","text":"desired improvement denoted delta. two options using delta. absolute case relativeDelta = FALSE relative relativeDelta = TRUE. absolute case define absolute delta, greater P_S, response rate standard care control S group posterior Pr(P_E > P_S + delta | data). relative case, suppose treatment group's response rate assumed greater P_S + (1-P_S) * delta posterior Pr(P_E > P_S + (1 - P_S) * delta | data).","code":""},{"path":"https://genentech.github.io/phase1b/reference/postprobDist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute the Posterior Probability with Beta Prior on standard of care S ‚Äî postprobDist","text":"","code":"# An example similar to Lee and Liu (2008). postprobDist(   x = 16,   n = 23,   parE = c(0.6, 0.4),   parS = c(0.6, 0.4),   delta = 0.1,   relativeDelta = FALSE ) #> [1] 0.4431067  # For a sequence of success outcomes for Experimental arm. postprobDist(   x = c(16, 17),   n = 23,   parE = c(0.6, 0.4),   parS = c(0.6, 0.4),   delta = 0.1,   relativeDelta = FALSE ) #> [1] 0.4431067 0.4706541  # When we use a relative difference and look at several possible number of responses. postprobDist(   x = 1:23,   n = 23,   parE = c(0.2, 0.8),   parS = c(0.6, 0.4),   delta = 0.1,   relativeDelta = TRUE ) #>  [1] 0.008765651 0.031367331 0.066103157 0.105615555 0.144114579 0.179531092 #>  [7] 0.212086794 0.242636671 0.271938471 0.300533490 0.328811161 0.357080040 #> [13] 0.385614492 0.414685509 0.444586146 0.475659417 0.508336740 0.543200029 #> [19] 0.581095188 0.623367348 0.672432629 0.733545997 0.823358859  # When we use beta mixtures for both the Experimental and SOC arms. postprobDist(   x = 16,   n = 23,   parE =     rbind(       c(0.6, 0.4),       c(10, 20)     ),   parS =     rbind(       c(0.6, 0.4),       c(10, 10)     ),   weightsS = c(1, 3),   delta = 0.1 ) #> [1] 0.6168586  # Experimental arm only (strictly single arm trial), uniform prior in Experimental arm. # Non-uniform Prior used for SOC arm as no precedent data. postprobDist(   x = 16,   n = 23,   xS = 0,   nS = 0,   delta = 0,   relativeDelta = FALSE,   parS = c(2, 3),   weightsS = 1 ) #> [1] 0.8842491 # Experimental arm and SOC, uniform prior in both E and S arms, default setting used. postprobDist(   x = 16,   n = 20,   xS = 10,   nS = 20,   delta = 0,   relativeDelta = FALSE,   weightsS = 1 ) #> [1] 0.9741857  # Experimental and SOC arm, with beta mix prior for both arms. # For each of the SOC arm is of 3 priors, therefore 3 sets of beta parameters, and 3 weights. postprobDist(   x = 16,   n = 20,   xS = 10,   nS = 20,   delta = 0.1,   relativeDelta = TRUE,   parE = rbind(c(1, 1), c(3, 4), c(8, 9)),   weights = c(5, 3, 2),   parS = rbind(c(4, 5), c(2, 3), c(4, 4)),   weightsS = c(2, 5, 3) ) #> [1] 0.9415121"},{"path":"https://genentech.github.io/phase1b/reference/predprob.html","id":null,"dir":"Reference","previous_headings":"","what":"Predictive probability of trial success ‚Äî predprob","title":"Predictive probability of trial success ‚Äî predprob","text":"Compute predictive probability trial success given current data. Success means end trial posterior probability Pr(P_E > p) >= thetaT, p fixed response rate threshold P_E response rate treatment group E group. predictive probability success : pp = sum : Pr(Y=|x,n)*{Pr(P_E > p|x,Y=)>=thetaT} Y number future responses treatment group x current number responses treatment group n. prior response rate experimental arm P_E ~ beta(, b). table following contents included return output : counts: Y = , number future successes Nmax-n subjects. density: Pr(Y = |x) using beta-(mixture)-binomial distribution. posterior: Pr(P_E > p | x, Y=) using beta posterior. success: indicator (b > thetaT).","code":""},{"path":"https://genentech.github.io/phase1b/reference/predprob.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predictive probability of trial success ‚Äî predprob","text":"","code":"predprob(x, n, Nmax, p, thetaT, parE = c(1, 1), weights)"},{"path":"https://genentech.github.io/phase1b/reference/predprob.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predictive probability of trial success ‚Äî predprob","text":"x (number): number successes. n (number): number patients. Nmax (number): maximum number patients end trial E group. p (number): threshold response rate. thetaT (number): threshold probability p. parE (numeric): beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. weights (numeric): mixture weights beta mixture prior.","code":""},{"path":"https://genentech.github.io/phase1b/reference/predprob.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predictive probability of trial success ‚Äî predprob","text":"list returned names result predictive probability table numeric values counts responses remaining patients, probabilities counts, corresponding probabilities threshold, trial success indicators.","code":""},{"path":"https://genentech.github.io/phase1b/reference/predprob.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Predictive probability of trial success ‚Äî predprob","text":"Lee, J. J., & Liu, D. D. (2008). predictive probability design phase II cancer clinical trials. Clinical Trials, 5(2), 93-106. doi:10.1177/1740774508089279","code":""},{"path":"https://genentech.github.io/phase1b/reference/predprob.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predictive probability of trial success ‚Äî predprob","text":"","code":"# The original Lee and Liu (Table 1) example: # Nmax = 40, x = 16, n = 23, beta(0.6,0.4) prior distribution, # thetaT = 0.9. The control response rate is 60%: predprob(   x = 16, n = 23, Nmax = 40, p = 0.6, thetaT = 0.9,   parE = c(0.6, 0.4) ) #> $result #> [1] 0.5655589 #>  #> $table #>    counts cumul_counts density   posterior success #> 1       0           23  0.0000 0.005858397   FALSE #> 2       1           24  0.0000 0.013782046   FALSE #> 3       2           25  0.0001 0.029584325   FALSE #> 4       3           26  0.0006 0.058130376   FALSE #> 5       4           27  0.0021 0.104881818   FALSE #> 6       5           28  0.0058 0.174328134   FALSE #> 7       6           29  0.0135 0.267887754   FALSE #> 8       7           30  0.0276 0.382146405   FALSE #> 9       8           31  0.0497 0.508508727   FALSE #> 10      9           32  0.0794 0.634871049   FALSE #> 11     10           33  0.1129 0.748893301   FALSE #> 12     11           34  0.1426 0.841482798   FALSE #> 13     12           35  0.1587 0.908912106    TRUE #> 14     13           36  0.1532 0.952764733    TRUE #> 15     14           37  0.1246 0.978098514    TRUE #> 16     15           38  0.0811 0.991013775    TRUE #> 17     16           39  0.0381 0.996776597    TRUE #> 18     17           40  0.0099 0.999003945    TRUE #>   # Lowering/Increasing the probability threshold thetaT of course increases # /decreases the predictive probability of success, respectively: predprob(   x = 16, n = 23, Nmax = 40, p = 0.6, thetaT = 0.8,   parE = c(0.6, 0.4) ) #> $result #> [1] 0.7081907 #>  #> $table #>    counts cumul_counts density   posterior success #> 1       0           23  0.0000 0.005858397   FALSE #> 2       1           24  0.0000 0.013782046   FALSE #> 3       2           25  0.0001 0.029584325   FALSE #> 4       3           26  0.0006 0.058130376   FALSE #> 5       4           27  0.0021 0.104881818   FALSE #> 6       5           28  0.0058 0.174328134   FALSE #> 7       6           29  0.0135 0.267887754   FALSE #> 8       7           30  0.0276 0.382146405   FALSE #> 9       8           31  0.0497 0.508508727   FALSE #> 10      9           32  0.0794 0.634871049   FALSE #> 11     10           33  0.1129 0.748893301   FALSE #> 12     11           34  0.1426 0.841482798    TRUE #> 13     12           35  0.1587 0.908912106    TRUE #> 14     13           36  0.1532 0.952764733    TRUE #> 15     14           37  0.1246 0.978098514    TRUE #> 16     15           38  0.0811 0.991013775    TRUE #> 17     16           39  0.0381 0.996776597    TRUE #> 18     17           40  0.0099 0.999003945    TRUE #>   predprob(   x = 16, n = 23, Nmax = 40, p = 0.6, thetaT = 0.95,   parE = c(0.6, 0.4) ) #> $result #> [1] 0.4068235 #>  #> $table #>    counts cumul_counts density   posterior success #> 1       0           23  0.0000 0.005858397   FALSE #> 2       1           24  0.0000 0.013782046   FALSE #> 3       2           25  0.0001 0.029584325   FALSE #> 4       3           26  0.0006 0.058130376   FALSE #> 5       4           27  0.0021 0.104881818   FALSE #> 6       5           28  0.0058 0.174328134   FALSE #> 7       6           29  0.0135 0.267887754   FALSE #> 8       7           30  0.0276 0.382146405   FALSE #> 9       8           31  0.0497 0.508508727   FALSE #> 10      9           32  0.0794 0.634871049   FALSE #> 11     10           33  0.1129 0.748893301   FALSE #> 12     11           34  0.1426 0.841482798   FALSE #> 13     12           35  0.1587 0.908912106   FALSE #> 14     13           36  0.1532 0.952764733    TRUE #> 15     14           37  0.1246 0.978098514    TRUE #> 16     15           38  0.0811 0.991013775    TRUE #> 17     16           39  0.0381 0.996776597    TRUE #> 18     17           40  0.0099 0.999003945    TRUE #>   # Mixed beta prior predprob(   x = 20, n = 23, Nmax = 40, p = 0.6, thetaT = 0.9,   parE = rbind(c(1, 1), c(25, 15)),   weights = c(3, 1) ) #> $result #> [1] 0.9874431 #>  #> $table #>    counts cumul_counts density posterior success #> 1       0           23  0.0000 0.1560061   FALSE #> 2       1           24  0.0000 0.2352310   FALSE #> 3       2           25  0.0000 0.3303366   FALSE #> 4       3           26  0.0000 0.4359140   FALSE #> 5       4           27  0.0001 0.5449206   FALSE #> 6       5           28  0.0003 0.6499804   FALSE #> 7       6           29  0.0011 0.7446568   FALSE #> 8       7           30  0.0031 0.8244101   FALSE #> 9       8           31  0.0080 0.8870640   FALSE #> 10      9           32  0.0177 0.9327462    TRUE #> 11     10           33  0.0348 0.9634096    TRUE #> 12     11           34  0.0613 0.9821219    TRUE #> 13     12           35  0.0973 0.9923193    TRUE #> 14     13           36  0.1394 0.9971675    TRUE #> 15     14           37  0.1783 0.9991255    TRUE #> 16     15           38  0.1964 0.9997794    TRUE #> 17     16           39  0.1708 0.9999557    TRUE #> 18     17           40  0.0913 0.9999932    TRUE #>"},{"path":"https://genentech.github.io/phase1b/reference/predprobDist.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute the predictive probability that the trial will be successful, with a prior distribution on the standard of care or S ‚Äî predprobDist","title":"Compute the predictive probability that the trial will be successful, with a prior distribution on the standard of care or S ‚Äî predprobDist","text":"Compute predictive probability trial success given current data. Success means end trial posterior probability : Pr(P_E > P_S + delta_0 | data) >= thetaT. P_E response rate treatment Egroup P_S response rate standard care S group. predictive probability success : pp = sum : Pr(Y = | x , n)*{Pr(P_E > P_S + delta | x,Y=) >= thetaT}, Y number future responses treatment group x current number responses treatment group n. Please see note postprobDist() definition delta relativeDelta. Prior P_E ~ beta(, b) uniform beta(1,1). However, beta mixture prior can also specified. Analogously P_S either uniform beta prior beta mixture prior can specified. Also data S might available. predictive probability generally defined : pp = sum , j: Pr(Y = | x, n)*Pr(Z = j | xS, nS )*{Pr(P_E > P_S + delta | x,xS, Y=, Z=j ) >= thetaT} Z future number responses S group, xS current number responses S group. case NmaxControl = 0, table following contents included return output : counts: Y = , number future successes Nmax-n subjects ascending order. cumul_counts: Y = , number future successes Nmax-n subjects. density: Pr(Y = |x) using beta-(mixture)-binomial distribution. posterior: Pr(P_E > P_S + delta | x, Y = ) using beta posterior. success: indicator ( b > thetaT ). NmaxControl zero, .e., data control treatment available trial, list following contents included return output : counts: Y = , number future successes Nmax-n subjects ascending order. cumul_counts: Y = , number future successes Nmax-n subjects. density: Pr(Y = |x) using beta-(mixture)-binomial distribution. posterior: Pr(P_E > P_S + delta | x, Y = ) using beta posterior. success: indicator ( b > thetaT ).","code":""},{"path":"https://genentech.github.io/phase1b/reference/predprobDist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute the predictive probability that the trial will be successful, with a prior distribution on the standard of care or S ‚Äî predprobDist","text":"","code":"predprobDist(   x,   n,   xS = 0,   nS = 0,   Nmax,   NmaxControl = 0,   delta = 0,   relativeDelta = FALSE,   parE = c(a = 1, b = 1),   weights,   parS = c(a = 1, b = 1),   weightsS,   thetaT )"},{"path":"https://genentech.github.io/phase1b/reference/predprobDist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute the predictive probability that the trial will be successful, with a prior distribution on the standard of care or S ‚Äî predprobDist","text":"x (number): number successes E group interim. n (number): number patients E group interim. xS (number): number successes S group interim. nS (number): number patients E group interim. Nmax (number): maximum number patients E group final analysis. NmaxControl (number): maximum number patients S group final analysis. delta (number): difference response rates met. relativeDelta (flag): TRUE, relativeDelta used. Represents minimum response rate magnitude delta S non-responding patients. See postprobDist(). parE (numeric): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution E group. weights (numeric): mixture weights beta mixture prior. parS (numeric): parameters beta distribution. matrix, needs 2 columns, row corresponds component beta-mixture distribution S group. weightsS (numeric): weights S group. thetaT (number): threshold probability used.","code":""},{"path":"https://genentech.github.io/phase1b/reference/predprobDist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute the predictive probability that the trial will be successful, with a prior distribution on the standard of care or S ‚Äî predprobDist","text":"list returned names result predictive probability including separately table numeric values counts responses remaining patients, density probabilities counts, posterior corresponding probabilities threshold, successfor trial success indicators.","code":""},{"path":"https://genentech.github.io/phase1b/reference/predprobDist.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute the predictive probability that the trial will be successful, with a prior distribution on the standard of care or S ‚Äî predprobDist","text":"Lee, J. J., & Liu, D. D. (2008). predictive probability design phase II cancer clinical trials. Clinical Trials, 5(2), 93-106. doi:10.1177/1740774508089279","code":""},{"path":"https://genentech.github.io/phase1b/reference/predprobDist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute the predictive probability that the trial will be successful, with a prior distribution on the standard of care or S ‚Äî predprobDist","text":"","code":"predprobDist(   x = 16, n = 23, Nmax = 40, delta = 0, thetaT = 0.9,   parE = c(0.6, 0.4), parS = c(7, 11) ) #> $result #> [1] 0.9778204 #>  #> $table #>    counts cumul_counts      density posterior success #> 1       0           16 1.885196e-06 0.5530716   FALSE #> 2       1           17 2.273514e-05 0.6214508   FALSE #> 3       2           18 1.429066e-04 0.6856889   FALSE #> 4       3           19 6.210428e-04 0.7444267   FALSE #> 5       4           20 2.088409e-03 0.7967127   FALSE #> 6       5           21 5.765730e-03 0.8420189   FALSE #> 7       6           22 1.353693e-02 0.8802192   FALSE #> 8       7           23 2.762957e-02 0.9115393    TRUE #> 9       8           24 4.969953e-02 0.9364854    TRUE #> 10      9           25 7.939015e-02 0.9557619    TRUE #> 11     10           26 1.129104e-01 0.9701884    TRUE #> 12     11           27 1.426318e-01 0.9806229    TRUE #> 13     12           28 1.587354e-01 0.9878972    TRUE #> 14     13           29 1.531657e-01 0.9927688    TRUE #> 15     14           30 1.245523e-01 0.9958900    TRUE #> 16     15           31 8.109152e-02 0.9977932    TRUE #> 17     16           32 3.813232e-02 0.9988905    TRUE #> 18     17           33 9.881666e-03 0.9994836    TRUE #>  # Specifying delta. predprobDist(   x = 16, n = 23, Nmax = 40, delta = 0.1, thetaT = 0.9,   parE = c(1, 1), parS = c(6, 11) ) #> $result #> [1] 0.8004621 #>  #> $table #>    counts cumul_counts      density posterior success #> 1       0           16 2.283242e-06 0.3716084   FALSE #> 2       1           17 2.749403e-05 0.4400664   FALSE #> 3       2           18 1.721366e-04 0.5092459   FALSE #> 4       3           19 7.433170e-04 0.5772595   FALSE #> 5       4           20 2.477723e-03 0.6423841   FALSE #> 6       5           21 6.764185e-03 0.7031617   FALSE #> 7       6           22 1.566443e-02 0.7584690   FALSE #> 8       7           23 3.145318e-02 0.8075520   FALSE #> 9       8           24 5.550560e-02 0.8500272   FALSE #> 10      9           25 8.672751e-02 0.8858553   FALSE #> 11     10           26 1.202621e-01 0.9152925    TRUE #> 12     11           27 1.475944e-01 0.9388274    TRUE #> 13     12           28 1.589479e-01 0.9571117    TRUE #> 14     13           29 1.477400e-01 0.9708907    TRUE #> 15     14           30 1.151221e-01 0.9809398    TRUE #> 16     15           31 7.137569e-02 0.9880117    TRUE #> 17     16           32 3.172253e-02 0.9927963    TRUE #> 18     17           33 7.697378e-03 0.9958932    TRUE #>   # Lowering theta increases predictive probability. predprobDist(   x = 16, n = 23, Nmax = 40, delta = 0.1, thetaT = 0.5,   parE = c(1, 1), parS = c(6, 11) ) #> $result #> [1] 0.9999702 #>  #> $table #>    counts cumul_counts      density posterior success #> 1       0           16 2.283242e-06 0.3716084   FALSE #> 2       1           17 2.749403e-05 0.4400664   FALSE #> 3       2           18 1.721366e-04 0.5092459    TRUE #> 4       3           19 7.433170e-04 0.5772595    TRUE #> 5       4           20 2.477723e-03 0.6423841    TRUE #> 6       5           21 6.764185e-03 0.7031617    TRUE #> 7       6           22 1.566443e-02 0.7584690    TRUE #> 8       7           23 3.145318e-02 0.8075520    TRUE #> 9       8           24 5.550560e-02 0.8500272    TRUE #> 10      9           25 8.672751e-02 0.8858553    TRUE #> 11     10           26 1.202621e-01 0.9152925    TRUE #> 12     11           27 1.475944e-01 0.9388274    TRUE #> 13     12           28 1.589479e-01 0.9571117    TRUE #> 14     13           29 1.477400e-01 0.9708907    TRUE #> 15     14           30 1.151221e-01 0.9809398    TRUE #> 16     15           31 7.137569e-02 0.9880117    TRUE #> 17     16           32 3.172253e-02 0.9927963    TRUE #> 18     17           33 7.697378e-03 0.9958932    TRUE #>   # Beta-mixture prior for experimental arm. predprobDist(   x = 16,   n = 23,   Nmax = 40,   delta = 0.1,   thetaT = 0.9,   parE = rbind(c(1, 1), c(2, 6)),   weights = c(2, 1),   parS = c(6, 11) ) #> $result #> [1] 0.7832483 #>  #> $table #>    counts cumul_counts      density posterior success #> 1       0           16 3.507384e-06 0.3380374   FALSE #> 2       1           17 4.016071e-05 0.4051061   FALSE #> 3       2           18 2.392160e-04 0.4743698   FALSE #> 4       3           19 9.839819e-04 0.5438945   FALSE #> 5       4           20 3.130387e-03 0.6117564   FALSE #> 6       5           21 8.176955e-03 0.6761812   FALSE #> 7       6           22 1.817373e-02 0.7356662   FALSE #> 8       7           23 3.514374e-02 0.7890733   FALSE #> 9       8           24 5.995174e-02 0.8356823   FALSE #> 10      9           25 9.090828e-02 0.8752013   FALSE #> 11     10           26 1.228218e-01 0.9077345    TRUE #> 12     11           27 1.474352e-01 0.9337167    TRUE #> 13     12           28 1.558746e-01 0.9538263    TRUE #> 14     13           29 1.427235e-01 0.9688894    TRUE #> 15     14           30 1.098938e-01 0.9797895    TRUE #> 16     15           31 6.750847e-02 0.9873913    TRUE #> 17     16           32 2.979691e-02 0.9924843    TRUE #> 18     17           33 7.194001e-03 0.9957484    TRUE #>   # More extensive use of historical trials for control arm. predprobDist(   x = 16,   n = 23,   xS = 5,   nS = 10,   Nmax = 40,   NmaxControl = 20,   delta = 0.1,   thetaT = 0.9,   parE = rbind(c(1, 1), c(3, 5)),   weights = c(2, 1),   parS = rbind(c(1, 1), c(2, 6)),   weightsS = c(2, 1) ) #> $result #> [1] 0.3112107 #>  #> $table #>    counts cumul_counts #> 1       0           16 #> 2       1           17 #> 3       2           18 #> 4       3           19 #> 5       4           20 #> 6       5           21 #> 7       6           22 #> 8       7           23 #> 9       8           24 #> 10      9           25 #> 11     10           26 #> 12     11           27 #> 13     12           28 #> 14     13           29 #> 15     14           30 #> 16     15           31 #> 17     16           32 #> 18     17           33 #>  #> $density #>               0            1            2            3            4 #> 0  4.453717e-08 1.664846e-07 3.455838e-07 5.195113e-07 6.234662e-07 #> 1  5.249172e-07 1.962196e-06 4.073067e-06 6.122985e-06 7.348202e-06 #> 2  3.199497e-06 1.196006e-05 2.482633e-05 3.732107e-05 4.478907e-05 #> 3  1.338575e-05 5.003734e-05 1.038660e-04 1.561403e-04 1.873842e-04 #> 4  4.304548e-05 1.609086e-04 3.340092e-04 5.021113e-04 6.025844e-04 #> 5  1.129542e-04 4.222348e-04 8.764624e-04 1.317574e-03 1.581222e-03 #> 6  2.506692e-04 9.370281e-04 1.945055e-03 2.923974e-03 3.509065e-03 #> 7  4.812191e-04 1.798848e-03 3.733994e-03 5.613261e-03 6.736482e-03 #> 8  8.106425e-04 3.030267e-03 6.290138e-03 9.455876e-03 1.134801e-02 #> 9  1.208202e-03 4.516386e-03 9.374979e-03 1.409328e-02 1.691336e-02 #> 10 1.598271e-03 5.974507e-03 1.240170e-02 1.864331e-02 2.237386e-02 #> 11 1.873110e-03 7.001883e-03 1.453430e-02 2.184921e-02 2.622126e-02 #> 12 1.929900e-03 7.214171e-03 1.497496e-02 2.251165e-02 2.701626e-02 #> 13 1.720860e-03 6.432757e-03 1.335292e-02 2.007326e-02 2.408995e-02 #> 14 1.290869e-03 4.825405e-03 1.001643e-02 1.505756e-02 1.807060e-02 #> 15 7.736242e-04 2.891889e-03 6.002896e-03 9.024070e-03 1.082980e-02 #> 16 3.338710e-04 1.248045e-03 2.590654e-03 3.894494e-03 4.673787e-03 #> 17 7.904304e-05 2.954712e-04 6.133303e-04 9.220109e-04 1.106506e-03 #>               5            6            7            8            9 #> 0  6.236829e-07 5.279150e-07 3.752095e-07 2.159072e-07 9.178787e-08 #> 1  7.350756e-06 6.222031e-06 4.422237e-06 2.544692e-06 1.081816e-06 #> 2  4.480464e-05 3.792478e-05 2.695460e-05 1.551052e-05 6.593931e-06 #> 3  1.874493e-04 1.586661e-04 1.127701e-04 6.489141e-05 2.758706e-05 #> 4  6.027938e-04 5.102335e-04 3.626426e-04 2.086758e-04 8.871361e-05 #> 5  1.581771e-03 1.338887e-03 9.515984e-04 5.475792e-04 2.327904e-04 #> 6  3.510284e-03 2.971272e-03 2.111797e-03 1.215194e-03 5.166111e-04 #> 7  6.738823e-03 5.704062e-03 4.054096e-03 2.332853e-03 9.917576e-04 #> 8  1.135195e-02 9.608835e-03 6.829369e-03 3.929831e-03 1.670675e-03 #> 9  1.691924e-02 1.432125e-02 1.017866e-02 5.857119e-03 2.490016e-03 #> 10 2.238163e-02 1.894488e-02 1.346486e-02 7.748097e-03 3.293921e-03 #> 11 2.623037e-02 2.220264e-02 1.578027e-02 9.080458e-03 3.860343e-03 #> 12 2.702564e-02 2.287580e-02 1.625871e-02 9.355766e-03 3.977384e-03 #> 13 2.409832e-02 2.039797e-02 1.449762e-02 8.342382e-03 3.546568e-03 #> 14 1.807688e-02 1.530113e-02 1.087510e-02 6.257873e-03 2.660387e-03 #> 15 1.083356e-02 9.170044e-03 6.517503e-03 3.750374e-03 1.594383e-03 #> 16 4.675412e-03 3.957492e-03 2.812742e-03 1.618539e-03 6.880838e-04 #> 17 1.106891e-03 9.369255e-04 6.659090e-04 3.831847e-04 1.629020e-04 #>              10 #> 0  2.222022e-08 #> 1  2.618886e-07 #> 2  1.596274e-06 #> 3  6.678339e-06 #> 4  2.147600e-05 #> 5  5.635445e-05 #> 6  1.250624e-04 #> 7  2.400870e-04 #> 8  4.044410e-04 #> 9  6.027890e-04 #> 10 7.974001e-04 #> 11 9.345209e-04 #> 12 9.628544e-04 #> 13 8.585614e-04 #> 14 6.440328e-04 #> 15 3.859720e-04 #> 16 1.665729e-04 #> 17 3.943569e-05 #>  #> $posterior #>            0         1         2         3         4          5          6 #> 0  0.6457965 0.5043094 0.3651517 0.2431677 0.1476992 0.08110101 0.03987006 #> 1  0.7135928 0.5792353 0.4377537 0.3052261 0.1945689 0.11232248 0.05813197 #> 2  0.7737201 0.6504532 0.5115653 0.3726003 0.2488362 0.15083508 0.08211150 #> 3  0.8254462 0.7160685 0.5842682 0.4434471 0.3096884 0.19684673 0.11261382 #> 4  0.8686390 0.7747145 0.6537144 0.5156829 0.3758536 0.25015824 0.15025315 #> 5  0.9036583 0.8255868 0.7180820 0.5871489 0.4456705 0.31011999 0.19535854 #> 6  0.9312233 0.8684185 0.7759850 0.6557786 0.5171979 0.37562651 0.24788752 #> 7  0.9522790 0.9034100 0.8265305 0.7197491 0.5883541 0.44515337 0.30735870 #> 8  0.9678738 0.9311288 0.8693242 0.7776032 0.6570721 0.51683748 0.37281469 #> 9  0.9790591 0.9523975 0.9044312 0.8283298 0.7214545 0.58859661 0.44282578 #> 10 0.9868156 0.9681811 0.9323017 0.8713997 0.7799143 0.65828017 0.51554263 #> 11 0.9920049 0.9794879 0.9536747 0.9067547 0.8312844 0.72383795 0.58880205 #> 12 0.9953458 0.9872879 0.9694724 0.9347562 0.8748876 0.78348954 0.66028319 #> 13 0.9974092 0.9924545 0.9806963 0.9560996 0.9105547 0.83587389 0.72770254 #> 14 0.9986272 0.9957292 0.9883366 0.9717091 0.9385924 0.88015758 0.78902615 #> 15 0.9993113 0.9977070 0.9933002 0.9826229 0.9597021 0.91608383 0.84266865 #> 16 0.9996751 0.9988396 0.9963635 0.9898862 0.9748636 0.94395193 0.88764499 #> 17 0.9998571 0.9994509 0.9981492 0.9944633 0.9852008 0.96452927 0.92364526 #>             7           8           9          10 #> 0  0.01736271 0.006618234 0.002177223 0.000607244 #> 1  0.02667879 0.010725890 0.003724229 0.001096971 #> 2  0.03969225 0.016826936 0.006166495 0.001918517 #> 3  0.05730728 0.025611584 0.009906077 0.003256013 #> 4  0.08044761 0.037893387 0.015469363 0.005373039 #> 5  0.10998402 0.054587720 0.023521522 0.008635660 #> 6  0.14664492 0.076670094 0.034871902 0.013536838 #> 7  0.19091479 0.105110987 0.050464634 0.020719214 #> 8  0.24292922 0.140785835 0.071347837 0.030991457 #> 9  0.30237821 0.184362228 0.098614756 0.045331274 #> 10 0.36843341 0.236171360 0.133311822 0.064866287 #> 11 0.43971666 0.296077326 0.176312572 0.090823018 #> 12 0.51432748 0.363364908 0.228163365 0.124435430 #> 13 0.58994191 0.436672070 0.288916500 0.166808911 #> 14 0.66398553 0.513994529 0.357976944 0.218744065 #> 15 0.73386808 0.592783481 0.433997101 0.280536434 #> 16 0.79724995 0.670142387 0.514855598 0.351780895 #> 17 0.85229689 0.743106809 0.597747462 0.431218910 #>  #> $success #>        0     1     2     3     4     5     6     7     8     9    10 #> 0  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 1  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 2  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 3  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 4  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 5   TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 6   TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 7   TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 8   TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 9   TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 10  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 11  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 12  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE #> 13  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE #> 14  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE #> 15  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE #> 16  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE #> 17  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE #>"},{"path":"https://genentech.github.io/phase1b/reference/qbetaMix.html","id":null,"dir":"Reference","previous_headings":"","what":"Beta-Mixture Quantile Function ‚Äî qbetaMix","title":"Beta-Mixture Quantile Function ‚Äî qbetaMix","text":"Calculates quantile Beta-Mixture distribution given probability.","code":""},{"path":"https://genentech.github.io/phase1b/reference/qbetaMix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Beta-Mixture Quantile Function ‚Äî qbetaMix","text":"","code":"qbetaMix(p, par, weights, lower.tail = TRUE)"},{"path":"https://genentech.github.io/phase1b/reference/qbetaMix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Beta-Mixture Quantile Function ‚Äî qbetaMix","text":"p (numeric): required probability. par (number): beta parameters matrix, K rows 2 columns, corresponding beta parameters K components. weights (matrix): mixture weights beta mixture prior. lower.tail (flag): whether CDF x taken lower upper tail","code":""},{"path":"https://genentech.github.io/phase1b/reference/qbetaMix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Beta-Mixture Quantile Function ‚Äî qbetaMix","text":"abscissa.","code":""},{"path":"https://genentech.github.io/phase1b/reference/qbetaMix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Beta-Mixture Quantile Function ‚Äî qbetaMix","text":"","code":"# Only 1 mixture component, i.e., weights = 1 qbetaMix(   p = 0.60,   par = rbind(c(0.2, 0.4)),   weights = 1 ) #> [1] 0.3112065  # With 2 mixture components qbetaMix(   p = 0.6, par = rbind(c(0.2, 0.4), c(1, 1)),   weights = c(0.6, 0.4) ) #> [1] 0.4887352  # Can also specify q as a vector qbetaMix(   p = seq(0, 1, .01),   par = rbind(c(0.2, 0.4), c(1, 1)),   weights = c(0.6, 0.4) ) #>   [1] 0.000000e+00 7.559517e-09 1.953533e-07 1.496884e-06 6.299409e-06 #>   [6] 1.921428e-05 4.776619e-05 1.030989e-04 2.005827e-04 3.603463e-04 #>  [11] 6.076451e-04 9.730193e-04 1.492178e-03 2.205550e-03 3.157486e-03 #>  [16] 4.395076e-03 5.966673e-03 7.920213e-03 1.030139e-02 1.315198e-02 #>  [21] 1.650834e-02 2.040028e-02 2.485037e-02 2.987369e-02 3.547799e-02 #>  [26] 4.166420e-02 4.842718e-02 5.575661e-02 6.363795e-02 7.205336e-02 #>  [31] 8.098254e-02 9.040354e-02 1.002934e-01 1.106286e-01 1.213856e-01 #>  [36] 1.325413e-01 1.440727e-01 1.559580e-01 1.681759e-01 1.807060e-01 #>  [41] 1.935289e-01 2.066261e-01 2.199802e-01 2.335743e-01 2.473928e-01 #>  [46] 2.614207e-01 2.756437e-01 2.900485e-01 3.046221e-01 3.193525e-01 #>  [51] 3.342281e-01 3.492378e-01 3.643710e-01 3.796176e-01 3.949677e-01 #>  [56] 4.104120e-01 4.259414e-01 4.415469e-01 4.572200e-01 4.729522e-01 #>  [61] 4.887352e-01 5.045608e-01 5.204208e-01 5.363071e-01 5.522116e-01 #>  [66] 5.681261e-01 5.840423e-01 5.999518e-01 6.158460e-01 6.317160e-01 #>  [71] 6.475525e-01 6.633462e-01 6.790869e-01 6.947641e-01 7.103666e-01 #>  [76] 7.258827e-01 7.412996e-01 7.566035e-01 7.717796e-01 7.868118e-01 #>  [81] 8.016824e-01 8.163716e-01 8.308579e-01 8.451169e-01 8.591214e-01 #>  [86] 8.728407e-01 8.862394e-01 8.992776e-01 9.119086e-01 9.240787e-01 #>  [91] 9.357248e-01 9.467726e-01 9.571346e-01 9.667067e-01 9.753661e-01 #>  [96] 9.829687e-01 9.893502e-01 9.943347e-01 9.977641e-01 9.995750e-01 #> [101] 1.000000e+00"},{"path":"https://genentech.github.io/phase1b/reference/qbetadiff.html","id":null,"dir":"Reference","previous_headings":"","what":"Beta difference Quantile Function ‚Äî qbetadiff","title":"Beta difference Quantile Function ‚Äî qbetadiff","text":"Calculates quantile Beta difference given probability.","code":""},{"path":"https://genentech.github.io/phase1b/reference/qbetadiff.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Beta difference Quantile Function ‚Äî qbetadiff","text":"","code":"qbetadiff(p, parY, parX, eps = .Machine$double.eps)"},{"path":"https://genentech.github.io/phase1b/reference/qbetadiff.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Beta difference Quantile Function ‚Äî qbetadiff","text":"p (number): vector probabilities parY (numeric): two parameters Y's Beta distribution (Treatment) parX (numeric): two parameters X's Beta distribution (Control) eps (number): lowest floating point number lower bound integration","code":""},{"path":"https://genentech.github.io/phase1b/reference/qbetadiff.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Beta difference Quantile Function ‚Äî qbetadiff","text":"quantile values.","code":""},{"path":"https://genentech.github.io/phase1b/reference/qbetadiff.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Beta difference Quantile Function ‚Äî qbetadiff","text":"","code":"# The following examples use these parameters: parX <- c(1, 52) parY <- c(5.5, 20.5)  # Calculate quantile when at there is at least 20% of difference. qbetadiff(   p = 0.2,   parY = parY,   parX = parX ) #> [1] 0.1228383"},{"path":"https://genentech.github.io/phase1b/reference/runShinyPhase1b.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch the ShinyPhase1b app ‚Äî runShinyPhase1b","title":"Launch the ShinyPhase1b app ‚Äî runShinyPhase1b","text":"Launch ShinyPhase1b app default web browser.","code":""},{"path":"https://genentech.github.io/phase1b/reference/runShinyPhase1b.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch the ShinyPhase1b app ‚Äî runShinyPhase1b","text":"","code":"runShinyPhase1b()"},{"path":"https://genentech.github.io/phase1b/reference/sumBetadiff.html","id":null,"dir":"Reference","previous_headings":"","what":"Mode and Credible Interval Calculation for The Difference between Two Beta Distributions ‚Äî sumBetadiff","title":"Mode and Credible Interval Calculation for The Difference between Two Beta Distributions ‚Äî sumBetadiff","text":"function summerize characters betadiff distribution dbetadiff","code":""},{"path":"https://genentech.github.io/phase1b/reference/sumBetadiff.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mode and Credible Interval Calculation for The Difference between Two Beta Distributions ‚Äî sumBetadiff","text":"","code":"sumBetadiff(parY, parX, level = 0.9, cutB, cutW)"},{"path":"https://genentech.github.io/phase1b/reference/sumBetadiff.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mode and Credible Interval Calculation for The Difference between Two Beta Distributions ‚Äî sumBetadiff","text":"parY two parameters Y's beta distribution (Treatment) parX two parameters X's beta distribution (Control) level credible interval cutB cutoff value upper bound cutW cutoff value lower bound","code":""},{"path":"https://genentech.github.io/phase1b/reference/sumBetadiff.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mode and Credible Interval Calculation for The Difference between Two Beta Distributions ‚Äî sumBetadiff","text":"sumbetadiff gives mode, credible interval distribution function, along probabilities cutB cutW.","code":""},{"path":"https://genentech.github.io/phase1b/reference/sumBetadiff.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Mode and Credible Interval Calculation for The Difference between Two Beta Distributions ‚Äî sumBetadiff","text":"","code":"parX <- c(1, 52) parY <- c(5.5, 20.5) sumBetadiff(parX, parY, 0.9, cutB = 0.8, cutW = 0.2) #> $mode #> [1] -0.1704321 #>  #> $ci #> [1] -0.33643341 -0.07270616 #>  #> $go #> [1] 3.379515e-43 #>  #> $nogo #> [1] 0.9999999 #>"},{"path":"https://genentech.github.io/phase1b/reference/sumTable.html","id":null,"dir":"Reference","previous_headings":"","what":"Return summary statistics under one response scenario ‚Äî sumTable","title":"Return summary statistics under one response scenario ‚Äî sumTable","text":"function calculate summary statistics specific response outcome scenario.","code":""},{"path":"https://genentech.github.io/phase1b/reference/sumTable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Return summary statistics under one response scenario ‚Äî sumTable","text":"","code":"sumTable(   thisResp,   TotalSample,   cut_B,   cut_W,   parX,   YPri = c(0.5, 0.5),   Round = 2 )"},{"path":"https://genentech.github.io/phase1b/reference/sumTable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Return summary statistics under one response scenario ‚Äî sumTable","text":"thisResp number responses TotalSample sample size cut_B meaningful improvement threshold: least cut_B (e.g. 15%) improvement cut_W poor improvement threshold: cut_W (e.g. 5%) improvement parX non-negative parameters beta distribution control (posterior) YPri non-negative parameters beta prior treatment, default Beta(0.5,0.5) Round Rounding output statistics","code":""},{"path":"https://genentech.github.io/phase1b/reference/sumTable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Return summary statistics under one response scenario ‚Äî sumTable","text":"vector results.","code":""},{"path":"https://genentech.github.io/phase1b/reference/sumTable.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Return summary statistics under one response scenario ‚Äî sumTable","text":"","code":"sumTable(2, 25, parX = c(1, 52), cut_B = 0.2, cut_W = 0.05, YPri = c(1, 1)) #>               summaries #> # resp             2.00 #> obs ORR [%]        8.00 #> mode [%]           6.48 #> CI lower [%]       0.71 #> CI upper [%]      20.68 #> prob.go [%]        5.87 #> prob.nogo [%]     26.59  # for multiple response scenarios (e.g. 0 to 8 responses out of 25) summaries <- do.call(   cbind,   lapply(c(0:8),     sumTable,     TotalSample = 25,     parX = c(1, 52),     cut_B = 0.2,     cut_W = 0.05   ) ) summaries #>               summaries summaries summaries summaries summaries summaries #> # resp             0.00      1.00      2.00      3.00      4.00      5.00 #> obs ORR [%]        0.00      4.00      8.00     12.00     16.00     20.00 #> mode [%]           0.00      1.02      4.80      8.83     12.92     17.04 #> CI lower [%]      -4.55     -2.42     -0.24      2.03      4.55      7.27 #> CI upper [%]      17.51     13.05     18.83     24.07     28.97     33.64 #> prob.go [%]        0.05      0.74      3.79     11.58     25.23     43.17 #> prob.nogo [%]     93.39     66.49     36.46     16.09      6.00      1.98 #>               summaries summaries summaries #> # resp             6.00      7.00      8.00 #> obs ORR [%]       24.00     28.00     32.00 #> mode [%]          21.18     25.32     29.47 #> CI lower [%]      10.17     13.20     16.37 #> CI upper [%]      38.13     42.46     46.67 #> prob.go [%]       61.70     77.26     88.13 #> prob.nogo [%]      0.59      0.17      0.04"},{"path":"https://genentech.github.io/phase1b/news/index.html","id":"phase1b-100","dir":"Changelog","previous_headings":"","what":"phase1b 1.0.0","title":"phase1b 1.0.0","text":"Initial public release package.","code":""}]
