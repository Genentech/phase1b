<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Decision rule 1: The trial is stopped for efficacy if the predictive probability of a
successful trial is larger than phiU, and stopped for futility if it is below
phiL. A trial is successful if after the maximum number of patients the
posterior probability of the treatment being at least delta better than the
control is above tT. Otherwise the decision is "failure". In this case, there is no
gray zone.'><title>Calculate operating characteristics for predictive probability method
with beta prior on SOC response rate (gray zone allowed in the final analysis) — ocPredprobDist • phase1b</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate operating characteristics for predictive probability method
with beta prior on SOC response rate (gray zone allowed in the final analysis) — ocPredprobDist"><meta property="og:description" content='Decision rule 1: The trial is stopped for efficacy if the predictive probability of a
successful trial is larger than phiU, and stopped for futility if it is below
phiL. A trial is successful if after the maximum number of patients the
posterior probability of the treatment being at least delta better than the
control is above tT. Otherwise the decision is "failure". In this case, there is no
gray zone.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125641273-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-125641273-1');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">phase1b</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">`phase1b`: Tools for Decision Making in Phase 1b Studies</a>
    <a class="dropdown-item" href="../articles/test.html">test</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://Genentech.github.io/phase1b/main">main</a> </div></li>
<!-- end dropdown for versions -->
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/genentech/phase1b">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculate operating characteristics for predictive probability method
with beta prior on SOC response rate (gray zone allowed in the final analysis)</h1>
      <small class="dont-index">Source: <a href="https://github.com/genentech/phase1b/blob/HEAD/R/ocPredprobDist.R" class="external-link"><code>R/ocPredprobDist.R</code></a></small>
      <div class="d-none name"><code>ocPredprobDist.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Decision rule 1: The trial is stopped for efficacy if the predictive probability of a
successful trial is larger than phiU, and stopped for futility if it is below
phiL. A trial is successful if after the maximum number of patients the
posterior probability of the treatment being at least delta better than the
control is above tT. Otherwise the decision is "failure". In this case, there is no
gray zone.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ocPredprobDist</span><span class="op">(</span></span>
<span>  <span class="va">nn</span>,</span>
<span>  <span class="va">p</span>,</span>
<span>  delta <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  deltaFu <span class="op">=</span> <span class="va">delta</span>,</span>
<span>  relativeDelta <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">tT</span>,</span>
<span>  tFu <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">tT</span>,</span>
<span>  phiL <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">phiFu</span>,</span>
<span>  <span class="va">phiU</span>,</span>
<span>  phiFu <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">phiL</span>,</span>
<span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span>, b <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  parS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span>, b <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  ns <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  nr <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  d <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nnF <span class="op">=</span> <span class="va">nn</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>nn</dt>
<dd><p>vector of look locations</p></dd>


<dt>p</dt>
<dd><p>true rate (scenario)</p></dd>


<dt>delta</dt>
<dd><p>We want to be better than the control + delta (default: 0)</p></dd>


<dt>deltaFu</dt>
<dd><p>declare futility when worse than the control + deltaW.
Specify only when decisian rule 2 is used.</p></dd>


<dt>relativeDelta</dt>
<dd><p>see <code><a href="postprobDist.html">postprobDist</a></code></p></dd>


<dt>tT</dt>
<dd><p>threshold for the probability to be above control + delta
at the end of the trial</p></dd>


<dt>tFu</dt>
<dd><p>threshold for the probability to be under control + deltaFu
at the end of the trial. Specify only when decisian rule 2 is used.</p></dd>


<dt>phiL</dt>
<dd><p>lower threshold on the predictive probability</p></dd>


<dt>phiU</dt>
<dd><p>upper threshold on the predictive probability</p></dd>


<dt>phiFu</dt>
<dd><p>threshold on the predictive probability for futility. Specify only
when decisian rule 2 is used. phiL argument should be skipped in this case.</p></dd>


<dt>parE</dt>
<dd><p>beta parameters for the prior on the treatment proportion</p></dd>


<dt>parS</dt>
<dd><p>beta parameters for the prior on the control proportion</p></dd>


<dt>ns</dt>
<dd><p>number of simulations</p></dd>


<dt>nr</dt>
<dd><p>generate random look locations? (not default)</p></dd>


<dt>d</dt>
<dd><p>distance for random looks around the look locations in <code>nn</code></p></dd>


<dt>nnF</dt>
<dd><p>vector of look locations for futility
(default: same as efficacy)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list with the following elements:
oc: matrix with operating characteristics (see Details section)
Decision: vector of the decisions made in the simulated trials
(<code>TRUE</code> for success, <code>FALSE</code> for failure)
SampleSize: vector of the sample sizes in the simulated trials
nn: vector of look locations
nnE: vector of efficacy look locations
nnF: vector of futility look locations
params: input parameters of this function</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Decision rule 2:A variation can be requested when skipping the argument phiL and utilizing the arguments
DeltaFu, tFu &amp; PhiFu. The trial can be stopped for futility if the predictive
probability of an unsuccessful trial is larger than phiFu. In this case, the
decision is "failure" when the posterior probability of the treatment being
at most deltaFu better than the control is above tFu at the maximum number of
patients.</p>
<p>Returned operating characteristics in a matrix include:
ExpectedN: expected number of patients in the trials
PrStopEarly: probability to stop the trial early (before reaching the
maximum sample size)
PrEarlyEff: probability to decide for efficacy early
PrEarlyFut: probability to decide for futility early
PrEfficacy: probability to decide for efficacy
PrFutility: probability to decide for futility
PrGrayZone: probability of no decision at the end ("gray zone")</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## to examine operating characteristics of a phase Ib design with 2 interim analyses</span></span></span>
<span class="r-in"><span><span class="co">## (sample size @ 10, 20 using predictive probability) and one final analysis</span></span></span>
<span class="r-in"><span><span class="co">## (sample size @ 30);</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># design details</span></span></span>
<span class="r-in"><span><span class="co"># multiple looks @ 10, 20, 30 patients</span></span></span>
<span class="r-in"><span><span class="co"># True response rate of the treatment group=0.4</span></span></span>
<span class="r-in"><span><span class="co"># response rate improvement (delta)=10%  as an absolute value (default)</span></span></span>
<span class="r-in"><span><span class="co"># 1)</span></span></span>
<span class="r-in"><span><span class="co"># denote treatment response rate as RRS</span></span></span>
<span class="r-in"><span><span class="co"># trial success is defined as: P(RRS&gt;control+delta)&gt;tT</span></span></span>
<span class="r-in"><span><span class="co"># note: ns is suggested to be a larger value than 10 in a real study in order to</span></span></span>
<span class="r-in"><span><span class="co"># achieve correct results</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res1</span> <span class="op">&lt;-</span> <span class="fu">ocPredprobDist</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  delta <span class="op">=</span> <span class="fl">0.1</span>, tT <span class="op">=</span> <span class="fl">0.6</span>, phiL <span class="op">=</span> <span class="fl">0.2</span>, phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, parS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">25</span><span class="op">)</span>, ns <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res1</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]        17         0.7        0.7          0        0.9        0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]          0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># this function will generate d based on "floor(min(nn - c(0,nn[-length(nn)]))/2)"</span></span></span>
<span class="r-in"><span><span class="co"># if d is missing</span></span></span>
<span class="r-in"><span><span class="va">res2</span> <span class="op">&lt;-</span> <span class="fu">ocPredprobDist</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  delta <span class="op">=</span> <span class="fl">0.1</span>, tT <span class="op">=</span> <span class="fl">0.6</span>, phiL <span class="op">=</span> <span class="fl">0.2</span>, phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, parS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">25</span><span class="op">)</span>, ns <span class="op">=</span> <span class="fl">10</span>, nr <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res2</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]      10.3           1          1          0          1          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]          0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># note that d has to be a positive value;</span></span></span>
<span class="r-in"><span><span class="va">res3</span> <span class="op">&lt;-</span> <span class="fu">ocPredprobDist</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  delta <span class="op">=</span> <span class="fl">0.1</span>, tT <span class="op">=</span> <span class="fl">0.6</span>, phiL <span class="op">=</span> <span class="fl">0.2</span>, phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, parS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">25</span><span class="op">)</span>, ns <span class="op">=</span> <span class="fl">10</span>, nr <span class="op">=</span> <span class="cn">TRUE</span>, d <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res3</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]        18         0.7        0.6        0.1        0.9        0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]          0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># finally, we can also have separate specification of efficacy and futility analyses. E.g.</span></span></span>
<span class="r-in"><span><span class="co"># here have futility decisions only at the final analysis:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">res4</span> <span class="op">&lt;-</span> <span class="fu">ocPredprobDist</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  delta <span class="op">=</span> <span class="fl">0.1</span>, tT <span class="op">=</span> <span class="fl">0.6</span>, phiL <span class="op">=</span> <span class="fl">0.2</span>, phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, parS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">25</span><span class="op">)</span>, ns <span class="op">=</span> <span class="fl">10</span>, nr <span class="op">=</span> <span class="cn">TRUE</span>, d <span class="op">=</span> <span class="fl">5</span>, nnF <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res4</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]      14.5         0.8        0.8          0          1          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]          0</span>
<span class="r-in"><span><span class="co"># compared to res3, we see that there is no early futility stopping anymore,</span></span></span>
<span class="r-in"><span><span class="co"># and the overall probability for stopping for futility (which is the type II error here)</span></span></span>
<span class="r-in"><span><span class="co"># is much lower.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 2)</span></span></span>
<span class="r-in"><span><span class="co"># to examine operating characteristics of a phase Ib design with a</span></span></span>
<span class="r-in"><span><span class="co"># seperate rule for futility at final analysis</span></span></span>
<span class="r-in"><span><span class="co"># denote treatment response rate as RRS</span></span></span>
<span class="r-in"><span><span class="co"># trial success is defined as: P(RRS&gt;control+delta)&gt;tT</span></span></span>
<span class="r-in"><span><span class="co"># trial failure is defined as: P(RRS&lt;control+deltaFu)&gt;tFu</span></span></span>
<span class="r-in"><span><span class="co"># (gray zone could occur in the final analysis)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res5</span> <span class="op">&lt;-</span> <span class="fu">ocPredprobDist</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  delta <span class="op">=</span> <span class="fl">0.1</span>, deltaFu <span class="op">=</span> <span class="fl">0.05</span>, tT <span class="op">=</span> <span class="fl">0.6</span>, tFu <span class="op">=</span> <span class="fl">0.6</span>, phiFu <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  phiU <span class="op">=</span> <span class="fl">0.8</span>, parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, parS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">25</span><span class="op">)</span>, ns <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res5</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]        17         0.7        0.7          0        0.9          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]        0.1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># when tFu=1-tT and phiFu=1-phiL, this decisian rule (res6) is the same as the res1</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res6</span> <span class="op">&lt;-</span> <span class="fu">ocPredprobDist</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  delta <span class="op">=</span> <span class="fl">0.1</span>, tT <span class="op">=</span> <span class="fl">0.6</span>, tFu <span class="op">=</span> <span class="fl">0.4</span>, phiFu <span class="op">=</span> <span class="fl">0.8</span>, phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, parS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">25</span><span class="op">)</span>, ns <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res6</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]        17         0.7        0.7          0        0.9        0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]          0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If both phiL and phiFu arguments are specified, phiL will be overwrite by 1-phiFu.</span></span></span>
<span class="r-in"><span><span class="co"># See warning message (which we suppress here to let checks pass).</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res7</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu">ocPredprobDist</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  delta <span class="op">=</span> <span class="fl">0.1</span>, tT <span class="op">=</span> <span class="fl">0.6</span>, tFu <span class="op">=</span> <span class="fl">0.4</span>, phiL <span class="op">=</span> <span class="fl">0.1</span>, phiFu <span class="op">=</span> <span class="fl">0.8</span>, phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, parS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">25</span><span class="op">)</span>, ns <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res7</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]        17         0.7        0.7          0        0.9        0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]          0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Daniel Sabanés Bové, Markus Elze, Tony Pourmohamad, Jiawen Zhu, James Lymp, Anastasia Teterina, F. Hoffmann-La Roche Ltd.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

