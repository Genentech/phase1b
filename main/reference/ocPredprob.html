<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Operating Characteristics for Predictive Probability method — ocPredprob • phase1b</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Operating Characteristics for Predictive Probability method — ocPredprob">
<meta name="description" content="
Calculate operating characteristics for predictive probability method.
It is assumed that the true response rate is truep. Trials can stop for Futility
or Efficacy. Trials can also stop at Interim or Final for Futility or Efficacy.
There are two variations of decision rule, Decision 1 and Decision 2, to
evaluate decision at Interim or Final, for Futility or Efficacy. Decision 1 is
used when decision1 == TRUE which is the default setting.
Decision 1:


The criteria for Decision 1 for Interim looks are :
interim GO =  P(successful trial at final) &amp;gt; phiU
interim STOP = P(successful trial at final) &amp;lt; phiL


The criteria for Decision 1 for Final looks are:
Final GO = P( RR &amp;gt; p0 | data) &amp;gt; tT
Final STOP = P( RR &amp;gt; p0 | data ) &amp;lt; tT





Decision 2:


The criteria for Decision 2 for Interim looks are :
Interim GO : P ( success at final) &amp;gt; phiU
Interim STOP : P (failure at final ) &amp;gt; phiFu


The criteria for Decision 2 for Futility looks are :
Final GO = P( RR &amp;gt; p0) &amp;gt; tT
Final STOP = P( RR  &amp;lt; p1) &amp;gt; tF



">
<meta property="og:description" content="
Calculate operating characteristics for predictive probability method.
It is assumed that the true response rate is truep. Trials can stop for Futility
or Efficacy. Trials can also stop at Interim or Final for Futility or Efficacy.
There are two variations of decision rule, Decision 1 and Decision 2, to
evaluate decision at Interim or Final, for Futility or Efficacy. Decision 1 is
used when decision1 == TRUE which is the default setting.
Decision 1:


The criteria for Decision 1 for Interim looks are :
interim GO =  P(successful trial at final) &amp;gt; phiU
interim STOP = P(successful trial at final) &amp;lt; phiL


The criteria for Decision 1 for Final looks are:
Final GO = P( RR &amp;gt; p0 | data) &amp;gt; tT
Final STOP = P( RR &amp;gt; p0 | data ) &amp;lt; tT





Decision 2:


The criteria for Decision 2 for Interim looks are :
Interim GO : P ( success at final) &amp;gt; phiU
Interim STOP : P (failure at final ) &amp;gt; phiFu


The criteria for Decision 2 for Futility looks are :
Final GO = P( RR &amp;gt; p0) &amp;gt; tT
Final STOP = P( RR  &amp;lt; p1) &amp;gt; tF



">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125641273-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-125641273-1');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">phase1b</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction.html">`phase1b`: Tools for Decision Making in Phase 1b Studies</a></li>
    <li><a class="dropdown-item" href="../articles/test.html">test</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      <div><li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://Genentech.github.io/phase1b/main">main</a>
</div>
</li></div>
</ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/genentech/phase1b"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Operating Characteristics for Predictive Probability method</h1>
      <small class="dont-index">Source: <a href="https://github.com/genentech/phase1b/blob/main/R/ocPredprob.R" class="external-link"><code>R/ocPredprob.R</code></a></small>
      <div class="d-none name"><code>ocPredprob.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>Calculate operating characteristics for predictive probability method.</p>
<p>It is assumed that the true response rate is <code>truep</code>. Trials can stop for Futility
or Efficacy. Trials can also stop at Interim or Final for Futility or Efficacy.</p>
<p>There are two variations of decision rule, Decision 1 and Decision 2, to
evaluate decision at Interim or Final, for Futility or Efficacy. Decision 1 is
used when <code>decision1 == TRUE</code> which is the default setting.</p>
<div class="section">
<h3 id="decision-">Decision 1:<a class="anchor" aria-label="anchor" href="#decision-"></a>
</h3>


<p>The criteria for Decision 1 for Interim looks are :</p>
<ul>
<li><p>interim GO =  P(successful trial at final) &gt; phiU</p></li>
<li><p>interim STOP = P(successful trial at final) &lt; phiL</p></li>
</ul>
<p>The criteria for Decision 1 for Final looks are:</p>
<ul>
<li><p>Final GO = P( RR &gt; p0 | data) &gt; tT</p></li>
<li><p>Final STOP = P( RR &gt; p0 | data ) &lt; tT</p></li>
</ul>
</div>

<div class="section">
<h3 id="decision--1">Decision 2:<a class="anchor" aria-label="anchor" href="#decision--1"></a>
</h3>


<p>The criteria for Decision 2 for Interim looks are :</p>
<ul>
<li><p>Interim GO : P ( success at final) &gt; phiU</p></li>
<li><p>Interim STOP : P (failure at final ) &gt; phiFu</p></li>
</ul>
<p>The criteria for Decision 2 for Futility looks are :</p>
<ul>
<li><p>Final GO = P( RR &gt; p0) &gt; tT</p></li>
<li><p>Final STOP = P( RR  &lt; p1) &gt; tF</p></li>
</ul>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a>
</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ocPredprob</span><span class="op">(</span></span>
<span>  <span class="va">nnE</span>,</span>
<span>  <span class="va">truep</span>,</span>
<span>  <span class="va">p0</span>,</span>
<span>  <span class="va">phiU</span>,</span>
<span>  p1 <span class="op">=</span> <span class="va">p0</span>,</span>
<span>  tT <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">tF</span>,</span>
<span>  tF <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">tT</span>,</span>
<span>  phiL <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">phiFu</span>,</span>
<span>  phiFu <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">phiL</span>,</span>
<span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  sim <span class="op">=</span> <span class="fl">50000</span>,</span>
<span>  wiggle <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nnF <span class="op">=</span> <span class="va">nnE</span>,</span>
<span>  decision1 <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h2>


<dl>
<dt id="arg-nne">nnE<a class="anchor" aria-label="anchor" href="#arg-nne"></a>
</dt>
<dd><p>(<code>numeric</code>):<br> sample size or sizes where study can be stopped for Efficacy decision. If <code>0</code> or <code>NULL</code> and
<code>length(nnE) = 1</code> then no Efficacy looks are performed.</p></dd>


<dt id="arg-truep">truep<a class="anchor" aria-label="anchor" href="#arg-truep"></a>
</dt>
<dd><p>(<code>number</code>):<br> assumed true response rate or true rate (scenario).</p></dd>


<dt id="arg-p-">p0<a class="anchor" aria-label="anchor" href="#arg-p-"></a>
</dt>
<dd><p>(<code>number</code>):<br> lower Futility threshold of response rate.</p></dd>


<dt id="arg-phiu">phiU<a class="anchor" aria-label="anchor" href="#arg-phiu"></a>
</dt>
<dd><p>(<code>number</code>):<br> upper threshold on the predictive probability.</p></dd>


<dt id="arg-p-">p1<a class="anchor" aria-label="anchor" href="#arg-p-"></a>
</dt>
<dd><p>(<code>number</code>):<br> upper Futility threshold of response rate.</p></dd>


<dt id="arg-tt">tT<a class="anchor" aria-label="anchor" href="#arg-tt"></a>
</dt>
<dd><p>(<code>number</code>):<br> threshold of which assumed <code>truep</code> exceeds acceptable threshold of <code>p0</code>.</p></dd>


<dt id="arg-tf">tF<a class="anchor" aria-label="anchor" href="#arg-tf"></a>
</dt>
<dd><p>(<code>number</code>):<br> threshold of which assumed <code>truep</code> does not exceed threshold of <code>p1</code>.</p></dd>


<dt id="arg-phil">phiL<a class="anchor" aria-label="anchor" href="#arg-phil"></a>
</dt>
<dd><p>(<code>number</code>):<br> lower threshold on the predictive probability.</p></dd>


<dt id="arg-phifu">phiFu<a class="anchor" aria-label="anchor" href="#arg-phifu"></a>
</dt>
<dd><p>(<code>number</code>):<br> upper threshold on the predictive probability.</p></dd>


<dt id="arg-pare">parE<a class="anchor" aria-label="anchor" href="#arg-pare"></a>
</dt>
<dd><p>(<code>numeric</code>):<br> alpha and beta parameters for the prior on the treatment population.
Default set at alpha = 1, beta = 1, or uniform prior.</p></dd>


<dt id="arg-sim">sim<a class="anchor" aria-label="anchor" href="#arg-sim"></a>
</dt>
<dd><p>(<code>number</code>):<br> number of simulations.</p></dd>


<dt id="arg-wiggle">wiggle<a class="anchor" aria-label="anchor" href="#arg-wiggle"></a>
</dt>
<dd><p>(<code>flag</code>):<br> generate random look locations (not default). If <code>wiggle = TRUE</code> and <code>nnE = nnF</code>, then all wiggled
looks are the same between <code>nnE</code> and <code>nnF</code>.</p></dd>


<dt id="arg-nnf">nnF<a class="anchor" aria-label="anchor" href="#arg-nnf"></a>
</dt>
<dd><p>(<code>numeric</code>):<br> sample size or sizes where study can be stopped for Efficacy decision. If <code>0</code> or <code>NULL</code> and
<code>length(nnF) = 1</code> then no Futility looks are performed.</p></dd>


<dt id="arg-decision-">decision1<a class="anchor" aria-label="anchor" href="#arg-decision-"></a>
</dt>
<dd><p>(<code>flag</code>):<br> Flag if <code>decision1 = TRUE</code> then Decision 1 rules will be used, otherwise Decision 2 rules will be used.</p></dd>

</dl>
</div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a>
</h2>
    <p>A list with the following elements:</p>
<ul>
<li>
<p><code>oc</code>: matrix with operating characteristics with the following details:</p>
<ul>
<li><p><code>ExpectedN</code>: expected number of patients in the trials</p></li>
<li><p><code>PrStopEarly</code>: probability to stop the trial early (before reaching the
maximum sample size)</p></li>
<li><p><code>PrEarlyEff</code>: probability of Early Go decision</p></li>
<li><p><code>PrEarlyFut</code>: probability of for Early Stop decision</p></li>
<li><p><code>PrEfficacy</code>: probability of Go decision</p></li>
<li><p><code>PrFutility</code>: probability of Stop decision</p></li>
<li><p><code>PrGrayZone</code>: probability between Go and Stop ,"Evaluate" or Gray decision zone</p></li>
</ul>
</li>
<li><p><code>Decision</code> : numeric of results with <code>TRUE</code> as Go decision, <code>FALSE</code> as Stop and <code>NA</code> as gray zone.</p></li>
<li><p><code>SampleSize</code> : numeric of sample sizes from <code>nnE</code> or <code>nnF</code> or both.</p></li>
<li><p><code>wiggled_nnE</code> : user input for <code>nnE</code> with random distance applied.</p></li>
<li><p><code>wiggled_nnF</code> : user input for <code>nnF</code> with random distance applied.</p></li>
<li><p><code>wiggled_dist</code> : magnitude of random distance applied in order of input looks.</p></li>
<li><p><code>params</code> : all user input arguments.</p></li>
</ul>
</div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a>
</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Here we illustrate an example for Decision 1 with the following assumptions :</span></span></span>
<span class="r-in"><span><span class="co"># True response rate or truep of the treatment group = 40%</span></span></span>
<span class="r-in"><span><span class="co"># The following are the Final Stop rules respectively :</span></span></span>
<span class="r-in"><span><span class="co"># - Final look for Efficacy: Pr( RR &gt; 25% ) &gt; 60% or P( RR &gt; p0) &gt; tT</span></span></span>
<span class="r-in"><span><span class="co"># - Final look for Futility: Pr( RR &lt; 25% ) &lt; 60% or P(RR &gt; p0) &lt; tT</span></span></span>
<span class="r-in"><span><span class="co"># - Interim look for Efficacy: Pr( success at final ) &gt; 80% or P(success at final) &gt; phiU</span></span></span>
<span class="r-in"><span><span class="co"># - Interim look for Futility: Pr( failure at final ) &lt; 20% or P(success at final) &lt; phiL</span></span></span>
<span class="r-in"><span><span class="co"># We assume a prior of treatment arm parE = Beta(1,1), unless otherwise indicated.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Decision 1 with no wiggle.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">ocPredprob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nnE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  truep <span class="op">=</span> <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  p0 <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>  tT <span class="op">=</span> <span class="fl">0.6</span>,</span></span>
<span class="r-in"><span>  phiL <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>  phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sim <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  wiggle <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  decision1 <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Advise to use sim &gt;= 50000 to achieve convergence</span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      12.6        0.74          0       0.74        0.2        0.8          0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Decision 1 with wiggle.</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">ocPredprob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nnE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  truep <span class="op">=</span> <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  p0 <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>  tT <span class="op">=</span> <span class="fl">0.6</span>,</span></span>
<span class="r-in"><span>  phiL <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>  phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sim <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  wiggle <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  nnF <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  decision1 <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Advise to use sim &gt;= 50000 to achieve convergence</span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      13.3         0.7          0        0.7       0.22       0.78          0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Decision 1 with separate Futility and Efficacy looks at interim and final without wiggle.</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">ocPredprob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nnE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span>, <span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  truep <span class="op">=</span> <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  p0 <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>  p1 <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>  tT <span class="op">=</span> <span class="fl">0.6</span>,</span></span>
<span class="r-in"><span>  phiL <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>  phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sim <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  wiggle <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  nnF <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  decision1 <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Advise to use sim &gt;= 50000 to achieve convergence</span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        16           1          0          1          0          1          0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Decision 1 with separate Futility and Efficacy looks at interim and final with wiggle.</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">ocPredprob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nnE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span>, <span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  truep <span class="op">=</span> <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  p0 <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>  p1 <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>  tT <span class="op">=</span> <span class="fl">0.6</span>,</span></span>
<span class="r-in"><span>  phiL <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>  phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sim <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  wiggle <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  nnF <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  decision1 <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Advise to use sim &gt;= 50000 to achieve convergence</span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     14.82        0.96          0       0.96       0.04       0.96          0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Here we illustrate an example for Decision 2 with the following assumptions :</span></span></span>
<span class="r-in"><span><span class="co"># True response rate or truep of the treatment group = 60%</span></span></span>
<span class="r-in"><span><span class="co"># The following are the Final Stop rules respectively :</span></span></span>
<span class="r-in"><span><span class="co"># - Final look for Efficacy: Pr( RR &gt; 25% ) &gt; 60% or P(RR &gt; p0) &gt; tT</span></span></span>
<span class="r-in"><span><span class="co"># - Final look for Futility: Pr( RR &lt; 25% ) &lt; 60% or P(RR &lt; p1) &gt; tF</span></span></span>
<span class="r-in"><span><span class="co"># - Interim look for Efficacy: Pr( success at final ) &gt; 80% or P(success at final) &gt; phiU</span></span></span>
<span class="r-in"><span><span class="co"># - Interim look for Futility: Pr( failure at final ) &gt; 80% or P(failure at final) &gt; phiFu</span></span></span>
<span class="r-in"><span><span class="co"># We assume a prior of treatment arm parE = Beta(1,1), unless otherwise indicated.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Decision 2 without wiggle.</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">ocPredprob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nnE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  truep <span class="op">=</span> <span class="fl">0.6</span>,</span></span>
<span class="r-in"><span>  p0 <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>  p1 <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>  tT <span class="op">=</span> <span class="fl">0.6</span>,</span></span>
<span class="r-in"><span>  tF <span class="op">=</span> <span class="fl">0.6</span>,</span></span>
<span class="r-in"><span>  phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  phiFu <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sim <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  wiggle <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  nnF <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  decision1 <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Advise to use sim &gt;= 50000 to achieve convergence</span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        10           1       0.98       0.02       0.98       0.02          0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Decision 2 with wiggle and with Futility only at final with non-uniform beta prior parE.</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">ocPredprob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nnE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span>, <span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  truep <span class="op">=</span> <span class="fl">0.6</span>,</span></span>
<span class="r-in"><span>  p0 <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>  p1 <span class="op">=</span> <span class="fl">0.25</span>,</span></span>
<span class="r-in"><span>  tT <span class="op">=</span> <span class="fl">0.6</span>,</span></span>
<span class="r-in"><span>  tF <span class="op">=</span> <span class="fl">0.6</span>,</span></span>
<span class="r-in"><span>  phiL <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  phiU <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11</span>, <span class="fl">19</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sim <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  wiggle <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  nnF <span class="op">=</span> <span class="fl">30</span>,</span></span>
<span class="r-in"><span>  decision1 <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Advise to use sim &gt;= 50000 to achieve convergence</span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">oc</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ExpectedN PrStopEarly PrEarlyEff PrEarlyFut PrEfficacy PrFutility PrGrayZone</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      9.96           1          1          0          1          0          0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Sabanes Bove, Markus Elze, Tony Pourmohamad, Jiawen Zhu, James Lymp, Anastasia Teterina, Audrey Yeo, F. Hoffmann-La Roche Ltd.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
