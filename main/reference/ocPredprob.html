<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="
Calculate operating characteristics for predictive probability method.
It is assumed that the true response rate is truep. Trials can stop for Futility
or Efficacy. Trials can also stop at Interim or Final for Futility or Efficacy.
There are two variations of decision rule, Decision 1 and Decision 2, to
evaluate decision at Interim or Final, for Futility or Efficacy. Decision 1 is
used when decision1 == TRUE which is the default setting.
Decision 1:


The criteria for Decision 1 for Interim looks are :
interim GO =  P(successful trial at final) &amp;gt; phiU
interim STOP = P(successful trial at final) &amp;lt; phiL


The criteria for Decision 1 for Final looks are:
Final GO = P( response rate &amp;gt; p0 | data) &amp;gt; tT
Final STOP = P( response rate &amp;gt; p0 | data ) &amp;lt; tT





Decision 2:


The criteria for Decision 2 for Interim looks are :
Interim GO : P ( success at final) &amp;gt; phiU
Interim STOP : P (failure at final ) &amp;gt; phiFu


The criteria for Decision 2 for Futility looks are :
Final GO = P( response rate &amp;gt; p0) &amp;gt; tT
Final STOP = P( response rate  &amp;lt; p1) &amp;gt; tF



"><title>Operating Characteristics for Predictive Probability method — ocPredprob • phase1b</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Operating Characteristics for Predictive Probability method — ocPredprob"><meta property="og:description" content="
Calculate operating characteristics for predictive probability method.
It is assumed that the true response rate is truep. Trials can stop for Futility
or Efficacy. Trials can also stop at Interim or Final for Futility or Efficacy.
There are two variations of decision rule, Decision 1 and Decision 2, to
evaluate decision at Interim or Final, for Futility or Efficacy. Decision 1 is
used when decision1 == TRUE which is the default setting.
Decision 1:


The criteria for Decision 1 for Interim looks are :
interim GO =  P(successful trial at final) &amp;gt; phiU
interim STOP = P(successful trial at final) &amp;lt; phiL


The criteria for Decision 1 for Final looks are:
Final GO = P( response rate &amp;gt; p0 | data) &amp;gt; tT
Final STOP = P( response rate &amp;gt; p0 | data ) &amp;lt; tT





Decision 2:


The criteria for Decision 2 for Interim looks are :
Interim GO : P ( success at final) &amp;gt; phiU
Interim STOP : P (failure at final ) &amp;gt; phiFu


The criteria for Decision 2 for Futility looks are :
Final GO = P( response rate &amp;gt; p0) &amp;gt; tT
Final STOP = P( response rate  &amp;lt; p1) &amp;gt; tF



"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125641273-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-125641273-1');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">phase1b</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">`phase1b`: Tools for Decision Making in Phase 1b Studies</a>
    <a class="dropdown-item" href="../articles/test.html">test</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/genentech/phase1b">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Operating Characteristics for Predictive Probability method</h1>
      <small class="dont-index">Source: <a href="https://github.com/genentech/phase1b/blob/HEAD/R/ocPredprob.R" class="external-link"><code>R/ocPredprob.R</code></a></small>
      <div class="d-none name"><code>ocPredprob.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>Calculate operating characteristics for predictive probability method.</p>
<p>It is assumed that the true response rate is <code>truep</code>. Trials can stop for Futility
or Efficacy. Trials can also stop at Interim or Final for Futility or Efficacy.</p>
<p>There are two variations of decision rule, Decision 1 and Decision 2, to
evaluate decision at Interim or Final, for Futility or Efficacy. Decision 1 is
used when <code>decision1 == TRUE</code> which is the default setting.</p><div class="section">
<h3 id="decision-">Decision 1:<a class="anchor" aria-label="anchor" href="#decision-"></a></h3>


<p>The criteria for Decision 1 for Interim looks are :</p><ul><li><p>interim GO =  P(successful trial at final) &gt; phiU</p></li>
<li><p>interim STOP = P(successful trial at final) &lt; phiL</p></li>
</ul><p>The criteria for Decision 1 for Final looks are:</p><ul><li><p>Final GO = P( response rate &gt; p0 | data) &gt; tT</p></li>
<li><p>Final STOP = P( response rate &gt; p0 | data ) &lt; tT</p></li>
</ul></div>

<div class="section">
<h3 id="decision--1">Decision 2:<a class="anchor" aria-label="anchor" href="#decision--1"></a></h3>


<p>The criteria for Decision 2 for Interim looks are :</p><ul><li><p>Interim GO : P ( success at final) &gt; phiU</p></li>
<li><p>Interim STOP : P (failure at final ) &gt; phiFu</p></li>
</ul><p>The criteria for Decision 2 for Futility looks are :</p><ul><li><p>Final GO = P( response rate &gt; p0) &gt; tT</p></li>
<li><p>Final STOP = P( response rate  &lt; p1) &gt; tF</p></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ocPredprob</span><span class="op">(</span></span>
<span>  <span class="va">nnE</span>,</span>
<span>  <span class="va">truep</span>,</span>
<span>  <span class="va">p0</span>,</span>
<span>  <span class="va">phiU</span>,</span>
<span>  p1 <span class="op">=</span> <span class="va">p0</span>,</span>
<span>  tT <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">tF</span>,</span>
<span>  tF <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">tT</span>,</span>
<span>  phiL <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">phiFu</span>,</span>
<span>  phiFu <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">phiL</span>,</span>
<span>  parE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  sim <span class="op">=</span> <span class="fl">50000</span>,</span>
<span>  wiggle <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nnF <span class="op">=</span> <span class="va">nnE</span>,</span>
<span>  decision1 <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>nnE</dt>
<dd><p>(<code>numeric</code>):<br> sample size or sizes where study can be stopped for Efficacy decision. If <code>0</code> or <code>NULL</code> and
<code>length(nnE) = 1</code> then no Efficacy looks are performed.</p></dd>


<dt>truep</dt>
<dd><p>(<code>number</code>):<br> assumed true response rate or true rate (scenario).</p></dd>


<dt>p0</dt>
<dd><p>(<code>number</code>):<br> lower Futility threshold of response rate.</p></dd>


<dt>phiU</dt>
<dd><p>(<code>number</code>):<br> upper threshold on the predictive probability.</p></dd>


<dt>p1</dt>
<dd><p>(<code>number</code>):<br> upper Futility threshold of response rate.</p></dd>


<dt>tT</dt>
<dd><p>(<code>number</code>):<br> threshold of which assumed <code>truep</code> exceeds acceptable threshold of <code>p0</code>.</p></dd>


<dt>tF</dt>
<dd><p>(<code>number</code>):<br> threshold of which assumed <code>truep</code> does not exceed threshold of <code>p1</code>.</p></dd>


<dt>phiL</dt>
<dd><p>(<code>number</code>):<br> lower threshold on the predictive probability.</p></dd>


<dt>phiFu</dt>
<dd><p>(<code>number</code>):<br> upper threshold on the predictive probability.</p></dd>


<dt>parE</dt>
<dd><p>(<code>numeric</code>):<br> alpha and beta parameters for the prior on the treatment population.
Default set at alpha = 1, beta = 1, or uniform prior.</p></dd>


<dt>sim</dt>
<dd><p>(<code>number</code>):<br> number of simulations.</p></dd>


<dt>wiggle</dt>
<dd><p>(<code>flag</code>):<br> generate random look locations (not default). If <code>wiggle = TRUE</code> and <code>nnE = nnF</code>, then all wiggled
looks are the same between <code>nnE</code> and <code>nnF</code>.</p></dd>


<dt>nnF</dt>
<dd><p>(<code>numeric</code>):<br> sample size or sizes where study can be stopped for Efficacy decision. If <code>0</code> or <code>NULL</code> and
<code>length(nnF) = 1</code> then no Futility looks are performed.</p></dd>


<dt>decision1</dt>
<dd><p>(<code>flag</code>):<br> Flag if <code>decision1 = TRUE</code> then Decision 1 rules will be used, otherwise Decision 2 rules will be used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list with the following elements:</p><ul><li><p><code>oc</code>: matrix with operating characteristics with the following details:</p><ul><li><p><code>ExpectedN</code>: expected number of patients in the trials</p></li>
<li><p><code>PrStopEarly</code>: probability to stop the trial early (before reaching the
maximum sample size)</p></li>
<li><p><code>PrEarlyEff</code>: probability of Early Go decision</p></li>
<li><p><code>PrEarlyFut</code>: probability of for Early Stop decision</p></li>
<li><p><code>PrEfficacy</code>: probability of Go decision</p></li>
<li><p><code>PrFutility</code>: probability of Stop decision</p></li>
<li><p><code>PrGrayZone</code>: probability between Go and Stop ,"Evaluate" or Gray decision zone</p></li>
</ul></li>
<li><p><code>Decision</code> : numeric of results with <code>TRUE</code> as Go decision, <code>FALSE</code> as Stop and <code>NA</code> as gray zone.</p></li>
<li><p><code>SampleSize</code> : numeric of sample sizes from <code>nnE</code> or <code>nnF</code> or both.</p></li>
<li><p><code>wiggled_nnE</code> : user input for <code>nnE</code> with random distance applied.</p></li>
<li><p><code>wiggled_nnF</code> : user input for <code>nnF</code> with random distance applied.</p></li>
<li><p><code>wiggled_dist</code> : magnitude of random distance applied in order of input looks.</p></li>
<li><p><code>params</code> : all user input arguments.</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Sabanes Bove, Markus Elze, Tony Pourmohamad, Jiawen Zhu, James Lymp, Anastasia Teterina, F. Hoffmann-La Roche Ltd.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

