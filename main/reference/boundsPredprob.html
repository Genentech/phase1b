<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function is used to identify the efficacy boundary and futility
boundary based on predictive probabilities, i.e.:
Efficacy boundary: find minimum x (xU) where
Pr(Pr(P &amp;gt; p | x, Y) &amp;gt;= tT | x) &amp;gt; phiU,
Futility boundary: find maximum x (xL) where
Pr(Pr(P &amp;gt; p | x, Y) &amp;gt;= tT | x) &amp;lt; phiL"><title>Decision cutpoints for boundary (based on predictive probability) — boundsPredprob • phase1b</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Decision cutpoints for boundary (based on predictive probability) — boundsPredprob"><meta property="og:description" content="This function is used to identify the efficacy boundary and futility
boundary based on predictive probabilities, i.e.:
Efficacy boundary: find minimum x (xU) where
Pr(Pr(P &amp;gt; p | x, Y) &amp;gt;= tT | x) &amp;gt; phiU,
Futility boundary: find maximum x (xL) where
Pr(Pr(P &amp;gt; p | x, Y) &amp;gt;= tT | x) &amp;lt; phiL"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125641273-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-125641273-1');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">phase1b</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">`phase1b`: Tools for Decision Making in Phase 1b Studies</a>
    <a class="dropdown-item" href="../articles/test.html">test</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/genentech/phase1b">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Decision cutpoints for boundary (based on predictive probability)</h1>
      <small class="dont-index">Source: <a href="https://github.com/genentech/phase1b/blob/HEAD/R/boundsPredprob.R" class="external-link"><code>R/boundsPredprob.R</code></a></small>
      <div class="d-none name"><code>boundsPredprob.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is used to identify the efficacy boundary and futility
boundary based on predictive probabilities, i.e.:
Efficacy boundary: find minimum x (xU) where
Pr(Pr(P &gt; p | x, Y) &gt;= tT | x) &gt; phiU,
Futility boundary: find maximum x (xL) where
Pr(Pr(P &gt; p | x, Y) &gt;= tT | x) &lt; phiL</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">boundsPredprob</span><span class="op">(</span><span class="va">nvec</span>, Nmax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">nvec</span><span class="op">)</span>, <span class="va">p</span>, <span class="va">tT</span>, <span class="va">phiL</span>, <span class="va">phiU</span>, <span class="va">a</span>, <span class="va">b</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>nvec</dt>
<dd><p>a vector of number of patients</p></dd>


<dt>Nmax</dt>
<dd><p>maximum number of patients at the end of the trial
(default: maximum of <code>nvec</code>)</p></dd>


<dt>p</dt>
<dd><p>threshold on the response rate</p></dd>


<dt>tT</dt>
<dd><p>threshold on the posterior probability to be above p</p></dd>


<dt>phiL</dt>
<dd><p>futility boundary predictive probability threshold</p></dd>


<dt>phiU</dt>
<dd><p>efficacy boundary predictive probability threshold</p></dd>


<dt>a</dt>
<dd><p>the alpha parameter of a beta prior of treatment group</p></dd>


<dt>b</dt>
<dd><p>the beta parameter of a beta prior of treatment group</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A matrix where for each sample size in <code>nvec</code>, this function
returns the maximum number of responses that meet the futility
threshold (xL), its corresponding response rate (pL), predictive probability
(ppL) and posterior probability (postL), the upper bound of one
sided 95% CI for the response rate based on an
exact binomial test (UciL), and the same boundary parameters for efficacy:
the minimal number of responses that meet the efficacy threshold (xU),
the corresponding response rate (pU), predictive probability
(ppL) and posterior probability (postU), the lower bound of one sided
95% CI for the response rate based on exact binomial test (LciU).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## 40 pts trial with interim looks after each 10 pts.,</span></span></span>
<span class="r-in"><span><span class="co">## final efficacy decision if more than 80% probability to be above 20% ORR,</span></span></span>
<span class="r-in"><span><span class="co">## final futility decision otherwise.</span></span></span>
<span class="r-in"><span><span class="co">## Interim efficacy decision if more than 90% predictive probability reach this,</span></span></span>
<span class="r-in"><span><span class="co">## interim futility decision if less than 10% predictive probability.</span></span></span>
<span class="r-in"><span><span class="co">## Uniform prior (i.e. beta(1, 1)) on the ORR:</span></span></span>
<span class="r-in"><span><span class="fu">boundsPredprob</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nvec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">40</span><span class="op">)</span>, p <span class="op">=</span> <span class="fl">0.20</span>, tT <span class="op">=</span> <span class="fl">0.80</span>,</span></span>
<span class="r-in"><span>  phiL <span class="op">=</span> <span class="fl">0.10</span>, phiU <span class="op">=</span> <span class="fl">0.90</span>, a <span class="op">=</span> <span class="fl">1</span>, b <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    nvec xL     pL    ppL  postL   UciL xU   pU    ppU  postU   LciU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   10  0 0.0000 0.0268 0.0859 0.2589  4 0.40 0.9287 0.9496 0.1500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20   20  2 0.1000 0.0269 0.1787 0.2826  7 0.35 0.9600 0.9569 0.1773</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30   30  5 0.1667 0.0446 0.3931 0.3190  9 0.30 0.9604 0.9254 0.1663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40   40  9 0.2250 0.0000 0.7040 0.3598 10 0.25 1.0000 0.8177 0.1424</span>
<span class="r-in"><span><span class="co">## From this we see e.g. that at the first IA at 10 pts, we would stop for futility</span></span></span>
<span class="r-in"><span><span class="co">## if no patient responded, and for efficacy if 4 or more pts responded.</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Sabanes Bove, Markus Elze, Tony Pourmohamad, Jiawen Zhu, James Lymp, Anastasia Teterina, F. Hoffmann-La Roche Ltd.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

